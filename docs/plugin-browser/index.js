(()=>{
"use strict";var $=(()=>{var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __esm=(fn,res)=>function(){return fn&&(res=(0,fn[__getOwnPropNames(fn)[0]])(fn=0)),res};var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(var keys=__getOwnPropNames(from),i=0,n=keys.length,key;i<n;i++)key=keys[i],!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:(k=>from[k]).bind(null,key),enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var define_DEFAULT_LANG_default,init_define_DEFAULT_LANG=__esm({"<define:DEFAULT_LANG>"(){define_DEFAULT_LANG_default={"plugin.name":"Plugin Browser","sheet.sort.title":"Sorting","sheet.sort.date_newest":"Date (new - old)","sheet.sort.date_oldest":"Date (old - new)","sheet.sort.name_az":"Name (A-Z)","sheet.sort.name_za":"Name (Z-A)","sheet.plugin.install":"Install plugin","sheet.plugin.uninstall":"Uninstall plugin","sheet.plugin.copy_plugin_link":"Copy plugin link","sheet.plugin.open_github":"Open plugin in GitHub","sheet.plugin.copy_unproxied_link":"Copy unproxied plugin link","browser.plugin.new":"new","toast.copy_link":"Copied link!","toast.open_link":"Opening link...","toast.plugin.update.success":"Updated {plugin}!","toast.plugin.update.fail":"Failed to update {plugin}!","toast.plugin.delete.success":"Deleted {plugin}!","toast.plugin.delete.fail":"Failed to delete {plugin}!","toast.plugin.install.success":"Installed {plugin}!","toast.plugin.install.fail":"Failed to install {plugin}!","toast.data.fail_fetch":"Failed to fetch plugins!","toast.data.fail_parse":"Failed to parse plugins!"}}});var require_plugin=__commonJS({"vendetta:@vendetta/plugin"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.plugin}});var require_metro=__commonJS({"vendetta:@vendetta/metro"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.metro}});var require_common=__commonJS({"vendetta:@vendetta/metro/common"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.metro.common}});var require_assets=__commonJS({"vendetta:@vendetta/ui/assets"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui.assets}});var require_toasts=__commonJS({"vendetta:@vendetta/ui/toasts"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui.toasts}});var require_vendetta=__commonJS({"vendetta:@vendetta"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta}});var require_ui=__commonJS({"vendetta:@vendetta/ui"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui}});var require_patcher=__commonJS({"vendetta:@vendetta/patcher"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.patcher}});var require_components=__commonJS({"vendetta:@vendetta/ui/components"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui.components}});var require_utils=__commonJS({"vendetta:@vendetta/utils"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.utils}});var require_fuzzysort=__commonJS({"node_modules/.pnpm/fuzzysort@3.1.0_patch_hash=bimxxw4622jjburfe3votrtl5m/node_modules/fuzzysort/fuzzysort.js"(exports,module){init_define_DEFAULT_LANG();function _assert_this_initialized(self){if(self===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _call_super(_this,derived,args){return derived=_get_prototype_of(derived),_possible_constructor_return(_this,_is_native_reflect_construct()?Reflect.construct(derived,args||[],_get_prototype_of(_this).constructor):derived.apply(_this,args))}function _class_call_check2(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _construct(Parent,args,Class){return _is_native_reflect_construct()?_construct=Reflect.construct:_construct=function(Parent2,args2,Class2){var a=[null];a.push.apply(a,args2);var Constructor=Function.bind.apply(Parent2,a),instance=new Constructor;return Class2&&_set_prototype_of(instance,Class2.prototype),instance},_construct.apply(null,arguments)}function _defineProperties2(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class2(Constructor,protoProps,staticProps){return protoProps&&_defineProperties2(Constructor.prototype,protoProps),staticProps&&_defineProperties2(Constructor,staticProps),Constructor}function _get_prototype_of(o){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(o2){return o2.__proto__||Object.getPrototypeOf(o2)},_get_prototype_of(o)}function _inherits(subClass,superClass){if(typeof superClass!="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _is_native_function(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _possible_constructor_return(self,call){return call&&(_type_of(call)==="object"||typeof call=="function")?call:_assert_this_initialized(self)}function _set_prototype_of(o,p){return _set_prototype_of=Object.setPrototypeOf||function(o2,p2){return o2.__proto__=p2,o2},_set_prototype_of(o,p)}function _type_of(obj){"@swc/helpers - typeof";return obj&&typeof Symbol<"u"&&obj.constructor===Symbol?"symbol":typeof obj}function _wrap_native_super(Class){var _cache=typeof Map=="function"?new Map:void 0;return _wrap_native_super=function(Class2){if(Class2===null||!_is_native_function(Class2))return Class2;if(typeof Class2!="function")throw new TypeError("Super expression must either be null or a function");if(typeof _cache<"u"){if(_cache.has(Class2))return _cache.get(Class2);_cache.set(Class2,Wrapper)}function Wrapper(){return _construct(Class2,arguments,_get_prototype_of(this).constructor)}return Wrapper.prototype=Object.create(Class2.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(Wrapper,Class2)},_wrap_native_super(Class)}function _is_native_reflect_construct(){try{var result=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_is_native_reflect_construct=function(){return!!result})()}((root,UMD)=>{typeof define=="function"&&define.amd?define([],UMD):typeof module=="object"&&module.exports?module.exports=UMD():root.fuzzysort=UMD()})(exports,_=>{"use strict";var single=(search,target)=>{if(!search||!target)return NULL;var preparedSearch=getPreparedSearch(search);isPrepared(target)||(target=getPrepared(target));var searchBitflags=preparedSearch.bitflags;return(searchBitflags&target._bitflags)!==searchBitflags?NULL:algorithm(preparedSearch,target)},go=(search,targets,options)=>{if(!search)return options?.all?all(targets,options):noResults;var preparedSearch=getPreparedSearch(search),searchBitflags=preparedSearch.bitflags,containsSpace=preparedSearch.containsSpace,threshold=denormalizeScore(options?.threshold||0),limit=options?.limit||INFINITY,resultsLen=0,limitedCount=0,targetsLen=targets.length;function push_result(result2){resultsLen<limit?(q.add(result2),++resultsLen):(++limitedCount,result2._score>q.peek()._score&&q.replaceTop(result2))}if(options?.key)for(var key=options.key,i=0;i<targetsLen;++i){var obj=targets[i],target=getValue(obj,key);if(target&&(isPrepared(target)||(target=getPrepared(target)),(searchBitflags&target._bitflags)===searchBitflags)){var result=algorithm(preparedSearch,target);result!==NULL&&(result._score<threshold||(result.obj=obj,push_result(result)))}}else if(options?.keys){var keys=options.keys,keysLen=keys.length;outer:for(var i=0;i<targetsLen;++i){var obj=targets[i];{for(var keysBitflags=0,keyI=0;keyI<keysLen;++keyI){var key=keys[keyI],target=getValue(obj,key);if(!target){tmpTargets[keyI]=noTarget;continue}isPrepared(target)||(target=getPrepared(target)),tmpTargets[keyI]=target,keysBitflags|=target._bitflags}if((searchBitflags&keysBitflags)!==searchBitflags)continue}if(containsSpace)for(var i1=0;i1<preparedSearch.spaceSearches.length;i1++)keysSpacesBestScores[i1]=NEGATIVE_INFINITY;for(var keyI=0;keyI<keysLen;++keyI){if(target=tmpTargets[keyI],target===noTarget){tmpResults[keyI]=noTarget;continue}if(tmpResults[keyI]=algorithm(preparedSearch,target,!1,containsSpace),tmpResults[keyI]===NULL){tmpResults[keyI]=noTarget;continue}if(containsSpace)for(var i2=0;i2<preparedSearch.spaceSearches.length;i2++){if(allowPartialMatchScores[i2]>-1e3&&keysSpacesBestScores[i2]>NEGATIVE_INFINITY){var tmp=(keysSpacesBestScores[i2]+allowPartialMatchScores[i2])/4;tmp>keysSpacesBestScores[i2]&&(keysSpacesBestScores[i2]=tmp)}allowPartialMatchScores[i2]>keysSpacesBestScores[i2]&&(keysSpacesBestScores[i2]=allowPartialMatchScores[i2])}}if(containsSpace){for(var i3=0;i3<preparedSearch.spaceSearches.length;i3++)if(keysSpacesBestScores[i3]===NEGATIVE_INFINITY)continue outer}else{for(var hasAtLeast1Match=!1,i4=0;i4<keysLen;i4++)if(tmpResults[i4]._score!==NEGATIVE_INFINITY){hasAtLeast1Match=!0;break}if(!hasAtLeast1Match)continue}for(var objResults=new KeysResult(keysLen),i5=0;i5<keysLen;i5++)objResults[i5]=tmpResults[i5];if(containsSpace)for(var score=0,i6=0;i6<preparedSearch.spaceSearches.length;i6++)score+=keysSpacesBestScores[i6];else for(var score=NEGATIVE_INFINITY,i7=0;i7<keysLen;i7++){var result=objResults[i7];if(result._score>-1e3&&score>NEGATIVE_INFINITY){var tmp=(score+result._score)/4;tmp>score&&(score=tmp)}result._score>score&&(score=result._score)}if(objResults.obj=obj,objResults._score=score,options?.scoreFn){if(score=options.scoreFn(objResults),!score)continue;score=denormalizeScore(score),objResults._score=score}score<threshold||push_result(objResults)}}else for(var i=0;i<targetsLen;++i){var target=targets[i];if(target&&(isPrepared(target)||(target=getPrepared(target)),(searchBitflags&target._bitflags)===searchBitflags)){var result=algorithm(preparedSearch,target);result!==NULL&&(result._score<threshold||push_result(result))}}if(resultsLen===0)return noResults;for(var results=new Array(resultsLen),i=resultsLen-1;i>=0;--i)results[i]=q.poll();return results.total=resultsLen+limitedCount,results},highlight=(result,open="<b>",close="</b>")=>{for(var callback=typeof open=="function"?open:void 0,target=result.target,targetLen=target.length,indexes=result.indexes,highlighted="",matchI=0,indexesI=0,opened=!1,parts=[],i=0;i<targetLen;++i){var char=target[i];if(indexes[indexesI]===i){if(++indexesI,opened||(opened=!0,callback?(parts.push(highlighted),highlighted=""):highlighted+=open),indexesI===indexes.length){callback?(highlighted+=char,parts.push(callback(highlighted,matchI++)),highlighted="",parts.push(target.substr(i+1))):highlighted+=char+close+target.substr(i+1);break}}else opened&&(opened=!1,callback?(parts.push(callback(highlighted,matchI++)),highlighted=""):highlighted+=close);highlighted+=char}return callback?parts:highlighted},prepare=target=>{typeof target=="number"?target=""+target:typeof target!="string"&&(target="");var info=prepareLowerInfo(target);return new_result(target,{_targetLower:info._lower,_targetLowerCodes:info.lowerCodes,_bitflags:info.bitflags})},cleanup=()=>{preparedCache.clear(),preparedSearchCache.clear()},Result=function(){function Result2(){_class_call_check2(this,Result2)}return _create_class2(Result2,[{key:"indexes",get:function(){return this._indexes.slice(0,this._indexes.len).sort((a,b)=>a-b)}},{key:"indexes",set:function(indexes){return this._indexes=indexes}},{key:"highlight",value:function(open,close){return highlight(this,open,close)}},{key:"score",get:function(){return normalizeScore(this._score)}},{key:"score",set:function(score){this._score=denormalizeScore(score)}}]),Result2}(),KeysResult=function(Array1){_inherits(KeysResult2,Array1);function KeysResult2(){return _class_call_check2(this,KeysResult2),_call_super(this,KeysResult2,arguments)}return _create_class2(KeysResult2,[{key:"score",get:function(){return normalizeScore(this._score)}},{key:"score",set:function(score){this._score=denormalizeScore(score)}}]),KeysResult2}(_wrap_native_super(Array)),new_result=(target,options)=>{var result=new Result;return result.target=target,result.obj=options.obj??NULL,result._score=options._score??NEGATIVE_INFINITY,result._indexes=options._indexes??[],result._targetLower=options._targetLower??"",result._targetLowerCodes=options._targetLowerCodes??NULL,result._nextBeginningIndexes=options._nextBeginningIndexes??NULL,result._bitflags=options._bitflags??0,result},normalizeScore=score=>score===NEGATIVE_INFINITY?0:score>1?score:Math.E**(((-score+1)**.04307-1)*-2),denormalizeScore=normalizedScore=>normalizedScore===0?NEGATIVE_INFINITY:normalizedScore>1?normalizedScore:1-Math.pow(Math.log(normalizedScore)/-2+1,1/.04307),prepareSearch=search=>{typeof search=="number"?search=""+search:typeof search!="string"&&(search=""),search=search.trim();var info=prepareLowerInfo(search),spaceSearches=[];if(info.containsSpace){var searches=search.split(/\s+/);searches=[...new Set(searches)];for(var i=0;i<searches.length;i++)if(searches[i]!==""){var _info=prepareLowerInfo(searches[i]);spaceSearches.push({lowerCodes:_info.lowerCodes,_lower:searches[i].toLowerCase(),containsSpace:!1})}}return{lowerCodes:info.lowerCodes,_lower:info._lower,containsSpace:info.containsSpace,bitflags:info.bitflags,spaceSearches}},getPrepared=target=>{if(target.length>999)return prepare(target);var targetPrepared=preparedCache.get(target);return targetPrepared!==void 0||(targetPrepared=prepare(target),preparedCache.set(target,targetPrepared)),targetPrepared},getPreparedSearch=search=>{if(search.length>999)return prepareSearch(search);var searchPrepared=preparedSearchCache.get(search);return searchPrepared!==void 0||(searchPrepared=prepareSearch(search),preparedSearchCache.set(search,searchPrepared)),searchPrepared},all=(targets,options)=>{var results=[];results.total=targets.length;var limit=options?.limit||INFINITY;if(options?.key)for(var i=0;i<targets.length;i++){var obj=targets[i],target=getValue(obj,options.key);if(target!=NULL){isPrepared(target)||(target=getPrepared(target));var result=new_result(target.target,{_score:target._score,obj});if(results.push(result),results.length>=limit)return results}}else if(options?.keys)for(var i=0;i<targets.length;i++){for(var obj=targets[i],objResults=new KeysResult(options.keys.length),keyI=options.keys.length-1;keyI>=0;--keyI){var target=getValue(obj,options.keys[keyI]);if(!target){objResults[keyI]=noTarget;continue}isPrepared(target)||(target=getPrepared(target)),target._score=NEGATIVE_INFINITY,target._indexes.len=0,objResults[keyI]=target}if(objResults.obj=obj,objResults._score=NEGATIVE_INFINITY,results.push(objResults),results.length>=limit)return results}else for(var i=0;i<targets.length;i++){var target=targets[i];if(target!=NULL&&(isPrepared(target)||(target=getPrepared(target)),target._score=NEGATIVE_INFINITY,target._indexes.len=0,results.push(target),results.length>=limit))return results}return results},algorithm=(preparedSearch,prepared,allowSpaces=!1,allowPartialMatch=!1)=>{if(allowSpaces===!1&&preparedSearch.containsSpace)return algorithmSpaces(preparedSearch,prepared,allowPartialMatch);for(var searchLower=preparedSearch._lower,searchLowerCodes=preparedSearch.lowerCodes,searchLowerCode=searchLowerCodes[0],targetLowerCodes=prepared._targetLowerCodes,searchLen=searchLowerCodes.length,targetLen=targetLowerCodes.length,searchI=0,targetI=0,matchesSimpleLen=0;;){var isMatch=searchLowerCode===targetLowerCodes[targetI];if(isMatch){if(matchesSimple[matchesSimpleLen++]=targetI,++searchI,searchI===searchLen)break;searchLowerCode=searchLowerCodes[searchI]}if(++targetI,targetI>=targetLen)return NULL}var searchI=0,successStrict=!1,matchesStrictLen=0,nextBeginningIndexes=prepared._nextBeginningIndexes;nextBeginningIndexes===NULL&&(nextBeginningIndexes=prepared._nextBeginningIndexes=prepareNextBeginningIndexes(prepared.target)),targetI=matchesSimple[0]===0?0:nextBeginningIndexes[matchesSimple[0]-1];var backtrackCount=0;if(targetI!==targetLen)for(;;)if(targetI>=targetLen){if(searchI<=0||(++backtrackCount,backtrackCount>200))break;--searchI;var lastMatch=matchesStrict[--matchesStrictLen];targetI=nextBeginningIndexes[lastMatch]}else{var isMatch=searchLowerCodes[searchI]===targetLowerCodes[targetI];if(isMatch){if(matchesStrict[matchesStrictLen++]=targetI,++searchI,searchI===searchLen){successStrict=!0;break}++targetI}else targetI=nextBeginningIndexes[targetI]}var substringIndex=searchLen<=1?-1:prepared._targetLower.indexOf(searchLower,matchesSimple[0]),isSubstring=!!~substringIndex,isSubstringBeginning=isSubstring?substringIndex===0||prepared._nextBeginningIndexes[substringIndex-1]===substringIndex:!1;if(isSubstring&&!isSubstringBeginning){for(var i=0;i<nextBeginningIndexes.length;i=nextBeginningIndexes[i])if(!(i<=substringIndex)){for(var s=0;s<searchLen&&searchLowerCodes[s]===prepared._targetLowerCodes[i+s];s++);if(s===searchLen){substringIndex=i,isSubstringBeginning=!0;break}}}var calculateScore=matches=>{for(var score2=0,extraMatchGroupCount=0,i2=1;i2<searchLen;++i2)matches[i2]-matches[i2-1]!==1&&(score2-=matches[i2],++extraMatchGroupCount);var unmatchedDistance=matches[searchLen-1]-matches[0]-(searchLen-1);if(score2-=(12+unmatchedDistance)*extraMatchGroupCount,matches[0]!==0&&(score2-=matches[0]*matches[0]*.2),!successStrict)score2*=1e3;else{for(var uniqueBeginningIndexes=1,i2=nextBeginningIndexes[0];i2<targetLen;i2=nextBeginningIndexes[i2])++uniqueBeginningIndexes;uniqueBeginningIndexes>24&&(score2*=(uniqueBeginningIndexes-24)*10)}return score2-=(targetLen-searchLen)/2,isSubstring&&(score2/=1+searchLen*searchLen*1),isSubstringBeginning&&(score2/=1+searchLen*searchLen*1),score2-=(targetLen-searchLen)/2,score2};if(successStrict)if(isSubstringBeginning){for(var i=0;i<searchLen;++i)matchesSimple[i]=substringIndex+i;var matchesBest=matchesSimple,score=calculateScore(matchesSimple)}else var matchesBest=matchesStrict,score=calculateScore(matchesStrict);else{if(isSubstring)for(var i=0;i<searchLen;++i)matchesSimple[i]=substringIndex+i;var matchesBest=matchesSimple,score=calculateScore(matchesBest)}prepared._score=score;for(var i=0;i<searchLen;++i)prepared._indexes[i]=matchesBest[i];prepared._indexes.len=searchLen;var result=new Result;return result.target=prepared.target,result._score=prepared._score,result._indexes=prepared._indexes,result},algorithmSpaces=(preparedSearch,target,allowPartialMatch)=>{for(var seen_indexes=new Set,score=0,result=NULL,first_seen_index_last_search=0,searches=preparedSearch.spaceSearches,searchesLen=searches.length,changeslen=0,resetNextBeginningIndexes=()=>{for(var i3=changeslen-1;i3>=0;i3--)target._nextBeginningIndexes[nextBeginningIndexesChanges[i3*2+0]]=nextBeginningIndexesChanges[i3*2+1]},hasAtLeast1Match=!1,i=0;i<searchesLen;++i){allowPartialMatchScores[i]=NEGATIVE_INFINITY;var search=searches[i];if(result=algorithm(search,target),allowPartialMatch){if(result===NULL)continue;hasAtLeast1Match=!0}else if(result===NULL)return resetNextBeginningIndexes(),NULL;var isTheLastSearch=i===searchesLen-1;if(!isTheLastSearch){for(var indexes=result._indexes,indexesIsConsecutiveSubstring=!0,i1=0;i1<indexes.len-1;i1++)if(indexes[i1+1]-indexes[i1]!==1){indexesIsConsecutiveSubstring=!1;break}if(indexesIsConsecutiveSubstring)for(var newBeginningIndex=indexes[indexes.len-1]+1,toReplace=target._nextBeginningIndexes[newBeginningIndex-1],i2=newBeginningIndex-1;i2>=0&&toReplace===target._nextBeginningIndexes[i2];i2--)target._nextBeginningIndexes[i2]=newBeginningIndex,nextBeginningIndexesChanges[changeslen*2+0]=i2,nextBeginningIndexesChanges[changeslen*2+1]=toReplace,changeslen++}score+=result._score/searchesLen,allowPartialMatchScores[i]=result._score/searchesLen,result._indexes[0]<first_seen_index_last_search&&(score-=(first_seen_index_last_search-result._indexes[0])*2),first_seen_index_last_search=result._indexes[0];for(var j=0;j<result._indexes.len;++j)seen_indexes.add(result._indexes[j])}if(allowPartialMatch&&!hasAtLeast1Match)return NULL;resetNextBeginningIndexes();var allowSpacesResult=algorithm(preparedSearch,target,!0);if(allowSpacesResult!==NULL&&allowSpacesResult._score>score){if(allowPartialMatch)for(var i=0;i<searchesLen;++i)allowPartialMatchScores[i]=allowSpacesResult._score/searchesLen;return allowSpacesResult}allowPartialMatch&&(result=target),result._score=score;var i=0;for(var index of seen_indexes)result._indexes[i++]=index;return result._indexes.len=i,result},remove_accents=str=>str.replace(/[A-Za-zÀ-ÖØ-öø-ÿĀ-ʯḀ-ỿ]+/g,match=>match.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),prepareLowerInfo=str=>{str=remove_accents(str);for(var strLen=str.length,lower=str.toLowerCase(),lowerCodes=[],bitflags=0,containsSpace=!1,i=0;i<strLen;++i){var lowerCode=lowerCodes[i]=lower.charCodeAt(i);if(lowerCode===32){containsSpace=!0;continue}var bit=lowerCode>=97&&lowerCode<=122?lowerCode-97:lowerCode>=48&&lowerCode<=57?26:lowerCode<=127?30:31;bitflags|=1<<bit}return{lowerCodes,bitflags,containsSpace,_lower:lower}},prepareBeginningIndexes=target=>{for(var targetLen=target.length,beginningIndexes=[],beginningIndexesLen=0,wasUpper=!1,wasAlphanum=!1,i=0;i<targetLen;++i){var targetCode=target.charCodeAt(i),isUpper=targetCode>=65&&targetCode<=90,isAlphanum=isUpper||targetCode>=97&&targetCode<=122||targetCode>=48&&targetCode<=57,isBeginning=isUpper&&!wasUpper||!wasAlphanum||!isAlphanum;wasUpper=isUpper,wasAlphanum=isAlphanum,isBeginning&&(beginningIndexes[beginningIndexesLen++]=i)}return beginningIndexes},prepareNextBeginningIndexes=target=>{target=remove_accents(target);for(var targetLen=target.length,beginningIndexes=prepareBeginningIndexes(target),nextBeginningIndexes=[],lastIsBeginning=beginningIndexes[0],lastIsBeginningI=0,i=0;i<targetLen;++i)lastIsBeginning>i?nextBeginningIndexes[i]=lastIsBeginning:(lastIsBeginning=beginningIndexes[++lastIsBeginningI],nextBeginningIndexes[i]=lastIsBeginning===void 0?targetLen:lastIsBeginning);return nextBeginningIndexes},preparedCache=new Map,preparedSearchCache=new Map,matchesSimple=[],matchesStrict=[],nextBeginningIndexesChanges=[],keysSpacesBestScores=[],allowPartialMatchScores=[],tmpTargets=[],tmpResults=[],getValue=(obj,prop)=>{var tmp=obj[prop];if(tmp!==void 0)return tmp;if(typeof prop=="function")return prop(obj);var segs=prop;Array.isArray(prop)||(segs=prop.split("."));for(var len=segs.length,i=-1;obj&&++i<len;)obj=obj[segs[i]];return obj},isPrepared=x=>typeof x=="object"&&typeof x._bitflags=="number",INFINITY=1/0,NEGATIVE_INFINITY=-INFINITY,noResults=[];noResults.total=0;var NULL=null,noTarget=prepare(""),fastpriorityqueue=r=>{var e=[],o=0,a={},v=r2=>{for(var a2=0,v2=e[a2],c=1;c<o;){var s=c+1;a2=c,s<o&&e[s]._score<e[c]._score&&(a2=s),e[a2-1>>1]=e[a2],c=1+(a2<<1)}for(var f=a2-1>>1;a2>0&&v2._score<e[f]._score;f=(a2=f)-1>>1)e[a2]=e[f];e[a2]=v2};return a.add=r2=>{var a2=o;e[o++]=r2;for(var v2=a2-1>>1;a2>0&&r2._score<e[v2]._score;v2=(a2=v2)-1>>1)e[a2]=e[v2];e[a2]=r2},a.poll=r2=>{if(o!==0){var a2=e[0];return e[0]=e[--o],v(),a2}},a.peek=r2=>{if(o!==0)return e[0]},a.replaceTop=r2=>{e[0]=r2,v()},a},q=fastpriorityqueue();return{single,go,prepare,cleanup}})}});var require_plugins=__commonJS({"vendetta:@vendetta/plugins"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.plugins}});var src_exports={};__export(src_exports,{default:()=>src_default,lang:()=>lang,vstorage:()=>vstorage});init_define_DEFAULT_LANG();var import_plugin2=__toESM(require_plugin(),1);init_define_DEFAULT_LANG();var import_metro3=__toESM(require_metro(),1),import_common3=__toESM(require_common(),1);init_define_DEFAULT_LANG();var import_metro=__toESM(require_metro(),1),import_common=__toESM(require_common(),1),import_assets=__toESM(require_assets(),1),import_toasts=__toESM(require_toasts(),1),ThemeStore=(0,import_metro.findByStoreName)("ThemeStore"),{triggerHaptic}=(0,import_metro.findByProps)("triggerHaptic"),colorModule=(0,import_metro.findByProps)("colors","unsafe_rawColors"),colorResolver=colorModule?.internal??colorModule?.meta,{useThemeContext}=(0,import_metro.findByProps)("useThemeContext"),TextStyleSheet=(0,import_metro.findByProps)("TextStyleSheet").TextStyleSheet,Navigator=(0,import_metro.findByProps)("Navigator")?.Navigator,modalCloseButton=(0,import_metro.findByProps)("getHeaderCloseButton")?.getHeaderCloseButton,{popModal,pushModal}=(0,import_metro.findByProps)("popModal","pushModal");var lerp=(og,target,perc)=>{var hex2rgb=hex=>hex.match(/\w\w/g)?.map(x=>Number.parseInt(x,16))??[0,0,0],rgb2hex=rgb=>`#${rgb.map(x=>x.toString(16).padStart(2,"0")).join("")}`,ogR=hex2rgb(og),targetR=hex2rgb(target),result=ogR.map((ogC,i)=>Math.round(ogC+(targetR[i]-ogC)*perc));return rgb2hex(result)};function resolveSemanticColor(color,theme=ThemeStore.theme){return colorResolver?.resolveSemanticColor(theme,color)}function fluxSubscribe(topic,callback,once){var cback=data=>(callback(data),once&&import_common.FluxDispatcher.unsubscribe(topic,cback));return import_common.FluxDispatcher.subscribe(topic,cback),()=>import_common.FluxDispatcher.unsubscribe(topic,cback)}init_define_DEFAULT_LANG();init_define_DEFAULT_LANG();var import_meta={};function createJSONStorage(getStorage,options){var storage2;try{storage2=getStorage()}catch{return}var persistStorage={getItem:name=>{var _a,parse=str2=>str2===null?null:JSON.parse(str2,options?.reviver),str=(_a=storage2.getItem(name))!=null?_a:null;return str instanceof Promise?str.then(parse):parse(str)},setItem:(name,newValue)=>storage2.setItem(name,JSON.stringify(newValue,options?.replacer)),removeItem:name=>storage2.removeItem(name)};return persistStorage}var toThenable=fn=>input=>{try{var result=fn(input);return result instanceof Promise?result:{then(onFulfilled){return toThenable(onFulfilled)(result)},catch(_onRejected){return this}}}catch(e){return{then(_onFulfilled){return this},catch(onRejected){return toThenable(onRejected)(e)}}}},oldImpl=(config,baseOptions)=>(set,get,api)=>{var options={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:state=>state,version:0,merge:(persistedState,currentState)=>({...currentState,...persistedState}),...baseOptions},hasHydrated=!1,hydrationListeners=new Set,finishHydrationListeners=new Set,storage2;try{storage2=options.getStorage()}catch{}if(!storage2)return config((...args)=>{console.warn(`[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`),set(...args)},get,api);var thenableSerialize=toThenable(options.serialize),setItem=()=>{var state=options.partialize({...get()}),errorInSync,thenable=thenableSerialize({state,version:options.version}).then(serializedValue=>storage2.setItem(options.name,serializedValue)).catch(e=>{errorInSync=e});if(errorInSync)throw errorInSync;return thenable},savedSetState=api.setState;api.setState=(state,replace)=>{savedSetState(state,replace),setItem()};var configResult=config((...args)=>{set(...args),setItem()},get,api),stateFromStorage,hydrate=()=>{var _a;if(storage2){hasHydrated=!1,hydrationListeners.forEach(cb=>cb(get()));var postRehydrationCallback=((_a=options.onRehydrateStorage)==null?void 0:_a.call(options,get()))||void 0;return toThenable(storage2.getItem.bind(storage2))(options.name).then(storageValue=>{if(storageValue)return options.deserialize(storageValue)}).then(deserializedStorageValue=>{if(deserializedStorageValue)if(typeof deserializedStorageValue.version=="number"&&deserializedStorageValue.version!==options.version){if(options.migrate)return options.migrate(deserializedStorageValue.state,deserializedStorageValue.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return deserializedStorageValue.state}).then(migratedState=>{var _a2;return stateFromStorage=options.merge(migratedState,(_a2=get())!=null?_a2:configResult),set(stateFromStorage,!0),setItem()}).then(()=>{postRehydrationCallback?.(stateFromStorage,void 0),hasHydrated=!0,finishHydrationListeners.forEach(cb=>cb(stateFromStorage))}).catch(e=>{postRehydrationCallback?.(void 0,e)})}};return api.persist={setOptions:newOptions=>{options={...options,...newOptions},newOptions.getStorage&&(storage2=newOptions.getStorage())},clearStorage:()=>{storage2?.removeItem(options.name)},getOptions:()=>options,rehydrate:()=>hydrate(),hasHydrated:()=>hasHydrated,onHydrate:cb=>(hydrationListeners.add(cb),()=>{hydrationListeners.delete(cb)}),onFinishHydration:cb=>(finishHydrationListeners.add(cb),()=>{finishHydrationListeners.delete(cb)})},hydrate(),stateFromStorage||configResult},newImpl=(config,baseOptions)=>(set,get,api)=>{var options={storage:createJSONStorage(()=>localStorage),partialize:state=>state,version:0,merge:(persistedState,currentState)=>({...currentState,...persistedState}),...baseOptions},hasHydrated=!1,hydrationListeners=new Set,finishHydrationListeners=new Set,storage2=options.storage;if(!storage2)return config((...args)=>{console.warn(`[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`),set(...args)},get,api);var setItem=()=>{var state=options.partialize({...get()});return storage2.setItem(options.name,{state,version:options.version})},savedSetState=api.setState;api.setState=(state,replace)=>{savedSetState(state,replace),setItem()};var configResult=config((...args)=>{set(...args),setItem()},get,api);api.getInitialState=()=>configResult;var stateFromStorage,hydrate=()=>{var _a,_b;if(storage2){hasHydrated=!1,hydrationListeners.forEach(cb=>{var _a2;return cb((_a2=get())!=null?_a2:configResult)});var postRehydrationCallback=((_b=options.onRehydrateStorage)==null?void 0:_b.call(options,(_a=get())!=null?_a:configResult))||void 0;return toThenable(storage2.getItem.bind(storage2))(options.name).then(deserializedStorageValue=>{if(deserializedStorageValue)if(typeof deserializedStorageValue.version=="number"&&deserializedStorageValue.version!==options.version){if(options.migrate)return[!0,options.migrate(deserializedStorageValue.state,deserializedStorageValue.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,deserializedStorageValue.state];return[!1,void 0]}).then(migrationResult=>{var _a2,[migrated,migratedState]=migrationResult;if(stateFromStorage=options.merge(migratedState,(_a2=get())!=null?_a2:configResult),set(stateFromStorage,!0),migrated)return setItem()}).then(()=>{postRehydrationCallback?.(stateFromStorage,void 0),stateFromStorage=get(),hasHydrated=!0,finishHydrationListeners.forEach(cb=>cb(stateFromStorage))}).catch(e=>{postRehydrationCallback?.(void 0,e)})}};return api.persist={setOptions:newOptions=>{options={...options,...newOptions},newOptions.storage&&(storage2=newOptions.storage)},clearStorage:()=>{storage2?.removeItem(options.name)},getOptions:()=>options,rehydrate:()=>hydrate(),hasHydrated:()=>hasHydrated,onHydrate:cb=>(hydrationListeners.add(cb),()=>{hydrationListeners.delete(cb)}),onFinishHydration:cb=>(finishHydrationListeners.add(cb),()=>{finishHydrationListeners.delete(cb)})},options.skipHydration||hydrate(),stateFromStorage||configResult},persistImpl=(config,baseOptions)=>"getStorage"in baseOptions||"serialize"in baseOptions||"deserialize"in baseOptions?((import_meta.env?import_meta.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(config,baseOptions)):newImpl(config,baseOptions),persist=persistImpl;init_define_DEFAULT_LANG();var constants_default={github:{url:"https://github.com/nexpid/BunnyPlugins/tree/main/",raw:"https://raw.githubusercontent.com/nexpid/BunnyPlugins/main/"}};init_define_DEFAULT_LANG();var import_metro2=__toESM(require_metro(),1),import_common2=__toESM(require_common(),1);var WebView=(0,import_metro2.find)(x=>x?.WebView&&!x.default).WebView,Svg=(0,import_metro2.findByProps)("SvgXml"),Reanimated=(0,import_metro2.findByProps)("useSharedValue"),FlashList=(0,import_metro2.findByProps)("FlashList").FlashList,{default:Video}=(0,import_metro2.findByProps)("DRMType","FilterType"),Joi=(0,import_metro2.findByProps)("isJoi"),zustand=(0,import_metro2.findByProps)("create","useStore")??{create:(0,import_metro2.findByName)("create")},DocumentPicker=(0,import_metro2.findByProps)("pickSingle","isCancel"),_MAS=(0,import_metro2.findByProps)("MobileAudioSound").MobileAudioSound;var RNCacheModule=import_common2.ReactNative.NativeModules.MMKVManager??import_common2.ReactNative.NativeModules.NativeCacheModule,RNChatModule=import_common2.ReactNative.NativeModules.DCDChatManager??import_common2.ReactNative.NativeModules.NativeChatModule,RNFileModule=import_common2.ReactNative.NativeModules.RTNFileManager??import_common2.ReactNative.NativeModules.DCDFileManager??import_common2.ReactNative.NativeModules.NativeFileModule;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var useLangStore=zustand.create(persist((set,get)=>({values:{},lastModified:null,update:function(){var _ref=_async_to_generator(function*(plugin2){var res=yield fetch(`${constants_default.github.raw}lang/values/${plugin2.toString()}.json`,{headers:{"if-modified-since":get().lastModified}});if(res.ok){var values=yield res.json();set({lastModified:res.headers.get("last-modified"),values})}});return function(plugin2){return _ref.apply(this,arguments)}}()}),{name:"nexpid-lang",storage:createJSONStorage(()=>RNCacheModule),partialize:state=>({values:state.values,lastModified:state.lastModified}),onRehydrateStorage:()=>()=>RNCacheModule.removeItem("nexpid-lang")}));function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var IntlMessageFormat=(0,import_metro3.findByName)("MessageFormat"),Lang=function(){"use strict";function Lang2(plugin2){_class_call_check(this,Lang2),_define_property(this,"plugin",void 0),_define_property(this,"_unload",void 0),_define_property(this,"Values",void 0),this.plugin=plugin2,useLangStore.persist.setOptions({name:`nexpid-lang-${plugin2.toString()}`,onRehydrateStorage:()=>state=>state?.update(this.plugin)}),useLangStore.persist.rehydrate(),this._unload=fluxSubscribe("I18N_LOAD_SUCCESS",()=>void useLangStore.persist.rehydrate())}return _create_class(Lang2,[{key:"unload",value:function(){this._unload()}},{key:"format",value:function(_key,input){var key=_key,locale=Lang2.getLang(),{values}=useLangStore.getState();if(!values)return String(key);var val=values[locale]?.[key]??values.en?.[key]??define_DEFAULT_LANG_default?.[key];return val?Object.keys(input).length>0?new IntlMessageFormat(val).format(input):val:String(key)}}],[{key:"getLang",value:function(){var lang2=import_common3.i18n.getLocale()?.replace(/-/g,"_")??"en";return lang2.startsWith("en_")?"en":lang2}},{key:"basicFormat",value:function(text){var rules=[{regex:/\*\*(.*?)\*\*/g,react:txt2=>React.createElement(import_common3.ReactNative.Text,{style:{fontWeight:"900"}},txt2)}],txt=text.split(""),off=0;for(var rule of rules){var matches=Array.from(text.matchAll(rule.regex));for(var match of matches)match[1]&&match.index&&(txt.splice(match.index-off,match[0].length,rule.react(match[1])),off+=match[0].length-1)}return txt}}]),Lang2}();init_define_DEFAULT_LANG();var import_vendetta=__toESM(require_vendetta(),1),import_common16=__toESM(require_common(),1),import_plugin=__toESM(require_plugin(),1),import_assets6=__toESM(require_assets(),1);init_define_DEFAULT_LANG();var import_common5=__toESM(require_common(),1),import_ui2=__toESM(require_ui(),1);init_define_DEFAULT_LANG();var import_metro4=__toESM(require_metro(),1),import_common4=__toESM(require_common(),1),import_ui=__toESM(require_ui(),1);var{useThemeContext:useThemeContext2}=(0,import_metro4.findByProps)("useThemeContext");function Text({variant,lineClamp,color,align,style,onPress,getChildren,children,liveUpdate,ellipsis}){var themeContext=useThemeContext2(),[_,forceUpdate]=import_common4.React.useReducer(x=>~x,0);return import_common4.React.useEffect(()=>{if(liveUpdate){var nextSecond=()=>Date.now()-new Date().setMilliseconds(1e3),timeout=setTimeout(function update(){forceUpdate(),timeout=setTimeout(update,nextSecond())},nextSecond());return()=>clearTimeout(timeout)}},[]),import_common4.React.createElement(import_common4.ReactNative.Text,{style:[variant&&TextStyleSheet[variant],color?{color:resolveSemanticColor(import_ui.semanticColors[color],themeContext?.theme)}:{},align&&{textAlign:align},style??{}],numberOfLines:lineClamp,onPress,ellipsizeMode:ellipsis},getChildren?.()??children)}function TextBadge({style,variant,children,shiny}){var[width,setWidth]=import_common5.React.useState(0),styles2=import_common5.stylesheet.createThemedStyleSheet({main:{flexDirection:"row",alignItems:"center",justifyContent:"center",borderRadius:2147483647,paddingHorizontal:6,paddingVertical:3,backgroundColor:import_ui2.semanticColors[`REDESIGN_BUTTON_${variant.toUpperCase()}_BACKGROUND`],color:import_ui2.semanticColors[`REDESIGN_BUTTON_${variant.toUpperCase()}_TEXT`],marginTop:3,overflow:"hidden"},shiner:{position:"absolute",width:7,height:80,backgroundColor:"#fff4"}}),shinyTranslate=Reanimated.useSharedValue(0),randomness=import_common5.React.useRef(1500+Math.floor(Math.random()*696)).current;return import_common5.React.useEffect(()=>{width!==0&&shiny?shinyTranslate.value=Reanimated.withRepeat(Reanimated.withSequence(Reanimated.withTiming(-width,{duration:0}),Reanimated.withDelay(randomness,Reanimated.withTiming(width,{duration:800,easing:Reanimated.Easing.inOut(Reanimated.Easing.cubic)}))),0):shinyTranslate.value=500},[shiny,width]),import_common5.React.createElement(import_common5.ReactNative.View,{style:[styles2.main,style],onLayout:layout=>{setWidth(layout.nativeEvent.layout.width*.5+4)}},shiny&&width!==0&&import_common5.React.createElement(Reanimated.default.View,{style:[styles2.shiner,{transform:[{rotate:"-22deg"},{translateX:shinyTranslate}]}]}),import_common5.React.createElement(Text,{variant:"text-xxs/bold",color:"STATUS_DANGER_TEXT",align:"center",style:{textTransform:"uppercase"}},children))}init_define_DEFAULT_LANG();init_define_DEFAULT_LANG();var import_common7=__toESM(require_common(),1),import_patcher=__toESM(require_patcher(),1),import_components=__toESM(require_components(),1),import_utils=__toESM(require_utils(),1);init_define_DEFAULT_LANG();var import_metro5=__toESM(require_metro(),1),import_common6=__toESM(require_common(),1),{intl,t:intlMap}=(0,import_metro5.findByProps)("intl")??{},{runtimeHashMessageKey}=(0,import_metro5.findByProps)("runtimeHashMessageKey")??{},isUsingi18n=!!import_common6.i18n.Messages.DISCORD||!intl||!intlMap||!runtimeHashMessageKey,_messages={},intlProxy=Object.freeze(new Proxy(_messages,{get(trg,prop,receiv){var key=prop.toString();if(key in _messages)return Reflect.get(trg,key,receiv);if(isUsingi18n)return _messages[key]=import_common6.i18n.Messages[key];var hash=runtimeHashMessageKey(key);try{return _messages[key]=intl.string(intlMap[hash])}catch(e){return console.warn(`intlProxy: Failed to get intl message for key: ${key} (${hash})`,e),_messages[key]=""}}})),_format={},intlFormat=Object.freeze(new Proxy(_format,{get(trg,prop,receiv){var key=prop.toString();if(key in _format)return Reflect.get(trg,key,receiv);if(isUsingi18n)return _format[key]=typeof import_common6.i18n.Messages[key]=="string"?()=>import_common6.i18n.Messages[key]:import_common6.i18n.Messages[key].format;var hash=runtimeHashMessageKey(key);try{return _format[key]=values=>intl.format(intlMap[hash],values)}catch(e){return console.warn(`intlFormat: Failed to get intl format message for key: ${key} (${hash})`,e),_format[key]=()=>""}}})),intlProxy_default=intlProxy;var{FormSection,FormRow}=import_components.Forms;function Section({tabs}){var navigation=import_common7.NavigationNative.useNavigation();return React.createElement(FormRow,{label:tabs.title(),leading:React.createElement(FormRow.Icon,{source:tabs.icon}),trailing:React.createElement(React.Fragment,null,tabs.trailing?tabs.trailing:null,React.createElement(FormRow.Arrow,null)),onPress:()=>{var Component=tabs.page;navigation.navigate("BUNNY_CUSTOM_PAGE",{title:tabs.title(),render:()=>React.createElement(Component,null)})}})}function patchPanelUI(tabs,patches){var{bunny:bunny2}=window;patches.push((0,import_patcher.after)("default",bunny2.metro.findByNameLazy("UserSettingsOverviewWrapper",!1),(_,ret)=>{var UserSettingsOverview=(0,import_utils.findInReactTree)(ret.props.children,n=>n.type?.name==="UserSettingsOverview");patches.push((0,import_patcher.after)("render",UserSettingsOverview.type.prototype,(_args,res)=>{var titles=[intlProxy_default.BILLING_SETTINGS,intlProxy_default.PREMIUM_SETTINGS],sections=(0,import_utils.findInReactTree)(res.props.children,n=>n?.children?.[1]?.type===FormSection)?.children;if(sections){var index=sections.findIndex(c=>titles.includes(c?.props.label));sections.splice(-~index||4,0,React.createElement(Section,{tabs}))}}))},!0))}init_define_DEFAULT_LANG();var import_metro6=__toESM(require_metro(),1),import_common8=__toESM(require_common(),1),import_patcher2=__toESM(require_patcher(),1),import_utils2=__toESM(require_utils(),1),{bunny}=window,{TableRowIcon}=(0,import_metro6.findByProps)("TableRowIcon"),tabsNavigationRef=bunny.metro.findByPropsLazy("getRootNavigationRef"),settingConstants=bunny.metro.findByPropsLazy("SETTING_RENDERER_CONFIG"),SettingsOverviewScreen=bunny.metro.findByNameLazy("SettingsOverviewScreen",!1);function patchTabsUI(tabs,patches){var row={[tabs.key]:{type:"pressable",title:tabs.title,icon:tabs.icon,IconComponent:tabs.icon&&(()=>import_common8.React.createElement(TableRowIcon,{source:tabs.icon})),usePredicate:tabs.predicate,useTrailing:tabs.trailing,onPress:()=>{var navigation=tabsNavigationRef.getRootNavigationRef(),Component=tabs.page;navigation.navigate("BUNNY_CUSTOM_PAGE",{title:tabs.title(),render:()=>import_common8.React.createElement(Component,null)})},withArrow:!0}},rendererConfigValue=settingConstants.SETTING_RENDERER_CONFIG;Object.defineProperty(settingConstants,"SETTING_RENDERER_CONFIG",{enumerable:!0,configurable:!0,get:()=>({...rendererConfigValue,...row}),set:v=>rendererConfigValue=v});var firstRender=Symbol("pinToSettings meow meow");patches.push((0,import_patcher2.after)("default",SettingsOverviewScreen,(args,ret)=>{if(!args[0][firstRender]){args[0][firstRender]=!0;var{sections}=(0,import_utils2.findInReactTree)(ret,i=>i.props?.sections).props,section=sections?.find(x=>["Bunny","Revenge"].some(mod=>x.label===mod&&x.title===mod));section?.settings&&(section.settings=[...section.settings,tabs.key])}}))}function patchSettingsPin(tabs){var patches=new Array,disabled=!1,realPredicate=tabs.predicate??(()=>!0);return tabs.predicate=()=>disabled?!1:realPredicate(),patchPanelUI(tabs,patches),patchTabsUI(tabs,patches),patches.push(()=>disabled=!0),()=>{for(var x of patches)x()}}init_define_DEFAULT_LANG();var import_common15=__toESM(require_common(),1),import_assets5=__toESM(require_assets(),1),import_toasts4=__toESM(require_toasts(),1),import_utils5=__toESM(require_utils(),1),import_fuzzysort=__toESM(require_fuzzysort(),1);init_define_DEFAULT_LANG();var import_metro7=__toESM(require_metro(),1),import_common9=__toESM(require_common(),1),import_toasts2=__toESM(require_toasts(),1),NotFound=(prop,isFunction)=>()=>{var trigger=()=>{(0,import_toasts2.showToast)(`${prop} not found! Search for PNF in Debug Logs!`),console.warn(`!! PNF ERROR !!
Missing the redesign ${isFunction?"function":"component"}: ${prop}. Please bug @nexpid about this on Discord!`)};return isFunction?trigger():import_common9.React.useEffect(trigger,[]),null},findProp=(...props)=>(0,import_metro7.findByProps)(...props)?.[props[0]],findPropPolyfill=(isFunction,...props)=>findProp(...props)??NotFound(props[0],isFunction),Button=findPropPolyfill(!1,"Button"),RowButton=findPropPolyfill(!1,"RowButton"),FloatingActionButton=findPropPolyfill(!1,"FloatingActionButton"),PressableScale=findPropPolyfill(!1,"PressableScale"),IconButton=findPropPolyfill(!1,"IconButton"),ContextMenu=findPropPolyfill(!1,"ContextMenu"),_Slider=findPropPolyfill(!1,"Slider");var TextInput=findPropPolyfill(!1,"TextInput"),Tabs=findPropPolyfill(!1,"Tabs"),SegmentedControlPages=findPropPolyfill(!1,"SegmentedControlPages"),Card=findPropPolyfill(!1,"Card"),Stack=findPropPolyfill(!1,"Stack"),useSegmentedControlState=findPropPolyfill(!0,"useSegmentedControlState");init_define_DEFAULT_LANG();var import_common10=__toESM(require_common(),1);function managePage(options,navigation,...deps){navigation||(navigation=import_common10.NavigationNative.useNavigation()),import_common10.React.useEffect(()=>{navigation.setOptions(options)},[navigation,...deps])}init_define_DEFAULT_LANG();var constants_default2={proxyUrl:"https://bn-plugins.github.io/vd-proxy/",customLinks:{"vendetta.nexpid.xyz":path=>`${constants_default.github.url}tree/main/plugins/${path.join("/")}`,"mugman.catvibers.me":path=>`https://github.com/mugman174/${path[0]}/tree/master/plugins/${path.slice(1).join("/")}`,"plugins.obamabot.me":path=>`https://github.com/WolfPlugs/${path[0]}/tree/master/${path.slice(1).join("/")}`}};init_define_DEFAULT_LANG();var import_utils3=__toESM(require_utils(),1);init_define_DEFAULT_LANG();var import_plugins=__toESM(require_plugins(),1);function properLink(id){return id.endsWith("/")?id:`${id}/`}var linkMatches={origin:/^([^/]+)\/(.*)/,multiplePluginGitio:/^(.*?)(?=\.)\.github\.io\/(.*?)(?=\/)\/(.*)/,singlePluginGitio:/^(.*?)(?=\.)\.github\.io\/(.*)/,githubReleases:/^github\.com\/(.*?)(?=\/)\/(.*?)(?=\/)\/releases/};function matchGithubLink(link){var multi=link.match(linkMatches.multiplePluginGitio);if(multi?.[0])return`https://github.com/${multi[1]}/${multi[2]}/tree/master/plugins/${multi[3]}`;var single=link.match(linkMatches.singlePluginGitio)??link.match(linkMatches.githubReleases);if(single?.[0])return`https://github.com/${single[1]}/${single[2]}`;var[_,origin,path]=link.match(linkMatches.origin);if(constants_default2.customLinks[origin])return constants_default2.customLinks[origin](path.split("/"))}var emitterSymbol=Symbol.for("vendetta.storage.emitter");function asyncGeneratorStep2(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator2(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep2(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep2(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var lastPluginCache=new Array;function getChanges(){return!lastPluginCache[0]||!vstorage.pluginCache[0]?[]:lastPluginCache.filter(id=>!vstorage.pluginCache.includes(id))}function updateChanges(){vstorage.pluginCache=lastPluginCache}function run(data){return _run.apply(this,arguments)}function _run(){return _run=_async_to_generator2(function*(data){var res=data??(yield(yield(0,import_utils3.safeFetch)(`${constants_default2.proxyUrl}plugins.json`,{cache:"no-store"})).json());lastPluginCache=res.map(x=>typeof x=="string"?properLink(x):properLink(x.vendetta.original))}),_run.apply(this,arguments)}function initThing(){var interval=setInterval(run,36e5);return run(),()=>{clearInterval(interval)}}init_define_DEFAULT_LANG();var import_common13=__toESM(require_common(),1),import_plugins2=__toESM(require_plugins(),1),import_assets3=__toESM(require_assets(),1),import_toasts3=__toESM(require_toasts(),1);init_define_DEFAULT_LANG();var import_common12=__toESM(require_common(),1),import_ui3=__toESM(require_ui(),1),import_assets2=__toESM(require_assets(),1),import_components2=__toESM(require_components(),1);init_define_DEFAULT_LANG();var import_metro8=__toESM(require_metro(),1),import_common11=__toESM(require_common(),1),import_utils4=__toESM(require_utils(),1),_ActionSheet=(0,import_metro8.findByProps)("ActionSheet")?.ActionSheet??(0,import_metro8.find)(x=>x.render?.name==="ActionSheet"),{ActionSheetTitleHeader,ActionSheetCloseButton}=(0,import_metro8.findByProps)("ActionSheetTitleHeader","ActionSheetCloseButton"),LazyActionSheet=(0,import_metro8.findByProps)("openLazy","hideActionSheet"),{openLazy,hideActionSheet}=LazyActionSheet,{showSimpleActionSheet}=(0,import_metro8.findByProps)("showSimpleActionSheet"),ActionSheet=props=>React.createElement(_ActionSheet,null,React.createElement(ActionSheetTitleHeader,{title:props.title,trailing:React.createElement(ActionSheetCloseButton,{onPress:props.onClose??(()=>{hideActionSheet()})})}),React.createElement(import_common11.ReactNative.View,(0,import_utils4.without)(props,"title","onClose")));ActionSheet.open=(sheet,props)=>{openLazy(new Promise(res=>{res({default:sheet})}),"ActionSheet",props)};var{FormRow:FormRow2}=import_components2.Forms,styles=import_common12.stylesheet.createThemedStyleSheet({card:{padding:16,borderRadius:16,borderColor:import_ui3.semanticColors.BORDER_FAINT,borderWidth:1,backgroundColor:import_ui3.semanticColors.CARD_PRIMARY_BG},content:{flexDirection:"row",alignItems:"center",flex:1},title:{flexDirection:"row",alignItems:"center",gap:6,flexShrink:1},pluginIcon:{tintColor:import_ui3.semanticColors.LOGO_PRIMARY,width:18,height:18},actions:{flexDirection:"row-reverse",alignItems:"center",gap:5}});function Card2(props){var baseColor=styles.card.backgroundColor,highlightColor=lerp(baseColor,import_ui3.rawColors.BRAND_500,.08),color=Reanimated.useSharedValue(baseColor);return import_common12.React.useEffect(()=>{color.value=baseColor,props.highlight&&(color.value=Reanimated.withSequence(Reanimated.withTiming(highlightColor,{duration:500,easing:Reanimated.Easing.cubic}),Reanimated.withTiming(baseColor,{duration:500,easing:Reanimated.Easing.cubic})))},[props.highlight]),import_common12.React.createElement(Reanimated.default.View,{style:[styles.card,{backgroundColor:color},props.disabled&&{opacity:.5}]},import_common12.React.createElement(Stack,{spacing:16},import_common12.React.createElement(import_common12.ReactNative.View,{style:styles.content},import_common12.React.createElement(Stack,{spacing:0,style:{flex:1}},import_common12.React.createElement(import_common12.ReactNative.View,{style:styles.title},props.headerIcon&&import_common12.React.createElement(import_common12.ReactNative.Image,{style:styles.pluginIcon,resizeMode:"cover",source:props.headerIcon}),import_common12.React.createElement(Text,{variant:"heading-lg/semibold",color:"HEADER_PRIMARY",lineClamp:1,ellipsis:"tail",style:{flexShrink:1}},props.headerLabel),props.headerSuffix),props.headerSublabel&&import_common12.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_MUTED"},props.headerSublabel)),import_common12.React.createElement(import_common12.ReactNative.View,null,import_common12.React.createElement(Stack,{spacing:5,direction:"horizontal"},props.actions?.map(({icon,onPress,isDestructive,loading,disabled})=>import_common12.React.createElement(IconButton,{onPress,disabled,loading,size:"sm",variant:isDestructive?"destructive":"secondary",icon:(0,import_assets2.getAssetIDByName)(icon)})),props.overflowActions&&import_common12.React.createElement(IconButton,{onPress:()=>{showSimpleActionSheet({key:"CardOverflow",header:{title:props.overflowTitle,icon:props.headerIcon&&props.headerIcon&&import_common12.React.createElement(FormRow2.Icon,{source:props.headerIcon}),onClose:hideActionSheet},options:props.overflowActions?.map(i=>({...i,icon:(0,import_assets2.getAssetIDByName)(i.icon)}))})},size:"sm",variant:"secondary",icon:(0,import_assets2.getAssetIDByName)("CircleInformationIcon-primary")})))),props.descriptionLabel&&import_common12.React.createElement(Text,{variant:"text-md/medium",color:"TEXT_NORMAL"},props.descriptionLabel)))}function asyncGeneratorStep3(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator3(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep3(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep3(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function PluginCard({item,changes}){var{proxiedLink,githubLink}=import_common13.React.useMemo(()=>{var proxiedLink2=`${constants_default2.proxyUrl}${item.vendetta.original}`;return import_plugins2.plugins[`https://${item.vendetta.original}`]?proxiedLink2=`https://${item.vendetta.original}`:import_plugins2.plugins[`http://${item.vendetta.original}`]&&(proxiedLink2=`http://${item.vendetta.original}`),{proxiedLink:properLink(proxiedLink2),githubLink:matchGithubLink(item.vendetta.original)}},[item]),isNew=import_common13.React.useMemo(()=>changes.includes(properLink(item.vendetta.original)),[changes,item]),isDisabled=!!item.bunny?.disabled,[status,setStatus]=import_common13.React.useState({hasPlugin:!!import_plugins2.plugins[proxiedLink],pending:!1});import_common13.React.useEffect(()=>{setStatus({hasPlugin:!!import_plugins2.plugins[proxiedLink],pending:!1})},[item]);var installFunction=function(){var _ref=_async_to_generator3(function*(){if(!(status.pending||isDisabled)){setStatus({hasPlugin:!!import_plugins2.plugins[proxiedLink],pending:!0});var shouldRemove=!!import_plugins2.plugins[proxiedLink];try{shouldRemove?(0,import_plugins2.removePlugin)(proxiedLink):yield(0,import_plugins2.installPlugin)(proxiedLink)}catch{(0,import_toasts3.showToast)(lang.format(shouldRemove?"toast.plugin.delete.fail":"toast.plugin.install.fail",{plugin:item.name}),(0,import_assets3.getAssetIDByName)("CircleXIcon-primary"))}(0,import_toasts3.showToast)(lang.format(shouldRemove?"toast.plugin.delete.success":"toast.plugin.install.success",{plugin:item.name}),(0,import_assets3.getAssetIDByName)(shouldRemove?"TrashIcon":"DownloadIcon")),setStatus({hasPlugin:!!import_plugins2.plugins[proxiedLink],pending:!1})}});return function(){return _ref.apply(this,arguments)}}();return import_common13.React.createElement(Card2,{headerLabel:item.name,headerSuffix:isNew&&import_common13.React.createElement(TextBadge,{variant:"primary",style:{marginLeft:4},shiny:!0},lang.format("browser.plugin.new",{})),highlight:!!isNew,headerSublabel:item.authors[0]&&`by ${item.authors.map(x=>x.name).join(", ")}`,headerIcon:(0,import_assets3.getAssetIDByName)(item.vendetta.icon??""),descriptionLabel:item.description,overflowTitle:item.name,actions:isDisabled?[]:[{icon:status.hasPlugin?"TrashIcon":"DownloadIcon",disabled:status.pending,loading:status.pending,isDestructive:status.hasPlugin,onPress:installFunction}],overflowActions:[...isDisabled?[]:[{label:lang.format(`sheet.plugin.${status.hasPlugin?"un":""}install`,{}),icon:status.hasPlugin?"TrashIcon":"DownloadIcon",isDestructive:status.hasPlugin,onPress:installFunction}],{label:lang.format("sheet.plugin.copy_plugin_link",{}),icon:"CopyIcon",onPress:()=>{(0,import_toasts3.showToast)(lang.format("toast.copy_link",{}),(0,import_assets3.getAssetIDByName)("CopyIcon")),import_common13.clipboard.setString(proxiedLink)}},{label:lang.format("sheet.plugin.copy_unproxied_link",{}),icon:"CopyIcon",onPress:()=>{(0,import_toasts3.showToast)(lang.format("toast.copy_link",{}),(0,import_assets3.getAssetIDByName)("CopyIcon")),import_common13.clipboard.setString(`https://${item.vendetta.original}`)}},...githubLink?[{label:lang.format("sheet.plugin.open_github",{}),icon:"img_account_sync_github_white",onPress:_async_to_generator3(function*(){if((0,import_toasts3.showToast)(lang.format("toast.open_link",{}),(0,import_assets3.getAssetIDByName)("LinkExternalSmallIcon")),yield import_common13.ReactNative.Linking.canOpenURL("https://github.com")){var{url:_$url}=yield fetch(githubLink,{redirect:"follow"});import_common13.ReactNative.Linking.openURL(_$url)}else import_common13.url.openURL(githubLink)})}]:[]],disabled:isDisabled})}init_define_DEFAULT_LANG();var import_common14=__toESM(require_common(),1),import_ui4=__toESM(require_ui(),1),import_assets4=__toESM(require_assets(),1),import_components3=__toESM(require_components(),1);init_define_DEFAULT_LANG();var SortDateNewestIcon_default={uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAY2SURBVHhe7ZtbaB1FHMbnP6dpY7y1tjXVtpaWViPxgnerPqioBLW12NaIJW+i1gdBIkWfxUDBJ0EUHxRFxDtaUbEIFnzxWhHvtqGIra2gbaQ1bRN3/37fXtKTk5MzZ8/JOdk92R987Ozsye7stzP/nZmdyNp1d5ussu2dV6NU48i0Qc3ARtucScgNcpAb5CA3yEFukIPcIAe5QQ5ygxzMJINmQ+dCGyIxzbyKJDLI9/12yHnSpETnbY92G8XZ0IAa8wbFdJRXkaoMEpFZ2HSLlT4rsh5p54kTsBTn7cU1NiG9ys62EmZPOSvV6HqenGKaeTxQiaoMUlWeaIsY2Qq3tiJ9L/LmBgfrAOeYh00/zjsAg55A+lHvuDeV5hczF9eJkjQpSDvvwWkQmxRu5DIkeyDe0FJoDXQOVC/LoXsgmtIJrYN4rdTgNGjo0NAoni7jTluYE4CWJoniVzlwjgI2c8K9gALyOqL0VFOuvM57KJzXdUGUPIEvfqfxzQokl3V0dLB5XQVdDcU3cwTaA/ECyyDWqqRirbkCuhmKzzsKDUL/QkvYBLUgKmqGebBOuqGNYXKMN6EfwmR5xs0HqcpCbG4S0esZd/A0T8c+aw7z2QRix49Df0D/QHHcI3hBBIRxcDzFeUx70BkQzYrPy7w/IykC6d+IFbvwR58Y3+4Q6//FH9XIXdBrYXKMXuj1MFmeEwapt1yN7Ue934TS1x2ApxIYdAB2vQz/nsIL9fcoOyk1GRQ8OfWkE+Y8hue6OW3mEJRpETYPIiL0qxfU5qbBYFuQgt6KmtOH6uwMWtNFGLxlI0rIt2nTsJ7681CF2YFqdE+2bkTMQhXTA50ZZTUci3fEAjRyvk2yQBvK2o1Q3jyDEIFQdbVpF6wfxZuVZW4ONGgI7fvHaD/1oJkNotSHot2GI2vu6J0Dg3rQ77kPW9YkPzyUKthvEpTxN5TxeVuw233P/y88VDW194Os9do8zy7GxVMdqGHQsLW6X9Wyx52UOjuKrU/tHcWcyRkzaN/efWznHDSmUhiXTflMZjXETexyqA86DUprkObDPACxSeyEklJbDMJbjNMOLyFAX8f9IDedsGyjCNQfYPswyrs3yK2e2mIQLrQIugFpVmVW47SK0y4dKOvFUKOmZSfAastZvSwFa5aVHxGaAi9WOrGVBZpW5izVnGnBZRDfaEehwxDniWNxTpp5nHptaSoZxO7821B3wQbfrzgnzbEa1VkQnY/tLdAXUMtSySDWjq+hPZ4vnExnzeHXhUCeCg38JlLL4mpirn4Rj6e571Q3eZB2kBvkIDfIgcsg18CVx9M4uJ0yXAZxDBQTB+TiwByPk1qWSgZx8MoFC/xQx8UL15aIx9ZCl0AtSyWDOHq+EXoaeg56pkTMexy6CGpZXE2Mk/hcBkMTuE6mWBdCSyDOBqSBU6BLoTsh1m5O/iWF5+iCeB6uB5jlMihL8KFxQuwt6EOIq9WSLMTgb2+HtkEfQ49AK1rJINbyeFEmb/ZFqFqT+Bv+9hVoFRSsnYSuaSWDRqJtMS9ALpNic/jb0mFTOw0qzcwqX0HfhslxVDKp2JxSPod2WqPo6GVoTlFZVpZ5Iruhh6Cfg73x0AB2SUphXjlzeI4t0PcW7hzFNYeC7GxwDOU9FqWLYR7npu6HfmJGCbdF22LK5dGczRDPNWzFmoNG9DseyQAeyjporE62mDM26QGoXE1y8StEcz6DgocAg/SgGHmfOxlgGAFzh2nzuQp2MmKTeKO84Wrhb1n7xswh1nh2RH3hx7OPwqz0oqrbfV/elZGCa+kLb5A3yhuupiaVNYcEC8lFzBAu/ouILEYeF4anpXcccwTB+T04NGBt1Yu9aCI/VXNKeDW0ACoHDWSTnGAOKVlIrl0waQNSq1WFQ4yTYR67As1+z7Hr4cOUw4g3u0XlU9Yca3VXeDgRHC5dCT0Lnc+MIuKAXNYcMmF9kBo9FaacpZ7MRzFPigyaDmjQMAOyiO43vuVHg1qJTXoSihesfglxOMF4VdYcMpMWUNGklWgKwX8ToYryiw37TpOaQ2aSQTFxi6hqJrSVxmLVkmiaeCYalIjcIAe5QQ5ygxzkBjnIDXKQG+QgN8hBpuejGz8KMOZ/ANGgSLq0NPIAAAAASUVORK5CYII=",width:72,height:72,file:"PluginBrowser/SortDateNewestIcon.png",allowIconTheming:!0};init_define_DEFAULT_LANG();var SortDateOldestIcon_default={uri:"data:image/png;base64,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",width:72,height:72,file:"PluginBrowser/SortDateOldestIcon.png",allowIconTheming:!0};init_define_DEFAULT_LANG();var SortNameAZIcon_default={uri:"data:image/png;base64,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",width:72,height:72,file:"PluginBrowser/SortNameAZIcon.png",allowIconTheming:!0};init_define_DEFAULT_LANG();var SortNameZAIcon_default={uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAZHSURBVHhe7ZttiFRVHMbPubOZWpkKBZZE9P4uvZd9EErD2J3ZWWuccctCy4qK3rSgCKSgqKjM+mBRlNEaM5bNmxK0EUQYfamgLCStDxFl9cEt1F12d+7p+d/7vzp3nPW+zu7c9f7g4T7/c8eZuc+ee+65545StDGpdI5d+FRKeXZHRuNtzBjEATkQB+RAHJADcUAOxAE5EAfkQByQA6FOFJPd2feklLdzaVCT+sXbipt3cOmJSTdRbAyH0HTtLratho4l9DMitDdE77mTrQ0p1Sq2rWIqdJESYjmJPLeFQmgB4VxtGhD2TE+mc0u5CBsK4iroHXz+RhJ5bgslpFAC6lyy7Gx0lWu5FPhL2pBKteI0s8J5A7qSGhjyb0LXQIFDCiWghK43BKDeZmMi5aKenttO5ioMrHAoiPOpoYHzoA1Q4JDCOsXu561Bh+x4GpvtZmUyqo/cxzYodMB04BQOBTEWtC9wTwocUKon14kuchyXQilRKxY3/a4L9Qw3mUgRxmDtNhyLc6BAIQXvQbr9wHHVWkvbraXCp0YDI4U8JdmTu55LP9AB0mlFpw4duFsChRQooFRq5Qk48m4uDQb3H/MqW+pOm9kZSF3cy9YrVjg0ILvpOY1QSL7GpEAB6eKAbXDG6fVLf3/ffi5pMHqenYkUGXZesMKhXtBsQN7G23qatVkDN73XdGpwQ6CANE08zNZASvECW4PKlvx3SimdS4NUKvcgW7ecBb0GNes5K6CKaW1QG+1rhN7jRYgmk67wHVA63Xs5NqeZlQnub95iW8963hooTd3D1i1XQPNMa4MCKEEDRmWH2mhfs5Cuhi4zrTO+A6qpmv2yrdQX7GzgA9axNcBgfUE6nfUyyE7hbT1HCseiPqTGuesQbx3xHRBuTFeyNcA0f8OCBQs6GjUwsOdP7P7NfJVJTYk1bN3wPbTbtMZB3wE5hWNhhdQL7YL2Qi9DX0Gu8BUQ7q2WsT2IkjJ/4qw5I82E3bZTEeF6mRPRUkkWuhm6CXIbjgW9diuUghZCL0G/Qq7w2YPUY2x8k0xnl7B1Yh/0LfQx9DX0H+QVeo+dEL3PHmgUcoXngDo7M6diHLmUywDI1WzaGs8BaR2Jh9gaYO6zzxig3agOjFnzu7q6XM9HJgp8T2+k0jnbFQEBramW8zTwOdL4b4Wu1lYqBfs9Wx0ul1xpralg2oPQmGWbxTfSkiXXrnT2RraH0EUfO2eUsr1WaeIRtm2Lp4Aw9jzO1mJ7tZr/i70jSpPvsjXA+83sTC+jqX/b4jqgTCaTwPl4A5cW7nsPqBbzn2NDV5GDJJTyMicad1wHNDSsHXYgM47veJ+te5Sy9SJ0Iz83sOOG50F6PIncIH00EgfkQByQA3FADsQBOeDrKrZ48eJjp0yd6XrRqREl1EC1VJjF5ZgcvVcxusGNCBMSELrt5A9IKfU3esI/cHshWsQ6gDv74canGM1QUtIqYyRo+Uw6mc49gQ95jksTXXRVKvlmz65sTPoxqHNJ7xmHhSPU627CaRdaGlCiVrM/ClJqV6VU8PrgcEJpWUDJdHa9kHIulwa6FLbl2ijQkoC6u7PzpZC2noIBfP3WUuETLiNDSwJSQtKzqzrUzmo5b3uOHxVCDwhXrT5cG0/i0kAqcTfbyBFqQPQwEFetW7k0wLxoXblc+JLLyBFqQOgptuVUJcRP1XLhUS4jSWgBofd8iKvWDC5NasYkLtKEEhBmvKtw1bqFSwNctZ6tVvM/chlZAgeUyWRmIw76BdghlNiBq9ZTXEWawAENjWgbMfrYfhiZ0BKHP4GNKIECwrjzAE6tJJeMWl0sbqIfTU0KfAdEP6NDOLZTSwn1De61XuFyvGi2vOK45OIW3wHVzHBsyyUjQ/9ex3bS4Gs9KJVaukJoGv23o3oG0YUGMfepoS/RL7iQoRxFG7ZiVFptCrMlIIW2vFz+4AfyY+FyPWghem4/erNRwMPJRbCfGQ1jMBHrQdPwzWZL3GZIKedAc/GVT0d9JrbnIpILoUvwmnmGwmM3AtlCqZPIUxvtCIMwA5oo/oCexB8hQyLPbaHgKyApE9PYtgPD0M/QRyzy1BYK5onbprgcg3wR/7ojJOKAHIgDciAOyIG2DaiVA7QX2jKgdgmHiE+xmCAI8T8q98Faf7iWggAAAABJRU5ErkJggg==",width:72,height:72,file:"PluginBrowser/SortNameZAIcon.png",allowIconTheming:!0};function SearchIcon(){return import_common14.React.createElement(import_common14.ReactNative.Image,{style:{width:16,height:16,tintColor:resolveSemanticColor(import_ui4.semanticColors.INTERACTIVE_NORMAL)},source:(0,import_assets4.getAssetIDByName)("search")})}function Search({onChangeText,filterSetSort,inputRef}){var[query,setQuery]=import_common14.React.useState(""),[focused,setFocused]=import_common14.React.useState(!1),onChange=value=>{setQuery(value),onChangeText(value)};return import_common14.React.createElement(import_components3.ErrorBoundary,null,import_common14.React.createElement(import_common14.ReactNative.View,{style:{flexDirection:"row",justifyContent:"center",gap:8,marginBottom:5}},import_common14.React.createElement(import_common14.ReactNative.View,{style:{flexGrow:1}},import_common14.React.createElement(TextInput,{grow:!0,isClearable:!0,leadingIcon:SearchIcon,placeholder:intlProxy_default.SEARCH,onChange,returnKeyType:"search",size:"md",autoCapitalize:"none",autoCorrect:!1,value:query,isRound:!0,onFocus:()=>setFocused(!0),onBlur:()=>setFocused(!1),ref:inputRef})),!focused&&!query&&import_common14.React.createElement(ContextMenu,{title:lang.format("sheet.sort.title",{}),items:Object.values(Sort).map(value=>({label:lang.format(value,{}),variant:"default",action:()=>filterSetSort.current(value),iconSource:{"sheet.sort.date_newest":SortDateNewestIcon_default,"sheet.sort.date_oldest":SortDateOldestIcon_default,"sheet.sort.name_az":SortNameAZIcon_default,"sheet.sort.name_za":SortNameZAIcon_default}[value]}))},props=>import_common14.React.createElement(IconButton,{icon:(0,import_assets4.getAssetIDByName)("FiltersHorizontalIcon"),size:"md",variant:"tertiary",...props}))))}var Sort=function(Sort2){return Sort2.DateNewest="sheet.sort.date_newest",Sort2.DateOldest="sheet.sort.date_oldest",Sort2.NameAZ="sheet.sort.name_az",Sort2.NameZA="sheet.sort.name_za",Sort2}({}),AnimatedIconButton=Reanimated.default.createAnimatedComponent(IconButton),PluginBrowserPage_default=()=>{var[parsed,setParsed]=import_common15.React.useState(null),[search,setSearch]=import_common15.React.useState(""),[sort,setSort]=import_common15.React.useState("sheet.sort.date_newest"),currentSetSort=import_common15.React.useRef(setSort);currentSetSort.current=setSort;var changes=import_common15.React.useRef(getChanges()),flashlistRef=import_common15.React.useRef(),inputRef=import_common15.React.useRef(),[scrolledPast,setScrolledPast]=import_common15.React.useState(!1),sortedData=import_common15.React.useMemo(()=>{if(!parsed)return[];if(search)return import_fuzzysort.default.go(search,parsed,{keys:["vendetta.original","name","description","authors.0.name","authors.1.name","authors.2.name"]}).map(x=>x.obj);var sorted=parsed.slice();return["sheet.sort.name_az","sheet.sort.name_za"].includes(sort)&&(sorted=sorted.sort((a,b)=>a.name<b.name?-1:a.name>b.name?1:0)),["sheet.sort.name_za","sheet.sort.date_newest"].includes(sort)&&sorted.reverse(),sorted},[sort,parsed,search]);return import_common15.React.useEffect(()=>()=>{updateChanges()},[]),import_common15.React.useEffect(()=>{parsed||(0,import_utils5.safeFetch)(`${constants_default2.proxyUrl}plugins-full.json`,{cache:"no-store"}).then(x=>x.json().then(x2=>x2.map(plug=>({...plug,vendetta:{...plug.vendetta,original:properLink(plug.vendetta.original)}}))).then(x2=>{run(x2),changes.current=getChanges(),setParsed(x2)}).catch(()=>{(0,import_toasts4.showToast)(lang.format("toast.data.fail_parse",{}),(0,import_assets5.getAssetIDByName)("CircleXIcon-primary"))})).catch(()=>{(0,import_toasts4.showToast)(lang.format("toast.data.fail_fetch",{}),(0,import_assets5.getAssetIDByName)("CircleXIcon-primary"))})},[parsed]),managePage({title:lang.format("plugin.name",{}),headerRight:()=>scrolledPast?import_common15.React.createElement(AnimatedIconButton,{icon:(0,import_assets5.getAssetIDByName)("ArrowSmallUpIcon"),variant:"secondary",size:"sm",onPress:()=>(flashlistRef.current?.scrollToOffset({animated:!0,offset:0}),inputRef.current?.focus()),entering:Reanimated.FadeIn.duration(200),exiting:Reanimated.FadeOut.duration(200)}):null},null,[scrolledPast]),import_common15.React.createElement(FlashList,{ListHeaderComponent:import_common15.React.createElement(Search,{onChangeText:setSearch,filterSetSort:currentSetSort,inputRef}),ItemSeparatorComponent:()=>import_common15.React.createElement(import_common15.ReactNative.View,{style:{height:8}}),contentContainerStyle:{paddingHorizontal:10},data:sortedData,estimatedItemSize:113,renderItem:({item})=>import_common15.React.createElement(PluginCard,{item,changes:changes.current}),removeClippedSubviews:!0,refreshControl:import_common15.React.createElement(import_common15.ReactNative.RefreshControl,{refreshing:parsed===null,onRefresh:()=>parsed!==null&&setParsed(null)}),onScroll:e=>setScrolledPast(e.nativeEvent.contentOffset.y>=45)})};var patcher_default=()=>{var patches=new Array;return patches.push(patchSettingsPin({key:import_vendetta.plugin.manifest.name,icon:(0,import_assets6.getAssetIDByName)(import_plugin.manifest.vendetta?.icon??""),trailing:()=>{var changes=import_common16.React.useRef(Object.keys(getChanges()).length).current;if(changes>0)return import_common16.React.createElement(TextBadge,{variant:"danger"},changes)},title:()=>lang.format("plugin.name",{}),predicate:()=>!0,page:PluginBrowserPage_default})),patches.push(initThing()),patches.push(lang.unload),()=>{for(var x of patches)x()}};var vstorage=import_plugin2.storage,lang=new Lang("plugin_browser"),unpatch,src_default={onLoad:()=>{vstorage.pluginCache??=[],unpatch=patcher_default()},onUnload:()=>unpatch?.()};return __toCommonJS(src_exports);})();
return $;})();
