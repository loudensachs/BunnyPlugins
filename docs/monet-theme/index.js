(()=>{
"use strict";var $=(()=>{var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(var keys=__getOwnPropNames(from),i=0,n=keys.length,key;i<n;i++)key=keys[i],!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:(k=>from[k]).bind(null,key),enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var require_metro=__commonJS({"vendetta:@vendetta/metro"(exports,module){module.exports=vendetta.metro}});var require_plugin=__commonJS({"vendetta:@vendetta/plugin"(exports,module){module.exports=vendetta.plugin}});var require_alerts=__commonJS({"vendetta:@vendetta/ui/alerts"(exports,module){module.exports=vendetta.ui.alerts}});var require_assets=__commonJS({"vendetta:@vendetta/ui/assets"(exports,module){module.exports=vendetta.ui.assets}});var require_toasts=__commonJS({"vendetta:@vendetta/ui/toasts"(exports,module){module.exports=vendetta.ui.toasts}});var require_common=__commonJS({"vendetta:@vendetta/metro/common"(exports,module){module.exports=vendetta.metro.common}});var require_vendetta=__commonJS({"vendetta:@vendetta"(exports,module){module.exports=vendetta}});var require_utils=__commonJS({"vendetta:@vendetta/utils"(exports,module){module.exports=vendetta.utils}});var require_debug=__commonJS({"vendetta:@vendetta/debug"(exports,module){module.exports=vendetta.debug}});var require_storage=__commonJS({"vendetta:@vendetta/storage"(exports,module){module.exports=vendetta.storage}});var require_ui=__commonJS({"vendetta:@vendetta/ui"(exports,module){module.exports=vendetta.ui}});var require_components=__commonJS({"vendetta:@vendetta/ui/components"(exports,module){module.exports=vendetta.ui.components}});var require_constants=__commonJS({"vendetta:@vendetta/constants"(exports,module){module.exports=vendetta.constants}});var src_exports={};__export(src_exports,{default:()=>src_default,devPatchesURL:()=>devPatchesURL,getSysColors:()=>getSysColors,hasTheme:()=>hasTheme,hasThemeKey:()=>hasThemeKey,patches:()=>patches,patchesURL:()=>patchesURL,vstorage:()=>vstorage});var import_metro7=__toESM(require_metro(),1),import_plugin=__toESM(require_plugin(),1),import_alerts2=__toESM(require_alerts(),1),import_assets10=__toESM(require_assets(),1),import_toasts10=__toESM(require_toasts(),1);var import_metro=__toESM(require_metro(),1),import_common=__toESM(require_common(),1),import_assets=__toESM(require_assets(),1),import_toasts=__toESM(require_toasts(),1),ThemeStore=(0,import_metro.findByStoreName)("ThemeStore"),{triggerHaptic}=(0,import_metro.findByProps)("triggerHaptic"),colorModule=(0,import_metro.findByProps)("colors","unsafe_rawColors"),colorResolver=colorModule?.internal??colorModule?.meta,{useThemeContext}=(0,import_metro.findByProps)("useThemeContext"),TextStyleSheet=(0,import_metro.findByProps)("TextStyleSheet").TextStyleSheet,Navigator=(0,import_metro.findByProps)("Navigator")?.Navigator,modalCloseButton=(0,import_metro.findByProps)("getHeaderCloseButton")?.getHeaderCloseButton,{popModal,pushModal}=(0,import_metro.findByProps)("popModal","pushModal"),getDiscordTheme=()=>{var{theme}=ThemeStore;return theme.startsWith("vd-theme-")?theme.split("-")[3]:theme};function resolveSemanticColor(color,theme=ThemeStore.theme){return colorResolver?.resolveSemanticColor(theme,color)}var import_vendetta=__toESM(require_vendetta(),1),import_common2=__toESM(require_common(),1),import_assets2=__toESM(require_assets(),1),import_toasts2=__toESM(require_toasts(),1),import_utils=__toESM(require_utils(),1);function parse(json){return JSON.parse(json.replace(/\r/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*(?:.|\n)*?(?=\*\/)\*\//g,""))}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var revalidateTimeout=5e3,refetchTimeout=15*6e3,patchesSymbol=Symbol.for("monettheme.cache.patches"),data={canRefetch:0,patches:null};!Number.isNaN(window[patchesSymbol]?.canRefetch)&&typeof window[patchesSymbol]?.patches=="object"&&(data={canRefetch:window[patchesSymbol].canRefetch,patches:JSON.parse(JSON.stringify(window[patchesSymbol].patches))});window[patchesSymbol]=data;var uponRevalidate=new Set,canRevalidate=0,refetch=function(){var _ref=_async_to_generator(function*(){var patches2=yield(0,import_utils.safeFetch)(vstorage.patches.from==="local"?devPatchesURL:patchesURL(),{cache:"no-store"}).then(x=>x.text().then(text=>{try{return parse(text.replace(/\r/g,""))}catch(err){return(0,import_toasts2.showToast)("Failed to parse color patches!",(0,import_assets2.getAssetIDByName)("CircleXIcon-primary")),import_vendetta.logger.error("usePatches refetch error (parse)",err),null}})).catch(err=>((0,import_toasts2.showToast)("Failed to fetch color patches!",(0,import_assets2.getAssetIDByName)("CircleXIcon-primary")),import_vendetta.logger.error("usePatches refetch error (fetch)",err),null));data.patches=patches2,data.canRefetch=Date.now()+refetchTimeout;for(var fnc of uponRevalidate)fnc(patches2)});return function(){return _ref.apply(this,arguments)}}(),usePatches=()=>{var[patches2,setPatches]=import_common2.React.useState(data.patches),revalFunc=data3=>setPatches(data3);return import_common2.React.useEffect(()=>(uponRevalidate.add(revalFunc),()=>void uponRevalidate.delete(revalFunc))),import_common2.React.useEffect(()=>void((!patches2||data.canRefetch>=Date.now())&&refetch()),[]),{patches:patches2,revalidate:_async_to_generator(function*(){canRevalidate<Date.now()||(canRevalidate=Number.NaN,yield refetch(),canRevalidate=Date.now()+revalidateTimeout)})}};Object.defineProperty(usePatches,"patches",{get:()=>data.patches?data.patches:refetch().then(()=>data.patches)});var usePatches_default=usePatches;var import_vendetta4=__toESM(require_vendetta(),1),import_debug=__toESM(require_debug(),1),import_common17=__toESM(require_common(),1),import_storage4=__toESM(require_storage(),1),import_ui11=__toESM(require_ui(),1),import_alerts=__toESM(require_alerts(),1),import_assets9=__toESM(require_assets(),1),import_components2=__toESM(require_components(),1),import_toasts9=__toESM(require_toasts(),1);var import_common4=__toESM(require_common(),1),import_ui2=__toESM(require_ui(),1);var import_metro2=__toESM(require_metro(),1),import_common3=__toESM(require_common(),1),import_ui=__toESM(require_ui(),1);var{useThemeContext:useThemeContext2}=(0,import_metro2.findByProps)("useThemeContext");function Text({variant,lineClamp,color,align,style,onPress,getChildren,children,liveUpdate,ellipsis}){var themeContext=useThemeContext2(),[_,forceUpdate]=import_common3.React.useReducer(x=>~x,0);return import_common3.React.useEffect(()=>{if(liveUpdate){var nextSecond=()=>Date.now()-new Date().setMilliseconds(1e3),timeout=setTimeout(function update(){forceUpdate(),timeout=setTimeout(update,nextSecond())},nextSecond());return()=>clearTimeout(timeout)}},[]),import_common3.React.createElement(import_common3.ReactNative.Text,{style:[variant&&TextStyleSheet[variant],color?{color:resolveSemanticColor(import_ui.semanticColors[color],themeContext?.theme)}:{},align&&{textAlign:align},style??{}],numberOfLines:lineClamp,onPress,ellipsizeMode:ellipsis},getChildren?.()??children)}function BetterTableRowTitle({title,onPress,icon,padding}){var styles=import_common4.stylesheet.createThemedStyleSheet({androidRipple:{color:import_ui2.semanticColors.ANDROID_RIPPLE,cornerRadius:4},icon:{width:16,height:16,marginTop:1.5,tintColor:import_ui2.semanticColors.TEXT_MUTED}}),UseCompontent=onPress?import_common4.ReactNative.Pressable:import_common4.ReactNative.View;return React.createElement(UseCompontent,{android_ripple:styles.androidRipple,onPress,style:{marginBottom:8,marginHorizontal:padding?16:0,marginTop:padding?8:0,gap:4,flexDirection:"row",alignItems:"center"}},icon&&React.createElement(import_common4.ReactNative.Image,{style:styles.icon,source:icon,resizeMode:"cover"}),React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_MUTED"},title))}function BetterTableRowGroup({title,onTitlePress,icon,children,padding,nearby}){var styles=import_common4.stylesheet.createThemedStyleSheet({main:{backgroundColor:import_ui2.semanticColors.CARD_PRIMARY_BG,borderColor:import_ui2.semanticColors.BORDER_FAINT,borderWidth:1,borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(import_common4.ReactNative.View,{style:{marginHorizontal:16,marginTop:nearby?8:16}},title?typeof title=="string"?React.createElement(BetterTableRowTitle,{title,onPress:onTitlePress,icon}):title:null,React.createElement(import_common4.ReactNative.View,{style:styles.main},padding?React.createElement(import_common4.ReactNative.View,{style:{paddingHorizontal:16,paddingVertical:16}},children):children))}var import_common5=__toESM(require_common(),1);(function(RichText2){function Bold({children,onPress}){return React.createElement(Text,{variant:"text-md/bold",onPress},children)}RichText2.Bold=Bold;function Underline({children,onPress}){return React.createElement(import_common5.ReactNative.Text,{style:{textDecorationLine:"underline"},onPress},children)}RichText2.Underline=Underline})(RichText||(RichText={}));var RichText;var import_common7=__toESM(require_common(),1),import_ui3=__toESM(require_ui(),1);var import_metro3=__toESM(require_metro(),1),import_common6=__toESM(require_common(),1);var WebView=(0,import_metro3.find)(x=>x?.WebView&&!x.default).WebView,Svg=(0,import_metro3.findByProps)("SvgXml"),Reanimated=(0,import_metro3.findByProps)("useSharedValue"),FlashList=(0,import_metro3.findByProps)("FlashList").FlashList,{default:Video}=(0,import_metro3.findByProps)("DRMType","FilterType"),Joi=(0,import_metro3.findByProps)("isJoi"),zustand=(0,import_metro3.findByProps)("create","useStore")??{create:(0,import_metro3.findByName)("create")},DocumentPicker=(0,import_metro3.findByProps)("pickSingle","isCancel"),_MAS=(0,import_metro3.findByProps)("MobileAudioSound").MobileAudioSound;var RNCacheModule=import_common6.ReactNative.NativeModules.MMKVManager??import_common6.ReactNative.NativeModules.NativeCacheModule,RNChatModule=import_common6.ReactNative.NativeModules.DCDChatManager??import_common6.ReactNative.NativeModules.NativeChatModule,RNFileModule=import_common6.ReactNative.NativeModules.RTNFileManager??import_common6.ReactNative.NativeModules.DCDFileManager??import_common6.ReactNative.NativeModules.NativeFileModule;function Skeleton({height,style}){var baseStyle=import_common7.stylesheet.createThemedStyleSheet({skeleton:{height,borderRadius:16,backgroundColor:import_ui3.semanticColors.BG_MOD_STRONG}}),opacity=Reanimated.useSharedValue(1);return import_common7.React.useEffect(()=>{opacity.value=Reanimated.withRepeat(Reanimated.withTiming(.5,{duration:1e3}),-1,!0)},[]),import_common7.React.createElement(Reanimated.default.View,{style:[baseStyle.skeleton,style,{opacity}]})}var import_metro4=__toESM(require_metro(),1),import_common8=__toESM(require_common(),1),import_toasts3=__toESM(require_toasts(),1),NotFound=(prop,isFunction)=>()=>{var trigger=()=>{(0,import_toasts3.showToast)(`${prop} not found! Search for PNF in Debug Logs!`),console.warn(`!! PNF ERROR !!
Missing the redesign ${isFunction?"function":"component"}: ${prop}. Please bug @nexpid about this on Discord!`)};return isFunction?trigger():import_common8.React.useEffect(trigger,[]),null},findProp=(...props)=>(0,import_metro4.findByProps)(...props)?.[props[0]],findPropPolyfill=(isFunction,...props)=>findProp(...props)??NotFound(props[0],isFunction),Button=findPropPolyfill(!1,"Button"),RowButton=findPropPolyfill(!1,"RowButton"),FloatingActionButton=findPropPolyfill(!1,"FloatingActionButton"),PressableScale=findPropPolyfill(!1,"PressableScale"),IconButton=findPropPolyfill(!1,"IconButton"),ContextMenu=findPropPolyfill(!1,"ContextMenu"),_Slider=findPropPolyfill(!1,"Slider");var TextInput=findPropPolyfill(!1,"TextInput"),Tabs=findPropPolyfill(!1,"Tabs"),SegmentedControlPages=findPropPolyfill(!1,"SegmentedControlPages"),Card=findPropPolyfill(!1,"Card"),Stack=findPropPolyfill(!1,"Stack"),useSegmentedControlState=findPropPolyfill(!0,"useSegmentedControlState");var RepainterIcon_default={uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASOSURBVHgB7ZzLbtNMFMf/4/SjrfQJwhukK1iA4A0IO4SAmgVSWBGegPIEpE9AumKJ2UBhU0NYlBXhCQgSi7LCTwDlIlRQ6+FMHKcJvoyTjHMZz09K48vYiv8+njlzznEZJNi2XQZWqxx8nQNV2lTBXML26Td2GCzXgv/Sdbc9KICl7bxu396gBg8AXsaCQb/boc/mpELFCiSs5hArTQu4g8XGo2u4PIlIVtxGH8tvNRBHUPHB31+1b13EmEQEumHXGmRYY59w/mDlJZR2qt2+dHSGBLLtWgXdPkc7KiexOtZ1DQlEo8BDaAvfGMeK+gIJ6+FgNjTmf6zcw4j0BTrUqt+JhwV+3EhYxwv8AjSHgY9sBNbxwfPqIauElW0a8u0R+qIlFAwfpfdASbgzHhlF+wh48trdbie1t1BcaFBCnQR4u27XHvdcnAhFFqiPEMonoeI8biPQMZUlWBGRjEBDRKclRqAolUGH0ggUgzUwLSmcQN9xcJo65bu06CW3YmWa3K6Lpb5APPUAbfDarrvfcredPxRIE2HapIYcfrez7gvkg32A5gwawW4QZXSSW7NhgZaw3E5TVAcYmDO4TuEdqVH0BXJdR4jjQF+8P+DvBjdQBuSU7KChTppOsKWrFZGn7OxGgve+dNI6JJA4AcfRJvTDowlp5LrSwx+8I/5GhvmW+6JJXw3ogxeMWFE4rGrSQazXocf6Qa8CtRtYcGjUagtxdmPyYjR7r6YlRDmz4i0oRIhEJ18TMRMsHGyf8mEb5O/EiiPgqXk/vt/aedbt0FNTzyFXKFZyAtY6PbPV+U1DC1F8D8xyw4tLQsR+qNP+nLSfxHNIXOFtZ4so9u7CVu+z8JAAj1MbkMjhYuHmYiJzzNOzG15r5+nLcKVQAl23a3VIM8esMbSGghCU8kgzxx4NTmuDG7TPaogUj4/VBvU80qxqnL+krUCBMCsbFKW4l2XkpVGtEecSaPOIBcnA/ypHKF2kjvVSUGeQzSWhtm7LfXYzbt/ULSi8s8h4Z7Pi977FHefdJZ7xSN75gYO7SXunLhDHiugo69kvIE945zt+XxZRxqQWU33ExPxHJOgwB1CwrNlyn9+XtZuqH3Q0FwUS4TxNLo6gUMULwmqov9lMe6T+pQACdS2m+RMHW6MIE6KhQEHFfTcimGFmLyN3gcJhndz8CzRuZanw8ujjlBhrIyOcs2+Wha9f/F/fxrGSNHIdxYKa67HLiieukldBbgJds2uOgmr9mYuUyzAvLEfRqwyVWftNJSjGtutljsNHtKhqGlE+c/a892nv40xS48ot6BC/q1DsENKoVMeMUC6QmElDMePUN6tCuUAsl6wHm1kmxVSYSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSTACSVAuENesUj8HC2IelMM6mBE5RBRPPIF6mpgRygUSbw3RY6bygiJv6UyTXDrpEpY3VT0WnLH67gzzYsrTPoK9vc7B2tlzb0j9MsuWbo6BcuyMXZk0tz4puRdQidpkC6z3LwZlAf2g8EC8hDJuNYZq/gJxnYqknsYYAgAAAABJRU5ErkJggg==",width:72,height:72,file:"MonetTheme/RepainterIcon.png",allowIconTheming:!0};var import_vendetta2=__toESM(require_vendetta(),1),import_ui5=__toESM(require_ui(),1),import_assets3=__toESM(require_assets(),1),import_toasts4=__toESM(require_toasts(),1);var import_ui4=__toESM(require_ui(),1);function redFromArgb(argb){return argb>>16&255}function greenFromArgb(argb){return argb>>8&255}function blueFromArgb(argb){return argb&255}function hexFromArgb(argb){var r=redFromArgb(argb),g=greenFromArgb(argb),b=blueFromArgb(argb),outParts=[r.toString(16),g.toString(16),b.toString(16)];for(var[i,part]of outParts.entries())part.length===1&&(outParts[i]=`0${part}`);return`#${outParts.join("")}`}function argbFromHex(hex){hex=hex.replace("#","");var isThree=hex.length===3,isSix=hex.length===6,isEight=hex.length===8;if(!isThree&&!isSix&&!isEight)throw new Error(`unexpected hex ${hex}`);var r=0,g=0,b=0;return isThree?(r=parseIntHex(hex.slice(0,1).repeat(2)),g=parseIntHex(hex.slice(1,2).repeat(2)),b=parseIntHex(hex.slice(2,3).repeat(2))):isSix?(r=parseIntHex(hex.slice(0,2)),g=parseIntHex(hex.slice(2,4)),b=parseIntHex(hex.slice(4,6))):isEight&&(r=parseIntHex(hex.slice(2,4)),g=parseIntHex(hex.slice(4,6)),b=parseIntHex(hex.slice(6,8))),(255<<24|(r&255)<<16|(g&255)<<8|b&255)>>>0}function parseIntHex(value){return Number.parseInt(value,16)}function signum(num){return num<0?-1:num===0?0:1}function lerp(start,stop,amount){return(1-amount)*start+amount*stop}function clampInt(min,max,input){return input<min?min:input>max?max:input}function sanitizeDegreesDouble(degrees){return degrees%=360,degrees<0&&(degrees+=360),degrees}function matrixMultiply(row,matrix){var a=row[0]*matrix[0][0]+row[1]*matrix[0][1]+row[2]*matrix[0][2],b=row[0]*matrix[1][0]+row[1]*matrix[1][1]+row[2]*matrix[1][2],c=row[0]*matrix[2][0]+row[1]*matrix[2][1]+row[2]*matrix[2][2];return[a,b,c]}var SRGB_TO_XYZ=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]];var WHITE_POINT_D65=[95.047,100,108.883];function argbFromRgb(red,green,blue){return(255<<24|(red&255)<<16|(green&255)<<8|blue&255)>>>0}function argbFromLinrgb(linrgb){var r=delinearized(linrgb[0]),g=delinearized(linrgb[1]),b=delinearized(linrgb[2]);return argbFromRgb(r,g,b)}function redFromArgb2(argb){return argb>>16&255}function greenFromArgb2(argb){return argb>>8&255}function blueFromArgb2(argb){return argb&255}function xyzFromArgb(argb){var r=linearized(redFromArgb2(argb)),g=linearized(greenFromArgb2(argb)),b=linearized(blueFromArgb2(argb));return matrixMultiply([r,g,b],SRGB_TO_XYZ)}function argbFromLstar(lstar){var y=yFromLstar(lstar),component=delinearized(y);return argbFromRgb(component,component,component)}function lstarFromArgb(argb){var y=xyzFromArgb(argb)[1];return 116*labF(y/100)-16}function yFromLstar(lstar){return 100*labInvf((lstar+16)/116)}function linearized(rgbComponent){var normalized=rgbComponent/255;return normalized<=.040449936?normalized/12.92*100:((normalized+.055)/1.055)**2.4*100}function delinearized(rgbComponent){var normalized=rgbComponent/100,delinearized2=0;return normalized<=.0031308?delinearized2=normalized*12.92:delinearized2=1.055*normalized**(1/2.4)-.055,clampInt(0,255,Math.round(delinearized2*255))}function whitePointD65(){return WHITE_POINT_D65}function labF(t){var e=.008856451679035631,kappa=24389/27;return t>e?t**(1/3):(kappa*t+16)/116}function labInvf(ft){var e=.008856451679035631,kappa=24389/27,ft3=ft*ft*ft;return ft3>e?ft3:(116*ft-16)/kappa}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ViewingConditions=function(){"use strict";function ViewingConditions2(n,aw,nbb,ncb,c,nc,rgbD,fl,fLRoot,z){_class_call_check(this,ViewingConditions2),_define_property(this,"n",void 0),_define_property(this,"aw",void 0),_define_property(this,"nbb",void 0),_define_property(this,"ncb",void 0),_define_property(this,"c",void 0),_define_property(this,"nc",void 0),_define_property(this,"rgbD",void 0),_define_property(this,"fl",void 0),_define_property(this,"fLRoot",void 0),_define_property(this,"z",void 0),this.n=n,this.aw=aw,this.nbb=nbb,this.ncb=ncb,this.c=c,this.nc=nc,this.rgbD=rgbD,this.fl=fl,this.fLRoot=fLRoot,this.z=z}return _create_class(ViewingConditions2,null,[{key:"make",value:function(whitePoint=whitePointD65(),adaptingLuminance=200/Math.PI*yFromLstar(50)/100,backgroundLstar=50,surround=2,discountingIlluminant=!1){var xyz=whitePoint,rW=xyz[0]*.401288+xyz[1]*.650173+xyz[2]*-.051461,gW=xyz[0]*-.250268+xyz[1]*1.204414+xyz[2]*.045854,bW=xyz[0]*-.002079+xyz[1]*.048952+xyz[2]*.953127,f=.8+surround/10,c=f>=.9?lerp(.59,.69,(f-.9)*10):lerp(.525,.59,(f-.8)*10),d=discountingIlluminant?1:f*(1-1/3.6*Math.exp((-adaptingLuminance-42)/92));d=d>1?1:d<0?0:d;var nc=f,rgbD=[d*(100/rW)+1-d,d*(100/gW)+1-d,d*(100/bW)+1-d],k=1/(5*adaptingLuminance+1),k4=k*k*k*k,k4F=1-k4,fl=k4*adaptingLuminance+.1*k4F*k4F*Math.cbrt(5*adaptingLuminance),n=yFromLstar(backgroundLstar)/whitePoint[1],z=1.48+Math.sqrt(n),nbb=.725/n**.2,ncb=nbb,rgbAFactors=[(fl*rgbD[0]*rW/100)**.42,(fl*rgbD[1]*gW/100)**.42,(fl*rgbD[2]*bW/100)**.42],rgbA=[400*rgbAFactors[0]/(rgbAFactors[0]+27.13),400*rgbAFactors[1]/(rgbAFactors[1]+27.13),400*rgbAFactors[2]/(rgbAFactors[2]+27.13)],aw=(2*rgbA[0]+rgbA[1]+.05*rgbA[2])*nbb;return new ViewingConditions2(n,aw,nbb,ncb,c,nc,rgbD,fl,fl**.25,z)}}]),ViewingConditions2}();_define_property(ViewingConditions,"DEFAULT",ViewingConditions.make());var Cam16=function(){"use strict";function Cam162(hue,chroma,j,q,m,s,jstar,astar,bstar){_class_call_check(this,Cam162),_define_property(this,"hue",void 0),_define_property(this,"chroma",void 0),_define_property(this,"j",void 0),_define_property(this,"q",void 0),_define_property(this,"m",void 0),_define_property(this,"s",void 0),_define_property(this,"jstar",void 0),_define_property(this,"astar",void 0),_define_property(this,"bstar",void 0),this.hue=hue,this.chroma=chroma,this.j=j,this.q=q,this.m=m,this.s=s,this.jstar=jstar,this.astar=astar,this.bstar=bstar}return _create_class(Cam162,null,[{key:"fromInt",value:function(argb){return Cam162.fromIntInViewingConditions(argb,ViewingConditions.DEFAULT)}},{key:"fromIntInViewingConditions",value:function(argb,viewingConditions){var red=(argb&16711680)>>16,green=(argb&65280)>>8,blue=argb&255,redL=linearized(red),greenL=linearized(green),blueL=linearized(blue),x=.41233895*redL+.35762064*greenL+.18051042*blueL,y=.2126*redL+.7152*greenL+.0722*blueL,z=.01932141*redL+.11916382*greenL+.95034478*blueL,rC=.401288*x+.650173*y-.051461*z,gC=-.250268*x+1.204414*y+.045854*z,bC=-.002079*x+.048952*y+.953127*z,rD=viewingConditions.rgbD[0]*rC,gD=viewingConditions.rgbD[1]*gC,bD=viewingConditions.rgbD[2]*bC,rAF=(viewingConditions.fl*Math.abs(rD)/100)**.42,gAF=(viewingConditions.fl*Math.abs(gD)/100)**.42,bAF=(viewingConditions.fl*Math.abs(bD)/100)**.42,rA=signum(rD)*400*rAF/(rAF+27.13),gA=signum(gD)*400*gAF/(gAF+27.13),bA=signum(bD)*400*bAF/(bAF+27.13),a=(11*rA+-12*gA+bA)/11,b=(rA+gA-2*bA)/9,u=(20*rA+20*gA+21*bA)/20,p2=(40*rA+20*gA+bA)/20,atan2=Math.atan2(b,a),atanDegrees=atan2*180/Math.PI,hue=atanDegrees<0?atanDegrees+360:atanDegrees>=360?atanDegrees-360:atanDegrees,hueRadians=hue*Math.PI/180,ac=p2*viewingConditions.nbb,j=100*(ac/viewingConditions.aw)**(viewingConditions.c*viewingConditions.z),q=4/viewingConditions.c*Math.sqrt(j/100)*(viewingConditions.aw+4)*viewingConditions.fLRoot,huePrime=hue<20.14?hue+360:hue,eHue=.25*(Math.cos(huePrime*Math.PI/180+2)+3.8),p1=5e4/13*eHue*viewingConditions.nc*viewingConditions.ncb,t=p1*Math.sqrt(a*a+b*b)/(u+.305),alpha=t**.9*(1.64-.29**viewingConditions.n)**.73,c=alpha*Math.sqrt(j/100),m=c*viewingConditions.fLRoot,s=50*Math.sqrt(alpha*viewingConditions.c/(viewingConditions.aw+4)),jstar=(1+100*.007)*j/(1+.007*j),mstar=1/.0228*Math.log(1+.0228*m),astar=mstar*Math.cos(hueRadians),bstar=mstar*Math.sin(hueRadians);return new Cam162(hue,c,j,q,m,s,jstar,astar,bstar)}},{key:"fromJchInViewingConditions",value:function(j,c,h,viewingConditions){var q=4/viewingConditions.c*Math.sqrt(j/100)*(viewingConditions.aw+4)*viewingConditions.fLRoot,m=c*viewingConditions.fLRoot,alpha=c/Math.sqrt(j/100),s=50*Math.sqrt(alpha*viewingConditions.c/(viewingConditions.aw+4)),hueRadians=h*Math.PI/180,jstar=(1+100*.007)*j/(1+.007*j),mstar=1/.0228*Math.log(1+.0228*m),astar=mstar*Math.cos(hueRadians),bstar=mstar*Math.sin(hueRadians);return new Cam162(h,c,j,q,m,s,jstar,astar,bstar)}}]),Cam162}();function _class_call_check2(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties2(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class2(Constructor,protoProps,staticProps){return protoProps&&_defineProperties2(Constructor.prototype,protoProps),staticProps&&_defineProperties2(Constructor,staticProps),Constructor}function _define_property2(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var HctSolver=function(){"use strict";function HctSolver2(){_class_call_check2(this,HctSolver2)}return _create_class2(HctSolver2,null,[{key:"sanitizeRadians",value:function(angle){return(angle+Math.PI*8)%(Math.PI*2)}},{key:"trueDelinearized",value:function(rgbComponent){var normalized=rgbComponent/100,delinearized2=0;return normalized<=.0031308?delinearized2=normalized*12.92:delinearized2=1.055*normalized**(1/2.4)-.055,delinearized2*255}},{key:"chromaticAdaptation",value:function(component){var af=Math.abs(component)**.42;return signum(component)*400*af/(af+27.13)}},{key:"hueOf",value:function(linrgb){var scaledDiscount=matrixMultiply(linrgb,HctSolver2.SCALED_DISCOUNT_FROM_LINRGB),rA=HctSolver2.chromaticAdaptation(scaledDiscount[0]),gA=HctSolver2.chromaticAdaptation(scaledDiscount[1]),bA=HctSolver2.chromaticAdaptation(scaledDiscount[2]),a=(11*rA+-12*gA+bA)/11,b=(rA+gA-2*bA)/9;return Math.atan2(b,a)}},{key:"areInCyclicOrder",value:function(a,b,c){var deltaAB=HctSolver2.sanitizeRadians(b-a),deltaAC=HctSolver2.sanitizeRadians(c-a);return deltaAB<deltaAC}},{key:"intercept",value:function(source,mid,target){return(mid-source)/(target-source)}},{key:"lerpPoint",value:function(source,t,target){return[source[0]+(target[0]-source[0])*t,source[1]+(target[1]-source[1])*t,source[2]+(target[2]-source[2])*t]}},{key:"setCoordinate",value:function(source,coordinate,target,axis){var t=HctSolver2.intercept(source[axis],coordinate,target[axis]);return HctSolver2.lerpPoint(source,t,target)}},{key:"isBounded",value:function(x){return x>=0&&x<=100}},{key:"nthVertex",value:function(y,n){var kR=HctSolver2.Y_FROM_LINRGB[0],kG=HctSolver2.Y_FROM_LINRGB[1],kB=HctSolver2.Y_FROM_LINRGB[2],coordA=n%4<=1?0:100,coordB=n%2===0?0:100;if(n<4){var g=coordA,b=coordB,r=(y-g*kG-b*kB)/kR;return HctSolver2.isBounded(r)?[r,g,b]:[-1,-1,-1]}if(n<8){var b1=coordA,r1=coordB,g1=(y-r1*kR-b1*kB)/kG;return HctSolver2.isBounded(g1)?[r1,g1,b1]:[-1,-1,-1]}var r2=coordA,g2=coordB,b2=(y-r2*kR-g2*kG)/kB;return HctSolver2.isBounded(b2)?[r2,g2,b2]:[-1,-1,-1]}},{key:"bisectToSegment",value:function(y,targetHue){for(var left=[-1,-1,-1],right=left,leftHue=0,rightHue=0,initialized=!1,uncut=!0,n=0;n<12;n++){var mid=HctSolver2.nthVertex(y,n);if(!(mid[0]<0)){var midHue=HctSolver2.hueOf(mid);if(!initialized){left=mid,right=mid,leftHue=midHue,rightHue=midHue,initialized=!0;continue}(uncut||HctSolver2.areInCyclicOrder(leftHue,midHue,rightHue))&&(uncut=!1,HctSolver2.areInCyclicOrder(leftHue,targetHue,midHue)?(right=mid,rightHue=midHue):(left=mid,leftHue=midHue))}}return[left,right]}},{key:"midpoint",value:function(a,b){return[(a[0]+b[0])/2,(a[1]+b[1])/2,(a[2]+b[2])/2]}},{key:"criticalPlaneBelow",value:function(x){return Math.floor(x-.5)}},{key:"criticalPlaneAbove",value:function(x){return Math.ceil(x-.5)}},{key:"bisectToLimit",value:function(y,targetHue){for(var segment=HctSolver2.bisectToSegment(y,targetHue),left=segment[0],leftHue=HctSolver2.hueOf(left),right=segment[1],axis=0;axis<3;axis++)if(left[axis]!==right[axis]){var lPlane=-1,rPlane=255;left[axis]<right[axis]?(lPlane=HctSolver2.criticalPlaneBelow(HctSolver2.trueDelinearized(left[axis])),rPlane=HctSolver2.criticalPlaneAbove(HctSolver2.trueDelinearized(right[axis]))):(lPlane=HctSolver2.criticalPlaneAbove(HctSolver2.trueDelinearized(left[axis])),rPlane=HctSolver2.criticalPlaneBelow(HctSolver2.trueDelinearized(right[axis])));for(var i=0;i<8&&!(Math.abs(rPlane-lPlane)<=1);i++){var mPlane=Math.floor((lPlane+rPlane)/2),midPlaneCoordinate=HctSolver2.CRITICAL_PLANES[mPlane],mid=HctSolver2.setCoordinate(left,midPlaneCoordinate,right,axis),midHue=HctSolver2.hueOf(mid);HctSolver2.areInCyclicOrder(leftHue,targetHue,midHue)?(right=mid,rPlane=mPlane):(left=mid,leftHue=midHue,lPlane=mPlane)}}return HctSolver2.midpoint(left,right)}},{key:"inverseChromaticAdaptation",value:function(adapted){var adaptedAbs=Math.abs(adapted),base=Math.max(0,27.13*adaptedAbs/(400-adaptedAbs));return signum(adapted)*base**(1/.42)}},{key:"findResultByJ",value:function(hueRadians,chroma,y){for(var j=Math.sqrt(y)*11,viewingConditions=ViewingConditions.DEFAULT,tInnerCoeff=1/(1.64-.29**viewingConditions.n)**.73,eHue=.25*(Math.cos(hueRadians+2)+3.8),p1=eHue*(5e4/13)*viewingConditions.nc*viewingConditions.ncb,hSin=Math.sin(hueRadians),hCos=Math.cos(hueRadians),iterationRound=0;iterationRound<5;iterationRound++){var jNormalized=j/100,alpha=chroma===0||j===0?0:chroma/Math.sqrt(jNormalized),t=(alpha*tInnerCoeff)**(1/.9),ac=viewingConditions.aw*jNormalized**(1/viewingConditions.c/viewingConditions.z),p2=ac/viewingConditions.nbb,gamma=23*(p2+.305)*t/(23*p1+11*t*hCos+108*t*hSin),a=gamma*hCos,b=gamma*hSin,rA=(460*p2+451*a+288*b)/1403,gA=(460*p2-891*a-261*b)/1403,bA=(460*p2-220*a-6300*b)/1403,rCScaled=HctSolver2.inverseChromaticAdaptation(rA),gCScaled=HctSolver2.inverseChromaticAdaptation(gA),bCScaled=HctSolver2.inverseChromaticAdaptation(bA),linrgb=matrixMultiply([rCScaled,gCScaled,bCScaled],HctSolver2.LINRGB_FROM_SCALED_DISCOUNT);if(linrgb[0]<0||linrgb[1]<0||linrgb[2]<0)return 0;var kR=HctSolver2.Y_FROM_LINRGB[0],kG=HctSolver2.Y_FROM_LINRGB[1],kB=HctSolver2.Y_FROM_LINRGB[2],fnj=kR*linrgb[0]+kG*linrgb[1]+kB*linrgb[2];if(fnj<=0)return 0;if(iterationRound===4||Math.abs(fnj-y)<.002)return linrgb[0]>100.01||linrgb[1]>100.01||linrgb[2]>100.01?0:argbFromLinrgb(linrgb);j-=(fnj-y)*j/(2*fnj)}return 0}},{key:"solveToInt",value:function(hueDegrees,chroma,lstar){if(chroma<1e-4||lstar<1e-4||lstar>99.9999)return argbFromLstar(lstar);hueDegrees=sanitizeDegreesDouble(hueDegrees);var hueRadians=hueDegrees/180*Math.PI,y=yFromLstar(lstar),exactAnswer=HctSolver2.findResultByJ(hueRadians,chroma,y);if(exactAnswer!==0)return exactAnswer;var linrgb=HctSolver2.bisectToLimit(y,hueRadians);return argbFromLinrgb(linrgb)}}]),HctSolver2}();_define_property2(HctSolver,"SCALED_DISCOUNT_FROM_LINRGB",[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]]);_define_property2(HctSolver,"LINRGB_FROM_SCALED_DISCOUNT",[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]]);_define_property2(HctSolver,"Y_FROM_LINRGB",[.2126,.7152,.0722]);_define_property2(HctSolver,"CRITICAL_PLANES",[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776]);function parseColor(clr){var shade=Number(clr.split("_")[1]);if(import_ui4.rawColors[clr])return import_ui4.rawColors[clr];if(clr.startsWith("N1_"))return getLABShade(vstorage.colors.neutral1,500-shade+500);if(clr.startsWith("N2_"))return getLABShade(vstorage.colors.neutral2,500-shade+500);if(clr.startsWith("A1_"))return getLABShade(vstorage.colors.accent1,500-shade+500);if(clr.startsWith("A2_"))return getLABShade(vstorage.colors.accent2,500-shade+500);if(clr.startsWith("A3_"))return getLABShade(vstorage.colors.accent3,500-shade+500);if(clr.match(/^#(?:[0-9a-f]{6})|(?:[0-9a-f]{3})$/i))return clr}function getLABShade(color,shade,mult){mult??=1;var argb=argbFromHex(color),cam=Cam16.fromInt(argb);return hexFromArgb(HctSolver.solveToInt(cam.hue,cam.chroma,lstarFromArgb(argb)+(500-shade)/10*mult))}function apply(theme){var{bunny}=window,val=theme?{id:"monet-theme",selected:!1,data:theme}:null;try{return bunny.themes.selectTheme(val),window[hasThemeKey]=!!val,val?(0,import_toasts4.showToast)("Applied theme",(0,import_assets3.getAssetIDByName)("PaintPaletteIcon")):(0,import_toasts4.showToast)("Cleared theme",(0,import_assets3.getAssetIDByName)("TrashIcon")),!0}catch(e){(0,import_toasts4.showToast)("Couldn't apply theme!",(0,import_assets3.getAssetIDByName)("CircleXIcon-primary")),import_vendetta2.logger.error(`Failed to apply theme!
${e.stack}`)}}function build(patches2){var _loop=function(x2,y2){var clr4=parseColor(y2.color);if(!clr4)return"continue";for(var c of Object.keys(import_ui5.rawColors).filter(l=>l.startsWith(`${x2.split("_")[0]}_`))){var shade=Number(c.split("_")[1]);if(checkShouldPut(shade,x2.split("_").slice(1))){var useShade=y2.alternative?Math.floor(shade/26*1e3):shade;raw[c]=getLABShade(clr4,y2.base?useShade+(500-y2.base):useShade,y2.ratio)}}},raw={},semantic={},theme={name:"Material You Theme 2.0",description:"A Bunny theme with Material You theming.",authors:[{name:"nexpid",id:"853550207039832084"}],spec:2},style=getDiscordTheme(),get=lk=>Object.assign(lk.both,style==="light"?lk.light:lk.dark),entries=obj=>Object.entries(obj),checkShouldPut=(shade,checks)=>{var shouldPut=!0;for(var c of checks){if(!shouldPut)break;c.startsWith(">=")?shouldPut=shade>=Number(c.slice(2)):c.startsWith("<=")?shouldPut=shade<=Number(c.slice(2)):c.startsWith(">")?shouldPut=shade>Number(c.slice(1)):c.startsWith("<")&&(shouldPut=shade<Number(c.slice(1)))}return shouldPut};if(patches2.version===3)for(var[x,y]of entries(get(patches2.replacers)))_loop(x,y);var rawPatches=get(patches2.raw);for(var key of Object.keys(rawPatches)){var clr=parseColor(rawPatches[key]);clr&&(raw[key]=clr)}for(var key1 of Object.keys(patches2.semantic.both)){var clr1=parseColor(rawPatches[key1]);clr1&&(semantic[key1]=[clr1,clr1])}for(var key2 of Object.keys(patches2.semantic.dark)){var clr2=parseColor(rawPatches[key2]);semantic[key2]&&clr2?semantic[key2][0]=clr2:clr2&&(semantic[key2]=[clr2])}for(var key3 of Object.keys(patches2.semantic.light)){var clr3=parseColor(rawPatches[key3]);semantic[key3]&&clr3?semantic[key3][1]=clr3:clr3&&(semantic[key3]=[null,clr3])}if(vstorage.config.wallpaper!=="none"&&(theme.background={url:vstorage.config.wallpaper,alpha:1}),patches2.version===3&&patches2.plus){theme.plus={customOverlays:!0,version:0,icons:{}};var icons={};for(var key4 of Object.keys(get(patches2.plus.icons)))icons[key4]=parseColor(key4);theme.plus.icons=icons}return theme.semanticColors=semantic,theme.rawColors=raw,JSON.parse(JSON.stringify(theme))}var import_constants=__toESM(require_constants(),1),import_utils5=__toESM(require_utils(),1);function asyncGeneratorStep2(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator2(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep2(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep2(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function checkForURL(text){return text.match(import_constants.HTTP_REGEX_MULTI)?.filter(x=>x.startsWith("https://repainter.app/themes/"))[0]}function fetchRawTheme(link){return _fetchRawTheme.apply(this,arguments)}function _fetchRawTheme(){return _fetchRawTheme=_async_to_generator2(function*(link){return yield(yield(0,import_utils5.safeFetch)(`https://repainter.app/_next/data/Z0BCpVYZyrdkss0k0zqLC/themes/${link.match(/themes\/([a-z0-9]+)/i)?.[1]??""}.json`,{cache:"no-store"})).json()}),_fetchRawTheme.apply(this,arguments)}function parseTheme(theme){var data3=Object.values(theme.pageProps.fallback)[0];if(!data3)throw new Error("Invalid Repainter theme!");var parseClr=clr=>(clr&16777215).toString(16).padStart(6,"0"),mapped=data3.colors.map(x=>`#${parseClr(x)}`);return{name:data3.name,description:data3.description,createdAt:new Date(data3.createdAt),updatedAt:new Date(data3.updatedAt),settings:data3.settingsLines,likes:data3.voteCount,colors:{neutral1:mapped[44],neutral2:mapped[57],accent1:mapped[5],accent2:mapped[18],accent3:mapped[31]}}}var import_metro6=__toESM(require_metro(),1),import_common10=__toESM(require_common(),1),import_ui6=__toESM(require_ui(),1),import_assets4=__toESM(require_assets(),1),import_toasts5=__toESM(require_toasts(),1);var import_metro5=__toESM(require_metro(),1),import_common9=__toESM(require_common(),1),import_utils6=__toESM(require_utils(),1),_ActionSheet=(0,import_metro5.findByProps)("ActionSheet")?.ActionSheet??(0,import_metro5.find)(x=>x.render?.name==="ActionSheet"),{ActionSheetTitleHeader,ActionSheetCloseButton}=(0,import_metro5.findByProps)("ActionSheetTitleHeader","ActionSheetCloseButton"),LazyActionSheet=(0,import_metro5.findByProps)("openLazy","hideActionSheet"),{openLazy,hideActionSheet}=LazyActionSheet,{showSimpleActionSheet}=(0,import_metro5.findByProps)("showSimpleActionSheet"),ActionSheet=props=>React.createElement(_ActionSheet,null,React.createElement(ActionSheetTitleHeader,{title:props.title,trailing:React.createElement(ActionSheetCloseButton,{onPress:props.onClose??(()=>{hideActionSheet()})})}),React.createElement(import_common9.ReactNative.View,(0,import_utils6.without)(props,"title","onClose")));ActionSheet.open=(sheet,props)=>{openLazy(new Promise(res=>{res({default:sheet})}),"ActionSheet",props)};var CustomColorPickerActionSheet=(0,import_metro6.findByName)("CustomColorPickerActionSheet"),Color_default=({title,color,update})=>{var styles=import_common10.stylesheet.createThemedStyleSheet({androidRipple:{color:import_ui6.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647}});return React.createElement(import_common10.ReactNative.View,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center",flex:1/5}},React.createElement(import_common10.ReactNative.Pressable,{android_ripple:styles.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:`${title} Color Preview`,accessibilityHint:`Shows the ${title} color used in this theme`,style:{width:48,aspectRatio:1,backgroundColor:color,borderRadius:2147483647,marginBottom:8},onPress:()=>{ActionSheet.open(CustomColorPickerActionSheet,{color:Number.parseInt(color.slice(1),16),onSelect:clr=>{update(`#${clr.toString(16).padStart(6,"0")}`)}})},onLongPress:()=>{import_common10.clipboard.setString(color),(0,import_toasts5.showToast)("Copied",(0,import_assets4.getAssetIDByName)("toast_copy_message"))}}),React.createElement(Text,{variant:"text-xs/medium",color:"TEXT_MUTED",align:"center"},title))};var import_common11=__toESM(require_common(),1),import_storage=__toESM(require_storage(),1),import_ui7=__toESM(require_ui(),1);var conventionalCommitRegex=RegExp("^(?<type>\\w+)(?:\\((?<scope>.+)\\))?(?<major>!)?: "),types=new Map([["feat","Feature"],["fix","Fix"],["chore","Chore"],["revert","Revert"],["style","Style"],["docs","Docs"],["build","Build"],["refactor","Refactor"],["test","Test"],["ci","CI"],["perf","Performance"]]);function parseConventionalCommit(commitTitle){var match=conventionalCommitRegex.exec(commitTitle);if(match?.groups?.type){var{type:rawType,scope,major}=match.groups,type=types.get(rawType);if(type)return{rawType,type:major?`${type}!`:type,scope:scope?`${scope}: `:void 0,raw:match[0]}}}var CommitState=function(CommitState2){return CommitState2[CommitState2.Selected=0]="Selected",CommitState2[CommitState2.Default=1]="Default",CommitState2}({}),conventionalCommitLabelColors={feat:[162,238,239,180,70,78],fix:[215,58,74,353,66,53],docs:[0,117,202,205,100,39],build:[217,63,11,15,90,44],refactor:[0,107,117,185,100,22],test:[251,202,4,48,96,50],ci:[197,222,245,208,70,86],perf:[83,25,231,256,81,50]};function Commit({commit,state,contextProps,...props}){(0,import_storage.useProxy)(vstorage);var styles=import_common11.stylesheet.createThemedStyleSheet({androidRipple:{color:import_ui7.semanticColors.ANDROID_RIPPLE,cornerRadius:16},card:{padding:16,borderRadius:16,borderColor:import_ui7.semanticColors.BORDER_FAINT,borderWidth:1,backgroundColor:import_ui7.semanticColors.CARD_PRIMARY_BG,marginHorizontal:16},cardSelected:{borderColor:import_ui7.semanticColors.TEXT_BRAND},cardDefault:{borderColor:"#fffa"},title:{flexDirection:"row",alignItems:"center",gap:6},avatar:{width:18,height:18,borderRadius:11},labelTitle:{transform:[{translateY:-2}]},label:{paddingHorizontal:7,borderRadius:100,borderWidth:1,transform:[{translateY:2}]}}),title=React.createElement(Text,{variant:"text-md/medium",color:"TEXT_NORMAL",lineClamp:1},commit.commit.message),labelTitle=parseConventionalCommit(commit.commit.message);if(labelTitle){var labelColor=conventionalCommitLabelColors[labelTitle.rawType]??[255,255,255,0,0,100],perceivedLightness=(labelColor[0]*.2126+labelColor[1]*.7152+labelColor[2]*.0722)/255,lightnessThreshold=getDiscordTheme()==="light"?.453:.6,lightnessSwitch=Math.max(0,Math.min(1/(lightnessThreshold-perceivedLightness),1))*100,lightenBy=(lightnessThreshold-perceivedLightness)*lightnessSwitch;title=React.createElement(Text,{variant:"text-md/medium",color:"TEXT_NORMAL",style:styles.labelTitle,lineClamp:1},React.createElement(import_common11.ReactNative.View,{style:[styles.label,getDiscordTheme()==="light"?{backgroundColor:`rgb(${labelColor[0]}, ${labelColor[1]}, ${labelColor[2]})`,borderWidth:0}:{backgroundColor:`rgba(${labelColor[0]}, ${labelColor[1]}, ${labelColor[2]}, 0.3)`,borderColor:`hsla(${labelColor[3]}, ${labelColor[4]}%, ${labelColor[5]+lightenBy}%, 0.18)`}]},React.createElement(import_common11.ReactNative.Text,{style:getDiscordTheme()==="light"?{color:`hsl(0, 0%, ${lightnessSwitch}%)`}:{color:`hsl(${labelColor[3]}, ${labelColor[4]}%, ${labelColor[5]+lightenBy}%)`}},labelTitle.type))," ",labelTitle.scope&&React.createElement(Text,{color:"TEXT_MUTED"},labelTitle.scope),commit.commit.message.replace(conventionalCommitRegex,""))}return React.createElement(PressableScale,{style:[styles.card,state===0&&styles.cardSelected,state===1&&styles.cardDefault],android_ripple:styles.androidRipple,key:commit.sha,pointerEvents:"box-only",...contextProps,...props},React.createElement(Stack,{spacing:6},React.createElement(import_common11.ReactNative.View,{style:styles.title},React.createElement(import_common11.ReactNative.Image,{style:styles.avatar,source:{uri:commit.committer.avatar_url,cache:"force-cache"},resizeMode:"cover"}),React.createElement(Text,{variant:"text-md/medium",color:"TEXT_NORMAL",style:{transform:[{translateY:-1}]}},commit.committer.login),React.createElement(Text,{variant:"text-xs/medium",color:"TEXT_MUTED",style:{marginLeft:"auto"}},new Date(commit.commit.author.date).toLocaleDateString(import_common11.i18n.getLocale()))),title))}var import_vendetta3=__toESM(require_vendetta(),1),import_common12=__toESM(require_common(),1),import_assets5=__toESM(require_assets(),1),import_toasts6=__toESM(require_toasts(),1),import_utils7=__toESM(require_utils(),1);function asyncGeneratorStep3(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator3(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep3(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep3(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var revalidateTimeout2=5e3,refetchTimeout2=15*6e3,commitsSymbol=Symbol.for("monettheme.cache.commits"),data2={canRefetch:0,commits:null};!Number.isNaN(window[commitsSymbol]?.canRefetch)&&Array.isArray(window[commitsSymbol]?.commits)&&(data2={canRefetch:window[commitsSymbol].canRefetch,commits:JSON.parse(JSON.stringify(window[commitsSymbol].commits))});window[commitsSymbol]=data2;var uponRevalidate2=new Set,canRevalidate2=0,refetch2=function(){var _ref=_async_to_generator3(function*(){var commits=yield(0,import_utils7.safeFetch)("https://api.github.com/repos/nexpid/VendettaMonetTheme/commits?path=patches.jsonc",{cache:"no-store"}).then(x=>x.json().catch(err=>((0,import_toasts6.showToast)("Failed to parse GitHub commits!",(0,import_assets5.getAssetIDByName)("CircleXIcon-primary")),import_vendetta3.logger.error("useCommits refetch error (parse)",err),null))).catch(err=>((0,import_toasts6.showToast)("Failed to fetch GitHub commits!",(0,import_assets5.getAssetIDByName)("CircleXIcon-primary")),import_vendetta3.logger.error("useCommits refetch error (fetch)",err),null));data2.commits=commits,data2.canRefetch=Date.now()+refetchTimeout2;for(var fnc of uponRevalidate2)fnc(commits)});return function(){return _ref.apply(this,arguments)}}(),useCommits=()=>{var[commits,setCommits]=import_common12.React.useState(data2.commits),revalFunc=data3=>setCommits(data3);return import_common12.React.useEffect(()=>(uponRevalidate2.add(revalFunc),()=>void uponRevalidate2.delete(revalFunc))),import_common12.React.useEffect(()=>void((!commits||data2.canRefetch>=Date.now())&&refetch2()),[]),{commits,revalidate:_async_to_generator3(function*(){canRevalidate2<Date.now()||(canRevalidate2=Number.NaN,yield refetch2(),canRevalidate2=Date.now()+revalidateTimeout2)})}};Object.defineProperty(useCommits,"commits",{get:()=>data2.commits?data2.commits:refetch2().then(()=>data2.commits)});var useCommits_default=useCommits;var import_common14=__toESM(require_common(),1),import_storage2=__toESM(require_storage(),1),import_ui8=__toESM(require_ui(),1),import_assets6=__toESM(require_assets(),1),import_toasts7=__toESM(require_toasts(),1);var import_common13=__toESM(require_common(),1);function managePage(options,navigation,...deps){navigation||(navigation=import_common13.NavigationNative.useNavigation()),import_common13.React.useEffect(()=>{navigation.setOptions(options)},[navigation,...deps])}function CommitsPage(){(0,import_storage2.useProxy)(vstorage);var{commits}=useCommits_default();return managePage({title:"Commits",headerRight:()=>import_common14.React.createElement(import_common14.ReactNative.Pressable,{android_ripple:{color:resolveSemanticColor(import_ui8.semanticColors.ANDROID_RIPPLE)},onPress:()=>(vstorage.patches.commit=void 0,(0,import_toasts7.showToast)("Using latest commit for patches",(0,import_assets6.getAssetIDByName)("ArrowAngleLeftUpIcon"))),disabled:!vstorage.patches.commit},import_common14.React.createElement(Text,{variant:vstorage.patches.commit?"text-md/semibold":"text-md/normal",color:vstorage.patches.commit?"TEXT_BRAND":"TEXT_MUTED"},"Use latest"))},null,vstorage.patches.commit),import_common14.React.createElement(FlashList,{ItemSeparatorComponent:()=>import_common14.React.createElement(import_common14.ReactNative.View,{style:{height:12}}),ListFooterComponent:import_common14.React.createElement(import_common14.ReactNative.View,{style:{height:20}}),estimatedItemSize:79.54,data:commits??[],extraData:vstorage.patches.commit,keyExtractor:item=>item.sha,renderItem:({item,index})=>import_common14.React.createElement(Commit,{commit:item,onPress:()=>vstorage.patches.commit=item.sha,state:vstorage.patches.commit===item.sha?CommitState.Selected:index===0&&!vstorage.patches.commit?CommitState.Default:void 0}),removeClippedSubviews:!0})}var import_common16=__toESM(require_common(),1),import_storage3=__toESM(require_storage(),1),import_ui10=__toESM(require_ui(),1),import_assets8=__toESM(require_assets(),1),import_toasts8=__toESM(require_toasts(),1);var constants_default={github:{url:"https://github.com/nexpid/BunnyPlugins/tree/main/",raw:"https://raw.githubusercontent.com/nexpid/BunnyPlugins/main/"}};var prefix=`${constants_default.github.raw}plugins/monet-theme/assets/backgrounds/`,wallpapers_default=[{label:"Pixel 4 XL",variant:"any",content:[{title:"Cinnamon",url:`${prefix}pixel4l/cinnamon.png`},{title:"Default",url:`${prefix}pixel4l/default.png`},{title:"Green",url:`${prefix}pixel4l/green.png`},{title:"Ocean",url:`${prefix}pixel4l/ocean.png`},{title:"Orchid",url:`${prefix}pixel4l/orchid.png`},{title:"Purple",url:`${prefix}pixel4l/purple.png`},{title:"Space",url:`${prefix}pixel4l/space.png`},{title:"White",url:`${prefix}pixel4l/white.png`}]}];var import_common15=__toESM(require_common(),1),import_assets7=__toESM(require_assets(),1),import_components=__toESM(require_components(),1);var{FormRow}=import_components.Forms;function AddBackgroundSheet({add}){var[file,setFile]=import_common15.React.useState(null),[label,setLabel]=import_common15.React.useState("");return import_common15.React.createElement(ActionSheet,{title:"Add custom background"},import_common15.React.createElement(FormRow,{label:"Select an image",subLabel:file?.name,leading:import_common15.React.createElement(FormRow.Icon,{source:(0,import_assets7.getAssetIDByName)("ImageIcon")}),onPress:()=>{DocumentPicker.pickSingle({type:DocumentPicker.types.images,mode:"open",copyTo:"documentDirectory"}).then(file2=>{setFile({name:file2.name,path:file2.fileCopyUri})})}}),import_common15.React.createElement(TextInput,{size:"md",label:"Label",placeholder:"New background",value:label,onChange:x=>setLabel(x)}),import_common15.React.createElement(import_common15.ReactNative.View,{style:{height:8}}),import_common15.React.createElement(Button,{text:"Add",variant:"primary",size:"md",iconPosition:"start",icon:(0,import_assets7.getAssetIDByName)("PlusIcon"),onPress:()=>{!file||!label||(add(label,`file://${file.path}`),hideActionSheet())},disabled:!file||!label}))}function Wallpaper({label,image,centerImage,selected,onPress,onLongPress}){var dims=import_common16.ReactNative.Dimensions.get("window"),styles=import_common16.stylesheet.createThemedStyleSheet({android_ripple:{color:import_ui10.semanticColors.ANDROID_RIPPLE,cornerRadius:8},thing:{backgroundColor:import_ui10.semanticColors.BG_MOD_FAINT,borderRadius:8,width:dims.width/4,height:dims.width/2,marginRight:8},centerThing:{alignItems:"center",justifyContent:"center"},selectedThing:{borderWidth:2,borderColor:import_ui10.semanticColors.TEXT_BRAND},centerImage:{width:24,height:24,tintColor:import_ui10.semanticColors.INTERACTIVE_NORMAL}});return React.createElement(import_common16.ReactNative.View,null,React.createElement(PressableScale,{onPress,onLongPress,style:[styles.thing,centerImage&&styles.centerThing,selected&&styles.selectedThing],android_ripple:styles.android_ripple},React.createElement(import_common16.ReactNative.Image,{source:image,style:centerImage?styles.centerImage:{width:"100%",height:"100%",borderRadius:8},resizeMode:"cover"})),React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL",align:"center",style:{marginTop:8}},label))}function WallpaperCollection({collection,configurable}){return React.createElement(import_common16.ReactNative.View,null,React.createElement(Text,{variant:"text-md/medium",color:"TEXT_NORMAL",style:{marginBottom:8}},collection.label),React.createElement(import_common16.ReactNative.ScrollView,{horizontal:!0},configurable&&React.createElement(Wallpaper,{label:"Add",image:(0,import_assets8.getAssetIDByName)("ImagePlusIcon"),centerImage:!0,selected:!1,onPress:()=>{ActionSheet.open(AddBackgroundSheet,{add:configurable.add})}}),collection.content.map(x=>React.createElement(Wallpaper,{label:x.title,image:{uri:x.url},selected:vstorage.config.wallpaper===x.url,onPress:()=>{vstorage.config.wallpaper===x.url?((0,import_toasts8.showToast)("Removed background",(0,import_assets8.getAssetIDByName)("TrashIcon")),vstorage.config.wallpaper="none"):((0,import_toasts8.showToast)(`Set background to ${x.title}`,(0,import_assets8.getAssetIDByName)("ImagePlusIcon")),vstorage.config.wallpaper=x.url)},onLongPress:configurable&&(()=>{showSimpleActionSheet({key:"CardOverflow",header:{title:x.title,onClose:()=>{hideActionSheet()}},options:[{label:"Remove",icon:(0,import_assets8.getAssetIDByName)("TrashIcon"),isDestructive:!0,onPress:()=>{(0,import_toasts8.showToast)(`Removed ${x.title}`,(0,import_assets8.getAssetIDByName)("TrashIcon")),configurable.remove(x)}}]})})}))))}var ConfigurePage=()=>{(0,import_storage3.useProxy)(vstorage);var bestVariant=getDiscordTheme()!=="light"?"dark":"light",collections=wallpapers_default.filter(x=>x.variant===bestVariant||x.variant==="any");return React.createElement(import_common16.ReactNative.ScrollView,{style:{flex:1}},React.createElement(BetterTableRowGroup,{title:"Backgrounds",icon:(0,import_assets8.getAssetIDByName)("ImageIcon"),padding:!0},collections.map(x=>React.createElement(React.Fragment,null,React.createElement(WallpaperCollection,{collection:x}),React.createElement(import_common16.ReactNative.View,{style:{height:8}}))),React.createElement(WallpaperCollection,{configurable:{add:(title,location)=>{vstorage.config.custom=[...vstorage.config.custom,{title,url:location}]},remove:entry=>{vstorage.config.custom=vstorage.config.custom.filter(x=>x.url!==entry.url)}},collection:{label:"Custom",variant:"any",content:vstorage.config.custom}})),React.createElement(import_common16.ReactNative.View,{style:{marginBottom:12}}))};function openConfigurePage(navigation){navigation.push("VendettaCustomPage",{title:"Theme configuration",render:ConfigurePage})}function asyncGeneratorStep4(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator4(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep4(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep4(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var{FormRow:FormRow2,FormSwitchRow}=import_components2.Forms;function setColorsFromDynamic(clr){vstorage.colors={neutral1:clr.neutral1[7],neutral2:clr.neutral2[7],accent1:clr.accent1[7],accent2:clr.accent2[7],accent3:clr.accent3[7]}}var Settings_default=()=>{var navigation=import_common17.NavigationNative.useNavigation(),{commits,revalidate:revalidateCommits}=useCommits_default(),{patches:patches2,revalidate:revalidatePatches}=usePatches_default(),[isLoadedTheme,setIsLoadedTheme]=import_common17.React.useState(hasTheme());(0,import_storage4.useProxy)(vstorage);var styles=import_common17.stylesheet.createThemedStyleSheet({pill:{flexDirection:"row",alignItems:"center",paddingHorizontal:6,paddingVertical:4,backgroundColor:import_ui11.semanticColors.BG_MOD_SUBTLE,borderRadius:8},androidRipple:{color:import_ui11.semanticColors.ANDROID_RIPPLE,cornerRadius:8},help:{width:16,height:16,tintColor:import_ui11.semanticColors.TEXT_BRAND,marginRight:4},labelIcon:{width:14,height:14,marginRight:6,tintColor:import_ui11.semanticColors.TEXT_NORMAL}}),showMessage=void 0,debug=(0,import_debug.getDebugInfo)(),syscolors=getSysColors();debug.os.name!=="Android"?showMessage="Dynamic colors are only available on Android.":debug.os.sdk<31?showMessage="Dynamic colors are only available on Android 12+ (SDK 31+).":syscolors===null&&(showMessage="Dynamic colors are unavailable.");var lastThemePressTime=import_common17.React.useRef(0);return import_common17.React.createElement(import_common17.ReactNative.ScrollView,{style:{flex:1}},showMessage&&import_common17.React.createElement(import_common17.ReactNative.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:8}},import_common17.React.createElement(import_common17.ReactNative.Image,{source:(0,import_assets9.getAssetIDByName)("CircleInformationIcon-primary"),style:styles.help}),import_common17.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_BRAND"},showMessage)),import_common17.React.createElement(BetterTableRowGroup,{title:"Colors",icon:(0,import_assets9.getAssetIDByName)("PaintPaletteIcon"),padding:!0},import_common17.React.createElement(import_common17.ReactNative.View,{style:{marginBottom:8,flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8}},syscolors&&import_common17.React.createElement(PressableScale,{android_ripple:styles.androidRipple,style:styles.pill,onPress:()=>{setColorsFromDynamic(syscolors),(0,import_toasts9.showToast)("Autofilled colors",(0,import_assets9.getAssetIDByName)("PencilSparkleIcon"))}},import_common17.React.createElement(import_common17.ReactNative.Image,{source:(0,import_assets9.getAssetIDByName)("PencilSparkleIcon"),style:styles.labelIcon,resizeMode:"cover"}),import_common17.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL"},"Autofill")),import_common17.React.createElement(PressableScale,{android_ripple:styles.androidRipple,style:styles.pill,onPress:_async_to_generator4(function*(){var link=checkForURL((yield import_common17.clipboard.getString())??"");(0,import_alerts.showInputAlert)({title:"Enter Repainter link",placeholder:"https://repainter.app/themes/123ABC",initialValue:link,confirmText:"Use",onConfirm:function(){var _ref=_async_to_generator4(function*(i){var link2=checkForURL(i);if(!link2)throw new Error("No Repainter link found!");var theme=parseTheme(yield fetchRawTheme(link2));vstorage.colors=theme.colors,(0,import_toasts9.showToast)("Imported Repainter theme",RepainterIcon_default)});return function(i){return _ref.apply(this,arguments)}}(),confirmColor:"brand",cancelText:"Cancel"})})},import_common17.React.createElement(import_common17.ReactNative.Image,{source:RepainterIcon_default,style:styles.labelIcon,resizeMode:"cover"}),import_common17.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_NORMAL"},"Use Repainter theme"))),import_common17.React.createElement(import_common17.ReactNative.View,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"}},import_common17.React.createElement(Color_default,{title:"Neutral",color:vstorage.colors.neutral1,update:c=>vstorage.colors.neutral1=c}),import_common17.React.createElement(Color_default,{title:"Neutral variant",color:vstorage.colors.neutral2,update:c=>vstorage.colors.neutral2=c}),import_common17.React.createElement(Color_default,{title:"Primary",color:vstorage.colors.accent1,update:c=>vstorage.colors.accent1=c}),import_common17.React.createElement(Color_default,{title:"Secondary",color:vstorage.colors.accent2,update:c=>vstorage.colors.accent2=c}),import_common17.React.createElement(Color_default,{title:"Tertiary",color:vstorage.colors.accent3,update:c=>vstorage.colors.accent3=c}))),import_common17.React.createElement(BetterTableRowTitle,{title:"Theme",icon:(0,import_assets9.getAssetIDByName)("SettingsIcon"),onPress:()=>{if(lastThemePressTime.current>=Date.now()){lastThemePressTime.current=0;var otter=vstorage.patches.from==="local"?"git":"local";(0,import_toasts9.showToast)(`Switched to ${otter==="git"?"GitHub":"local"} patches`,(0,import_assets9.getAssetIDByName)("RetryIcon")),vstorage.patches.from=otter,revalidatePatches()}else lastThemePressTime.current=Date.now()+750},padding:!0}),commits?Array.isArray(commits)?import_common17.React.createElement(ContextMenu,{title:"Patches",items:[{label:"Use latest",variant:"default",action:()=>(vstorage.patches.commit=void 0,(0,import_toasts9.showToast)("Using latest commit for patches",(0,import_assets9.getAssetIDByName)("ArrowAngleLeftUpIcon"))),iconSource:(0,import_assets9.getAssetIDByName)("ArrowAngleLeftUpIcon")}],triggerOnLongPress:!0},props=>import_common17.React.createElement(Commit,{commit:commits.find(x=>x.sha===vstorage.patches.commit)??commits[0],onPress:()=>navigation.push("VendettaCustomPage",{render:CommitsPage}),contextProps:props})):import_common17.React.createElement(import_common17.ReactNative.View,{style:{marginTop:35,marginBottom:20,flexDirection:"column",justifyContent:"center",alignItems:"center"}},import_common17.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_DANGER",align:"center"},"You've been ratelimited by GitHub."),import_common17.React.createElement(Text,{variant:"text-md/semibold",color:"TEXT_DANGER",align:"center",onPress:revalidateCommits},import_common17.React.createElement(RichText.Underline,null,"Tap to retry"))):import_common17.React.createElement(Skeleton,{height:79.54,style:{marginHorizontal:16}}),patches2?import_common17.React.createElement(BetterTableRowGroup,{nearby:!0},import_common17.React.createElement(FormRow2,{label:"Load Theme",leading:import_common17.React.createElement(FormRow2.Icon,{source:(0,import_assets9.getAssetIDByName)("WrenchIcon")}),trailing:import_common17.React.createElement(IconButton,{onPress:()=>apply(null)&&setIsLoadedTheme(!1),disabled:!isLoadedTheme,size:"sm",variant:isLoadedTheme?"destructive":"secondary",icon:(0,import_assets9.getAssetIDByName)("TrashIcon")}),onPress:_async_to_generator4(function*(){var theme;try{theme=build(patches2)}catch(e){var err=e instanceof Error?e:new Error(String(e));import_vendetta4.logger.error("Error during applying theme",err.stack),(0,import_toasts9.showToast)(String(err),(0,import_assets9.getAssetIDByName)("CircleXIcon-primary"));return}apply(theme)&&setIsLoadedTheme(!0)})}),import_common17.React.createElement(FormRow2,{label:"Configure Theme",leading:import_common17.React.createElement(FormRow2.Icon,{source:(0,import_assets9.getAssetIDByName)("SettingsIcon")}),trailing:import_common17.React.createElement(FormRow2.Arrow,null),onPress:()=>{openConfigurePage(navigation)}}),import_common17.React.createElement(FormSwitchRow,{label:"Automatically Reapply Theme",subLabel:"Automatically reapplies Monet Theme when you change your Discord color scheme or restart the app",leading:import_common17.React.createElement(FormRow2.Icon,{source:(0,import_assets9.getAssetIDByName)("DownloadIcon")}),onValueChange:()=>vstorage.reapply.enabled=!vstorage.reapply.enabled,value:vstorage.reapply.enabled}),import_common17.React.createElement(FormRow2,{label:"Reload Theme Patches",subLabel:`Patch v${patches2.version} (${vstorage.patches.from==="local"?"from a local source":"from GitHub"})`,leading:import_common17.React.createElement(FormRow2.Icon,{source:(0,import_assets9.getAssetIDByName)("ActivitiesIcon")}),onPress:revalidatePatches})):import_common17.React.createElement(Skeleton,{height:308.36,style:{marginHorizontal:16,marginTop:8}}),import_common17.React.createElement(import_common17.ReactNative.View,{style:{height:12}}))};function asyncGeneratorStep5(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator5(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep5(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep5(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var patchesURL=()=>`https://raw.githubusercontent.com/nexpid/VendettaMonetTheme/${vstorage.patches.commit??"main"}/patches.jsonc`,devPatchesURL="http://192.168.2.22:8730/patches.jsonc",ThemeStore2=(0,import_metro7.findByStoreName)("ThemeStore"),getSysColors=()=>window.__vendetta_syscolors,hasThemeKey=Symbol.for("monettheme.isThemed"),hasTheme=()=>{var{bunny,[hasThemeKey]:isThemed}=window;return!bunny.themes.getCurrentTheme()&&(bunny.themes.getThemeFromLoader()?.id==="monet-theme"||isThemed)},vstorage=import_plugin.storage,patches=new Array,src_default={settings:Settings_default,onLoad:_async_to_generator5(function*(){var syscolors=getSysColors();vstorage.colors??={neutral1:syscolors?.neutral1[7]??"#747679",neutral2:syscolors?.neutral2[7]??"#70777C",accent1:syscolors?.accent1[7]??"#007FAC",accent2:syscolors?.accent2[7]??"#657985",accent3:syscolors?.accent3[7]??"#787296"},vstorage.config??={wallpaper:"none",custom:[]},vstorage.patches??={from:"git"};var lTheme=getDiscordTheme(),oldColors=vstorage.reapply?.cache?.colors,oldTheme=vstorage.reapply?.cache?.theme;vstorage.reapply??={enabled:!1,cache:{colors:JSON.stringify(syscolors),theme:lTheme}},vstorage.reapply.cache={colors:JSON.stringify(syscolors),theme:lTheme};var reapply=function(){var _ref=_async_to_generator5(function*(){if(!(!vstorage.reapply.enabled||!hasTheme())){(0,import_toasts10.showToast)("Reapplying Monet Theme",(0,import_assets10.getAssetIDByName)("RetryIcon"));var cpatches=yield usePatches_default.patches;if(!cpatches)return(0,import_toasts10.showToast)("Failed to fetch color patches!",(0,import_assets10.getAssetIDByName)("CircleXIcon-primary"));var theme;try{theme=build(cpatches)}catch{(0,import_toasts10.showToast)("Failed to build theme!",(0,import_assets10.getAssetIDByName)("CircleXIcon-primary"));return}apply(theme)}});return function(){return _ref.apply(this,arguments)}}();oldTheme&&oldColors&&syscolors&&(vstorage.reapply.cache.colors!==oldColors||vstorage.reapply.cache.theme!==oldTheme)&&reapply();var onThemeChanged=()=>{var newLTheme=getDiscordTheme();lTheme!==newLTheme&&reapply(),lTheme=newLTheme};ThemeStore2.addChangeListener(onThemeChanged),patches.push(()=>ThemeStore2.removeChangeListener(onThemeChanged))}),onUnload:()=>{for(var x of patches)x();hasTheme()&&(0,import_alerts2.showConfirmationAlert)({title:"Deselect Theme",content:"Monet theme is currently selected, would you like to deselect it?",onConfirm:_async_to_generator5(function*(){apply(null)}),confirmText:"Unload",confirmColor:"brand",cancelText:"Cancel"})}};return __toCommonJS(src_exports);})();
/**
 * refined-github
 *
 * @copyright Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)
 * @link https://github.com/refined-github/refined-github/blob/4cb77df3ccf6da9de3b2427e841ad5d2afa25f35/source/helpers/conventional-commits.ts
 * @license MIT
 */
return $;})();
