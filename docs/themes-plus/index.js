(()=>{
"use strict";var $=(()=>{var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __esm=(fn,res)=>function(){return fn&&(res=(0,fn[__getOwnPropNames(fn)[0]])(fn=0)),res};var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __export=(target,all2)=>{for(var name in all2)__defProp(target,name,{get:all2[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(var keys=__getOwnPropNames(from),i=0,n=keys.length,key;i<n;i++)key=keys[i],!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:(k=>from[k]).bind(null,key),enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var define_DEFAULT_LANG_default,init_define_DEFAULT_LANG=__esm({"<define:DEFAULT_LANG>"(){define_DEFAULT_LANG_default={"plugin.name":"Themes+","settings.header":"Themes+ is **{active, select, true {active} false {inactive} other {}}**","settings.reload":"Reload","settings.inactive.no_theme":"No theme is selected","settings.inactive.themes_plus_unsupported":"The selected theme doesn't support Themes+","settings.inactive.no_iconpacks_list":"Couldn't fetch list of iconpacks","settings.inactive.no_iconpack_config":"Couldn't fetch selected iconpack config","settings.inactive.no_iconpack_files":"Couldn't fetch selected iconpack files","settings.patch.icons":"Custom icon colors","settings.patch.custom_icon_overlays":"Custom icon overlays","settings.patch.mention_line_color":"Custom message mention line color","settings.patch.iconpack":"Custom iconpack","sheet.iconpack_info.authors":"Authors","sheet.iconpack_info.source":"Source","modal.config.title":"Configuration","modal.config.iconpack.title":"Iconpack","modal.config.iconpack.mode":"Mode","modal.config.iconpack.mode.automatic":"Automatic","modal.config.iconpack.mode.automatic.desc":"Iconpack chosen by your current theme","modal.config.iconpack.mode.manual":"Manual","modal.config.iconpack.mode.manual.desc":"Choose an iconpack manually","modal.config.iconpack.mode.disabled":"Disabled","modal.config.iconpack.mode.disabled.desc":"Use Discord's default icons","modal.config.iconpack.choose":"Iconpack","modal.config.iconpack.choose.custom":"Custom","modal.config.iconpack.custom.url":"URL","modal.config.iconpack.custom.url.desc":"The main URL where all icons are located","modal.config.iconpack.custom.suffix":"Filename Suffix","modal.config.iconpack.custom.suffix.desc":"Appends a string after the icon name for compability with iOs based iconpacks. **Avoid** using this in new iconpacks.","modal.config.iconpack.custom.config.bigger_status":"Bigger status icons","modal.config.iconpack.custom.config.bigger_status.desc":"Makes status icons a bit bigger for compability. **Avoid** using this in new iconpacks.","modal.config.iconpack.custom.preview":"Preview icon","alert.downloadpack.title":"Download iconpack","alert.downloadpack.body":"Are you sure you want to download **{iconpack}**? This will take up **{space}**.","alert.downloadpack.confirm":"Download","alert.downloadpack.cancel":"Cancel","alert.downloadpack.dontshowagain_toggle":"Don't show again"}}});var require_plugin=__commonJS({"vendetta:@vendetta/plugin"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.plugin}});var require_metro=__commonJS({"vendetta:@vendetta/metro"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.metro}});var require_common=__commonJS({"vendetta:@vendetta/metro/common"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.metro.common}});var require_assets=__commonJS({"vendetta:@vendetta/ui/assets"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui.assets}});var require_toasts=__commonJS({"vendetta:@vendetta/ui/toasts"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui.toasts}});var require_ui=__commonJS({"vendetta:@vendetta/ui"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui}});var require_patcher=__commonJS({"vendetta:@vendetta/patcher"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.patcher}});var require_storage=__commonJS({"vendetta:@vendetta/storage"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.storage}});var require_components=__commonJS({"vendetta:@vendetta/ui/components"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui.components}});var require_utils=__commonJS({"vendetta:@vendetta/utils"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.utils}});var require_alerts=__commonJS({"vendetta:@vendetta/ui/alerts"(exports,module){init_define_DEFAULT_LANG();module.exports=vendetta.ui.alerts}});var src_exports={};__export(src_exports,{ConfigIconpackMode:()=>ConfigIconpackMode,InactiveReason:()=>InactiveReason,PatchType:()=>PatchType,default:()=>src_default,enabled:()=>enabled,lang:()=>lang,vstorage:()=>vstorage});init_define_DEFAULT_LANG();var import_plugin=__toESM(require_plugin(),1);init_define_DEFAULT_LANG();var import_metro3=__toESM(require_metro(),1),import_common3=__toESM(require_common(),1);init_define_DEFAULT_LANG();var import_metro=__toESM(require_metro(),1),import_common=__toESM(require_common(),1),import_assets=__toESM(require_assets(),1),import_toasts=__toESM(require_toasts(),1),ThemeStore=(0,import_metro.findByStoreName)("ThemeStore"),{triggerHaptic}=(0,import_metro.findByProps)("triggerHaptic"),colorModule=(0,import_metro.findByProps)("colors","unsafe_rawColors"),colorResolver=colorModule?.internal??colorModule?.meta,{useThemeContext}=(0,import_metro.findByProps)("useThemeContext"),TextStyleSheet=(0,import_metro.findByProps)("TextStyleSheet").TextStyleSheet,Navigator=(0,import_metro.findByProps)("Navigator")?.Navigator,modalCloseButton=(0,import_metro.findByProps)("getHeaderCloseButton")?.getHeaderCloseButton,{popModal,pushModal}=(0,import_metro.findByProps)("popModal","pushModal");function resolveSemanticColor(color,theme=ThemeStore.theme){return colorResolver?.resolveSemanticColor(theme,color)}function openModal(key,modal){var empty=Symbol("empty");if(!Navigator||!modalCloseButton){(0,import_toasts.showToast)(`${[Navigator?empty:"Navigator",modalCloseButton?empty:"modalCloseButton"].filter(x=>x!==empty).join(", ")} is missing! Please try reinstalling your client.`,(0,import_assets.getAssetIDByName)("CircleXIcon-primary"));return}pushModal({key,modal:{key,modal,animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}function androidifyColor(color,alpha=255){var[_,r,g,b]=color.match(/#([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})/i)??[];return _?(alpha&255)<<24|(Number.parseInt(r,16)&255)<<16|(Number.parseInt(g,16)&255)<<8|Number.parseInt(b,16)&255:0}function fluxSubscribe(topic,callback,once){var cback=data=>(callback(data),once&&import_common.FluxDispatcher.unsubscribe(topic,cback));return import_common.FluxDispatcher.subscribe(topic,cback),()=>import_common.FluxDispatcher.unsubscribe(topic,cback)}function formatBytes(bytes){var sizes=["B","KB","MB","GB","TB"];if(bytes===0)return"0 B";var i=Math.floor(Math.log(bytes)/Math.log(1024));return`${(bytes/1024**i).toFixed(2)} ${sizes[i]}`}init_define_DEFAULT_LANG();init_define_DEFAULT_LANG();var import_meta={};function createJSONStorage(getStorage,options){var storage2;try{storage2=getStorage()}catch{return}var persistStorage={getItem:name=>{var _a,parse=str2=>str2===null?null:JSON.parse(str2,options?.reviver),str=(_a=storage2.getItem(name))!=null?_a:null;return str instanceof Promise?str.then(parse):parse(str)},setItem:(name,newValue)=>storage2.setItem(name,JSON.stringify(newValue,options?.replacer)),removeItem:name=>storage2.removeItem(name)};return persistStorage}var toThenable=fn=>input=>{try{var result=fn(input);return result instanceof Promise?result:{then(onFulfilled){return toThenable(onFulfilled)(result)},catch(_onRejected){return this}}}catch(e){return{then(_onFulfilled){return this},catch(onRejected){return toThenable(onRejected)(e)}}}},oldImpl=(config,baseOptions)=>(set,get,api)=>{var options={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:state2=>state2,version:0,merge:(persistedState,currentState)=>({...currentState,...persistedState}),...baseOptions},hasHydrated=!1,hydrationListeners=new Set,finishHydrationListeners=new Set,storage2;try{storage2=options.getStorage()}catch{}if(!storage2)return config((...args)=>{console.warn(`[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`),set(...args)},get,api);var thenableSerialize=toThenable(options.serialize),setItem=()=>{var state2=options.partialize({...get()}),errorInSync,thenable=thenableSerialize({state:state2,version:options.version}).then(serializedValue=>storage2.setItem(options.name,serializedValue)).catch(e=>{errorInSync=e});if(errorInSync)throw errorInSync;return thenable},savedSetState=api.setState;api.setState=(state2,replace)=>{savedSetState(state2,replace),setItem()};var configResult=config((...args)=>{set(...args),setItem()},get,api),stateFromStorage,hydrate=()=>{var _a;if(storage2){hasHydrated=!1,hydrationListeners.forEach(cb=>cb(get()));var postRehydrationCallback=((_a=options.onRehydrateStorage)==null?void 0:_a.call(options,get()))||void 0;return toThenable(storage2.getItem.bind(storage2))(options.name).then(storageValue=>{if(storageValue)return options.deserialize(storageValue)}).then(deserializedStorageValue=>{if(deserializedStorageValue)if(typeof deserializedStorageValue.version=="number"&&deserializedStorageValue.version!==options.version){if(options.migrate)return options.migrate(deserializedStorageValue.state,deserializedStorageValue.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return deserializedStorageValue.state}).then(migratedState=>{var _a2;return stateFromStorage=options.merge(migratedState,(_a2=get())!=null?_a2:configResult),set(stateFromStorage,!0),setItem()}).then(()=>{postRehydrationCallback?.(stateFromStorage,void 0),hasHydrated=!0,finishHydrationListeners.forEach(cb=>cb(stateFromStorage))}).catch(e=>{postRehydrationCallback?.(void 0,e)})}};return api.persist={setOptions:newOptions=>{options={...options,...newOptions},newOptions.getStorage&&(storage2=newOptions.getStorage())},clearStorage:()=>{storage2?.removeItem(options.name)},getOptions:()=>options,rehydrate:()=>hydrate(),hasHydrated:()=>hasHydrated,onHydrate:cb=>(hydrationListeners.add(cb),()=>{hydrationListeners.delete(cb)}),onFinishHydration:cb=>(finishHydrationListeners.add(cb),()=>{finishHydrationListeners.delete(cb)})},hydrate(),stateFromStorage||configResult},newImpl=(config,baseOptions)=>(set,get,api)=>{var options={storage:createJSONStorage(()=>localStorage),partialize:state2=>state2,version:0,merge:(persistedState,currentState)=>({...currentState,...persistedState}),...baseOptions},hasHydrated=!1,hydrationListeners=new Set,finishHydrationListeners=new Set,storage2=options.storage;if(!storage2)return config((...args)=>{console.warn(`[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`),set(...args)},get,api);var setItem=()=>{var state2=options.partialize({...get()});return storage2.setItem(options.name,{state:state2,version:options.version})},savedSetState=api.setState;api.setState=(state2,replace)=>{savedSetState(state2,replace),setItem()};var configResult=config((...args)=>{set(...args),setItem()},get,api);api.getInitialState=()=>configResult;var stateFromStorage,hydrate=()=>{var _a,_b;if(storage2){hasHydrated=!1,hydrationListeners.forEach(cb=>{var _a2;return cb((_a2=get())!=null?_a2:configResult)});var postRehydrationCallback=((_b=options.onRehydrateStorage)==null?void 0:_b.call(options,(_a=get())!=null?_a:configResult))||void 0;return toThenable(storage2.getItem.bind(storage2))(options.name).then(deserializedStorageValue=>{if(deserializedStorageValue)if(typeof deserializedStorageValue.version=="number"&&deserializedStorageValue.version!==options.version){if(options.migrate)return[!0,options.migrate(deserializedStorageValue.state,deserializedStorageValue.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,deserializedStorageValue.state];return[!1,void 0]}).then(migrationResult=>{var _a2,[migrated,migratedState]=migrationResult;if(stateFromStorage=options.merge(migratedState,(_a2=get())!=null?_a2:configResult),set(stateFromStorage,!0),migrated)return setItem()}).then(()=>{postRehydrationCallback?.(stateFromStorage,void 0),stateFromStorage=get(),hasHydrated=!0,finishHydrationListeners.forEach(cb=>cb(stateFromStorage))}).catch(e=>{postRehydrationCallback?.(void 0,e)})}};return api.persist={setOptions:newOptions=>{options={...options,...newOptions},newOptions.storage&&(storage2=newOptions.storage)},clearStorage:()=>{storage2?.removeItem(options.name)},getOptions:()=>options,rehydrate:()=>hydrate(),hasHydrated:()=>hasHydrated,onHydrate:cb=>(hydrationListeners.add(cb),()=>{hydrationListeners.delete(cb)}),onFinishHydration:cb=>(finishHydrationListeners.add(cb),()=>{finishHydrationListeners.delete(cb)})},options.skipHydration||hydrate(),stateFromStorage||configResult},persistImpl=(config,baseOptions)=>"getStorage"in baseOptions||"serialize"in baseOptions||"deserialize"in baseOptions?((import_meta.env?import_meta.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(config,baseOptions)):newImpl(config,baseOptions),persist=persistImpl;init_define_DEFAULT_LANG();var constants_default={github:{url:"https://github.com/nexpid/BunnyPlugins/tree/main/",raw:"https://raw.githubusercontent.com/nexpid/BunnyPlugins/main/"}};init_define_DEFAULT_LANG();var import_metro2=__toESM(require_metro(),1),import_common2=__toESM(require_common(),1);var WebView=(0,import_metro2.find)(x=>x?.WebView&&!x.default).WebView,Svg=(0,import_metro2.findByProps)("SvgXml"),Reanimated=(0,import_metro2.findByProps)("useSharedValue"),FlashList=(0,import_metro2.findByProps)("FlashList").FlashList,{default:Video}=(0,import_metro2.findByProps)("DRMType","FilterType"),Joi=(0,import_metro2.findByProps)("isJoi"),zustand=(0,import_metro2.findByProps)("create","useStore")??{create:(0,import_metro2.findByName)("create")},DocumentPicker=(0,import_metro2.findByProps)("pickSingle","isCancel"),_MAS=(0,import_metro2.findByProps)("MobileAudioSound").MobileAudioSound;var RNCacheModule=import_common2.ReactNative.NativeModules.MMKVManager??import_common2.ReactNative.NativeModules.NativeCacheModule,RNChatModule=import_common2.ReactNative.NativeModules.DCDChatManager??import_common2.ReactNative.NativeModules.NativeChatModule,RNFileModule=import_common2.ReactNative.NativeModules.RTNFileManager??import_common2.ReactNative.NativeModules.DCDFileManager??import_common2.ReactNative.NativeModules.NativeFileModule;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var useLangStore=zustand.create(persist((set,get)=>({values:{},lastModified:null,update:function(){var _ref=_async_to_generator(function*(plugin){var res=yield fetch(`${constants_default.github.raw}lang/values/${plugin.toString()}.json`,{headers:{"if-modified-since":get().lastModified}});if(res.ok){var values=yield res.json();set({lastModified:res.headers.get("last-modified"),values})}});return function(plugin){return _ref.apply(this,arguments)}}()}),{name:"nexpid-lang",storage:createJSONStorage(()=>RNCacheModule),partialize:state2=>({values:state2.values,lastModified:state2.lastModified}),onRehydrateStorage:()=>()=>RNCacheModule.removeItem("nexpid-lang")}));function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var IntlMessageFormat=(0,import_metro3.findByName)("MessageFormat"),Lang=function(){"use strict";function Lang2(plugin){_class_call_check(this,Lang2),_define_property(this,"plugin",void 0),_define_property(this,"_unload",void 0),_define_property(this,"Values",void 0),this.plugin=plugin,useLangStore.persist.setOptions({name:`nexpid-lang-${plugin.toString()}`,onRehydrateStorage:()=>state2=>state2?.update(this.plugin)}),useLangStore.persist.rehydrate(),this._unload=fluxSubscribe("I18N_LOAD_SUCCESS",()=>void useLangStore.persist.rehydrate())}return _create_class(Lang2,[{key:"unload",value:function(){this._unload()}},{key:"format",value:function(_key,input){var key=_key,locale=Lang2.getLang(),{values}=useLangStore.getState();if(!values)return String(key);var val=values[locale]?.[key]??values.en?.[key]??define_DEFAULT_LANG_default?.[key];return val?Object.keys(input).length>0?new IntlMessageFormat(val).format(input):val:String(key)}}],[{key:"getLang",value:function(){var lang2=import_common3.i18n.getLocale()?.replace(/-/g,"_")??"en";return lang2.startsWith("en_")?"en":lang2}},{key:"basicFormat",value:function(text){var rules=[{regex:/\*\*(.*?)\*\*/g,react:txt2=>React.createElement(import_common3.ReactNative.Text,{style:{fontWeight:"900"}},txt2)}],txt=text.split(""),off=0;for(var rule of rules){var matches=Array.from(text.matchAll(rule.regex));for(var match of matches)match[1]&&match.index&&(txt.splice(match.index-off,match[0].length,rule.react(match[1])),off+=match[0].length-1)}return txt}}]),Lang2}();init_define_DEFAULT_LANG();var import_common16=__toESM(require_common(),1),import_ui5=__toESM(require_ui(),1),import_assets7=__toESM(require_assets(),1);init_define_DEFAULT_LANG();var import_metro4=__toESM(require_metro(),1),import_common4=__toESM(require_common(),1),import_ui=__toESM(require_ui(),1);var{useThemeContext:useThemeContext2}=(0,import_metro4.findByProps)("useThemeContext");function Text({variant,lineClamp,color,align,style,onPress,getChildren,children,liveUpdate,ellipsis}){var themeContext=useThemeContext2(),[_,forceUpdate]=import_common4.React.useReducer(x=>~x,0);return import_common4.React.useEffect(()=>{if(liveUpdate){var nextSecond=()=>Date.now()-new Date().setMilliseconds(1e3),timeout=setTimeout(function update(){forceUpdate(),timeout=setTimeout(update,nextSecond())},nextSecond());return()=>clearTimeout(timeout)}},[]),import_common4.React.createElement(import_common4.ReactNative.Text,{style:[variant&&TextStyleSheet[variant],color?{color:resolveSemanticColor(import_ui.semanticColors[color],themeContext?.theme)}:{},align&&{textAlign:align},style??{}],numberOfLines:lineClamp,onPress,ellipsizeMode:ellipsis},getChildren?.()??children)}init_define_DEFAULT_LANG();var import_metro5=__toESM(require_metro(),1),import_common5=__toESM(require_common(),1),import_toasts2=__toESM(require_toasts(),1),NotFound=(prop,isFunction)=>()=>{var trigger=()=>{(0,import_toasts2.showToast)(`${prop} not found! Search for PNF in Debug Logs!`),console.warn(`!! PNF ERROR !!
Missing the redesign ${isFunction?"function":"component"}: ${prop}. Please bug @nexpid about this on Discord!`)};return isFunction?trigger():import_common5.React.useEffect(trigger,[]),null},findProp=(...props)=>(0,import_metro5.findByProps)(...props)?.[props[0]],findPropPolyfill=(isFunction,...props)=>findProp(...props)??NotFound(props[0],isFunction),Button=findPropPolyfill(!1,"Button"),RowButton=findPropPolyfill(!1,"RowButton"),FloatingActionButton=findPropPolyfill(!1,"FloatingActionButton"),PressableScale=findPropPolyfill(!1,"PressableScale"),IconButton=findPropPolyfill(!1,"IconButton"),ContextMenu=findPropPolyfill(!1,"ContextMenu"),_Slider=findPropPolyfill(!1,"Slider");var TextInput=findPropPolyfill(!1,"TextInput"),Tabs=findPropPolyfill(!1,"Tabs"),SegmentedControlPages=findPropPolyfill(!1,"SegmentedControlPages"),Card=findPropPolyfill(!1,"Card"),Stack=findPropPolyfill(!1,"Stack"),useSegmentedControlState=findPropPolyfill(!0,"useSegmentedControlState");init_define_DEFAULT_LANG();var import_common6=__toESM(require_common(),1),state={loading:!0,active:!1,iconpack:{iconpack:void 0,list:[],hashes:{}},patches:[],inactive:[]},stateUsers=new Array;function useState(){var[_,forceUpdate]=import_common6.React.useReducer(x=>~x,0);import_common6.React.useEffect(()=>{var func=()=>{forceUpdate()};return stateUsers.push(func),()=>{stateUsers=stateUsers.filter(x=>x!==func)}},[])}function updateState(){for(var x of stateUsers)x()}init_define_DEFAULT_LANG();var import_metro9=__toESM(require_metro(),1);init_define_DEFAULT_LANG();var import_metro7=__toESM(require_metro(),1),import_common8=__toESM(require_common(),1),import_patcher=__toESM(require_patcher(),1),import_assets4=__toESM(require_assets(),1);init_define_DEFAULT_LANG();var import_common7=__toESM(require_common(),1),import_assets2=__toESM(require_assets(),1);init_define_DEFAULT_LANG();var check_default={uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFbSURBVHhe7dfhTcMwEIbhjNAROgFiAlZgBNiAERilGzACIzACI7CC+Y7coUq4qU36x773kawqqRvlXlVVugAAAAAAAAAAANxEKeXVlh/inMcJL34aRkHO44Rnfzs3hajFCbkjKcBWnJAzkgZviRNyRdLAPXHMo390fhr2aZ25WZ5vj4YlziUaljiXaNjeOOM9KOqmj1ofWvd+qon232n1GO+vhm7a4nz+3H4pX1pNkbTP4tj+VsPHCTb00bdU6f20cYKdr0bS+fRxwp9Idqw1fZyD1rU44TeSvfpxq/HiBN38aZ2hiUV58NdW48YJGqInUo/x4wQNc+tIJ7/0PDTU+zrbbvPFMRrMfrTtKXqPOeMEDbgn0ptfZm4a9D+RbP/BLzE/G9aHbpErTtDQLQ+EOeMEDb8VKXecoAi1SHa8+U8/FYvhUQxxaiyKlj1MEgcAAAAAAAAAAFyzLN9AUkswJG5BbwAAAABJRU5ErkJggg==",width:72,height:72,file:null,allowIconTheming:!1};init_define_DEFAULT_LANG();var import_metro6=__toESM(require_metro(),1),import_ui2=__toESM(require_ui(),1);var ThemeStore2=(0,import_metro6.findByStoreName)("ThemeStore");function matchTheme(colors){var{theme}=ThemeStore2;return theme in colors?colors[theme]:["dark","midnight"].includes(theme)?colors.darker:colors.light}function resolveColor_default(color){if(Array.isArray(color))return matchTheme({darker:color[0],light:color[1],midnight:color[2]});if(color.startsWith("SC_"))return import_ui2.semanticColors[color.slice(3)]?resolveSemanticColor(import_ui2.semanticColors[color.slice(3)]):"#ffffff";if(color.startsWith("RC_"))return import_ui2.rawColors[color.slice(3)]??"#ffffff";if(color.startsWith("#")&&color.length===4)return`#${color[1].repeat(2)}${color[2].repeat(2)}${color[3].repeat(2)}`;if(color.startsWith("#")&&color.length===7)return color}function getIconTint(plus,icon,customName){var name=customName??(0,import_assets2.getAssetByID)(icon)?.name;if(name&&plus.icons?.[name])return resolveColor_default(plus.icons[name])}function asIcon(plus,customName,img){if(typeof img.props.source=="number"){var clr=getIconTint(plus,img.props.source,customName);clr&&(img.props.style=[img.props.style,{tintColor:clr}])}return img.props.ignore=!0,img}function getIconOverlay(plus,icon,style){var ic=(0,import_assets2.getAssetByID)(icon)?.name;if(ic){if(["ic_radio_circle_checked","ic_radio_square_checked_24px","ic_selection_checked_24px"].includes(ic))return{style:{tintColor:"#5865F2"},children:React.createElement(import_common7.ReactNative.View,{style:{position:"absolute",left:0,top:0}},asIcon(plus,`${ic}__overlay`,React.createElement(import_common7.ReactNative.Image,{source:check_default,style:[style,{tintColor:"#FFF"}]})))};if(["app_installed_check","ic_radio_circle_checked_green"].includes(ic))return{style:{tintColor:"#3BA55C"},children:React.createElement(import_common7.ReactNative.View,{style:{position:"absolute",left:0,top:0}},asIcon(plus,`${ic}__overlay`,React.createElement(import_common7.ReactNative.Image,{source:check_default,style:[style,{tintColor:"#FFF"}]})))}}}init_define_DEFAULT_LANG();var modIcons_default={bunny:{source:"https://raw.githubusercontent.com/bunny-mod/Bunny/main/src/assets/icons/pyoncord.png",raw:"data:image/png;base64,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"},revenge:{source:"https://raw.githubusercontent.com/revenge-mod/revenge-bundle/main/src/assets/icons/revenge.png",raw:"data:image/png;base64,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"}};init_define_DEFAULT_LANG();var import_assets3=__toESM(require_assets(),1);init_define_DEFAULT_LANG();init_define_DEFAULT_LANG();var constants_default2={iconpacks:{list:"https://raw.githubusercontent.com/nexpid/ThemesPlus/main/iconpacks/list.json",assets:"https://raw.githubusercontent.com/nexpid/ThemesPlus/main/iconpacks/assets/",tree:iconpack=>`https://raw.githubusercontent.com/nexpid/ThemesPlus/iconpack-trees/${iconpack}.txt`,hashes:"https://raw.githubusercontent.com/nexpid/ThemesPlus/iconpack-trees/_hashes.txt"}};init_define_DEFAULT_LANG();init_define_DEFAULT_LANG();var useCacheStore=zustand.create(persist((set,get)=>({cache:{},isCached:link=>!!get().cache[link],writeCache:(link,data)=>{set({cache:{...get().cache,[link]:JSON.stringify(data)}})},readCache:link=>get().cache[link]?JSON.parse(get().cache[link]):null}),{name:"themes-plus-cache",storage:createJSONStorage(()=>RNCacheModule),partialize:state2=>({cache:state2.cache})}));function asyncGeneratorStep2(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator2(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep2(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep2(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function customUrl(){var{url:url2}=vstorage.iconpack.custom;return url2.length>1?url2.endsWith("/")?url2:`${url2}/`:""}function fixPath(path){return path.startsWith("../")?`_/${path.slice(3)}`:path}function flattenFilePath(path){return path.replace(/[\\/]/g,"_").replace(/-/g,"")}function cFetch(url2,init){return _cFetch.apply(this,arguments)}function _cFetch(){return _cFetch=_async_to_generator2(function*(url2,init,format="text"){var cache=useCacheStore.getState(),rawUrl=typeof url2=="string"?url2:url2.url,res=yield fetch(url2,init),ret;if(res.status!==200)if(cache.isCached(rawUrl))ret=cache.readCache(rawUrl);else throw new Error(`Failed to fetch ${rawUrl}`);else ret=yield res.text(),cache.writeCache(rawUrl,ret);return format==="json"?JSON.parse(ret):ret}),_cFetch.apply(this,arguments)}function asyncGeneratorStep3(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator3(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep3(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep3(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function getIconpackData(id,configUrl){return _getIconpackData.apply(this,arguments)}function _getIconpackData(){return _getIconpackData=_async_to_generator3(function*(id,configUrl){var treeUrl=constants_default2.iconpacks.tree(id),[config,tree]=yield Promise.allSettled([configUrl?cFetch(configUrl,void 0,"json"):new Promise(res=>res(Symbol())),cFetch(treeUrl).then(x=>x.replaceAll("\r","").split(`
`))]);return{config:config.status==="fulfilled"&&typeof config.value!="symbol"?config.value:null,tree:tree.status==="fulfilled"?tree.value:null}}),_getIconpackData.apply(this,arguments)}function asyncGeneratorStep4(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator4(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep4(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep4(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var iconsPath="pyoncord/downloads/themesplus/",fullIconsPath=`${RNFileModule.DocumentsDirPath}/${iconsPath}`;function isPackInstalled(pack){return _isPackInstalled.apply(this,arguments)}function _isPackInstalled(){return _isPackInstalled=_async_to_generator4(function*(pack){if((yield RNFileModule.fileExists(`${fullIconsPath}${pack.id}.hash`))&&state.iconpack.hashes[pack.id]?.hash){var hash=yield RNFileModule.readFile(`${fullIconsPath}${pack.id}.hash`,"utf8");return state.iconpack.hashes[pack.id]?.hash===hash?!0:"outdated"}return!1}),_isPackInstalled.apply(this,arguments)}function installIconpack(pack,signal,progress){return _installIconpack.apply(this,arguments)}function _installIconpack(){return _installIconpack=_async_to_generator4(function*(pack,signal,progress){var{hash}=state.iconpack.hashes[pack.id];if(!hash)throw new Error("Iconpack is not hashed");var{tree}=yield getIconpackData(pack.id);if(!tree)throw new Error("Failed to get iconpack tree");yield RNFileModule.writeFile("documents",`${iconsPath}${pack.id}.hash`,hash,"utf8");var shouldDownload=Object.values(import_assets3.all).map(asset=>[...asset.httpServerLocation.split("/").slice(2),`${asset.name}${pack.suffix}.${asset.type}`].join("/")),toDownload=tree.filter(file=>shouldDownload.includes(file)).map(file=>[`${pack.load}/${file}`,`${iconsPath}${pack.id}/${flattenFilePath(file)}`,file]),incr=0,threadify=function(){var _ref=_async_to_generator4(function*(arr){var _loop=function*(from2,to2,raw2){if(signal?.aborted)throw new Error("Aborted");var blob=yield fetch(from2,{signal}).then(x=>x.blob()),result=yield new Promise((res,rej)=>{var reader=new FileReader;reader.addEventListener("error",()=>{rej(new Error(`Failed to get blob of ${raw2}`))}),reader.addEventListener("load",()=>{reader.result&&res(reader.result.toString())}),signal?.addEventListener("abort",()=>{reader.abort()}),reader.readAsDataURL(blob)});if(signal?.aborted)throw new Error("Aborted");var index=result.indexOf(";base64,");if(index===-1)throw new Error(`Failed to get base64 of ${raw2}`);var data=result.slice(index+8);if(yield RNFileModule.writeFile("documents",to2,data,"base64"),incr++,signal?.aborted)throw new Error("Aborted");progress?.(incr/toDownload.length)};for(var[from,to,raw]of arr)yield*_loop(from,to,raw)});return function(arr){return _ref.apply(this,arguments)}}();yield Promise.all(new Array(10).fill(0).map((_,i,a)=>{var quart=toDownload.length/a.length;return threadify(toDownload.slice(Math.floor(i*quart),Math.floor((i+1)*quart)))}))}),_installIconpack.apply(this,arguments)}function uninstallIconpack(pack){return _uninstallIconpack.apply(this,arguments)}function _uninstallIconpack(){return _uninstallIconpack=_async_to_generator4(function*(pack){yield RNFileModule.clearFolder("documents",`${iconsPath}${pack.id}`),yield RNFileModule.removeFile("documents",`${iconsPath}${pack.id}.hash`)}),_uninstallIconpack.apply(this,arguments)}var Status=(0,import_metro7.findByName)("Status",!1);function patchIcons(plus,tree,config){var{iconpack}=state.iconpack;config.biggerStatus&&patches.push((0,import_patcher.before)("default",Status,([props],...args)=>[{...props,size:Math.floor(props.size*1.5)},...args]));var isInstalled=!1;isPackInstalled(iconpack).then(x=>isInstalled=x===!0),(plus.icons||plus.customOverlays||iconpack)&&(plus.icons&&state.patches.push(PatchType.Icons),plus.customOverlays&&state.patches.push(PatchType.CustomIconOverlays),iconpack&&state.patches.push(PatchType.Iconpack),patches.push((0,import_patcher.instead)("render",import_common8.ReactNative.Image,(_args,orig)=>{var args=_args.slice(),[props]=args;if(props.ignore)return orig(...args);var{source}=props,asset=null,modIcon=Object.entries(modIcons_default).find(([_,{raw}])=>source?.uri===raw);if(modIcon)asset={httpServerLocation:"//_",width:64,height:64,name:modIcon[0],type:"png"};else if(source&&typeof source.uri=="string"&&typeof source.width=="number"&&typeof source.height=="number"&&typeof source.file=="string"&&source.allowIconTheming){var[file,...parent]=source.file.split("/").reverse(),[ext,...base]=file.split(".").reverse();asset={httpServerLocation:`//_/external${parent[0]?"/":""}${parent.reverse().join("/")}`,width:source.width,height:source.height,name:base.reverse().join("."),type:ext}}else typeof source=="number"&&(asset=(0,import_assets4.getAssetByID)(source));if(!asset?.httpServerLocation)return orig(...args);var assetIconpackLocation=iconpack&&fixPath([...asset.httpServerLocation.split("/").slice(2),`${asset.name}${iconpack.suffix}.${asset.type}`].join("/")),useIconpack=assetIconpackLocation&&(tree.length?tree.includes(assetIconpackLocation):!0),overlay;if(plus.customOverlays&&!useIconpack&&typeof source=="number"&&(overlay=getIconOverlay(plus,source,props.style),overlay&&(overlay.replace&&(props.source=(0,import_assets4.getAssetIDByName)(overlay.replace)),overlay.style&&(props.style=[props.style,overlay.style]))),plus.icons){var tint=getIconTint(plus,source,asset.name);tint&&(props.style=[props.style,{tintColor:tint}])}useIconpack&&(props.source={uri:isInstalled?`file://${fullIconsPath}${iconpack.id}/${flattenFilePath(assetIconpackLocation)}`:iconpack.load+assetIconpackLocation,headers:{"cache-contorl":"public, max-age=3600"},width:asset.width,height:asset.height,original:props.source});var ret=orig(...args);return overlay?.children?import_common8.React.createElement(import_common8.ReactNative.View,null,ret,overlay.children):ret})))}init_define_DEFAULT_LANG();var import_metro8=__toESM(require_metro(),1),import_patcher2=__toESM(require_patcher(),1);var RowGeneratorUtils=(0,import_metro8.findByProps)("createBackgroundHighlight");function patchMentionLineColors(plus){plus.mentionLineColor&&(state.patches.push(PatchType.MentionLineColor),patches.push((0,import_patcher2.after)("createBackgroundHighlight",RowGeneratorUtils,([x],ret)=>{var clr=resolveColor_default(plus.mentionLineColor);x?.message?.mentioned&&clr&&(ret.gutterColor=androidifyColor(clr,200))})))}function asyncGeneratorStep5(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator5(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep5(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep5(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var UserStore=(0,import_metro9.findByStoreName)("UserStore"),patches=new Array;function load(){return _load.apply(this,arguments)}function _load(){return _load=_async_to_generator5(function*(){var{bunny}=window;for(var x of patches)x();patches.length=0,state.loading=!0,state.active=!1,state.iconpack={iconpack:void 0,list:[],hashes:{}},state.patches=[],state.inactive=[],updateState();try{state.iconpack={iconpack:void 0,list:yield cFetch(constants_default2.iconpacks.list,void 0,"json").then(res=>res.list),hashes:yield cFetch(constants_default2.iconpacks.hashes,void 0,"json")}}catch{if(!state.iconpack.list.length||!Object.keys(state.iconpack.hashes).length){state.loading=!1,state.inactive.push(InactiveReason.NoIconpacksList),updateState();return}}var selectedTheme=Object.values(bunny.themes.themes).find(x2=>x2.selected);if(!selectedTheme&&vstorage.iconpack.mode===ConfigIconpackMode.Manual)selectedTheme={data:{plus:{version:0}}};else if(!selectedTheme){state.loading=!1,state.inactive.push(InactiveReason.NoTheme),updateState();return}var plusData=selectedTheme.data?.plus;if(!plusData){state.loading=!1,state.inactive.push(InactiveReason.ThemesPlusUnsupported),updateState();return}var useIconpack=vstorage.iconpack.mode===ConfigIconpackMode.Automatic?plusData.iconpack:vstorage.iconpack.mode===ConfigIconpackMode.Manual?vstorage.iconpack.pack:void 0,isCustomIconpack=vstorage.iconpack.isCustom,user=UserStore.getCurrentUser();state.iconpack.iconpack=isCustomIconpack?{id:"custom-iconpack",name:"Custom iconpack",description:"A custom iconpack, created by you!",credits:{authors:[{name:user.username,id:user.id}],sources:["N/A"]},config:void 0,suffix:vstorage.iconpack.custom.suffix,load:customUrl()}:state.iconpack.list.find(x2=>useIconpack===x2.id);var iconpackConfig={biggerStatus:!1},tree=new Array;if(!isCustomIconpack&&state.iconpack.iconpack){var dt;try{dt=yield getIconpackData(state.iconpack.iconpack.id,state.iconpack.iconpack.config)}catch{dt={config:null,tree:null}}if(dt.tree===null){state.loading=!1,dt.config===null&&state.inactive.push(InactiveReason.NoIconpackConfig),dt.tree===null&&state.inactive.push(InactiveReason.NoIconpackFiles),updateState();return}tree=dt.tree,dt.config&&(iconpackConfig=dt.config)}else isCustomIconpack&&(iconpackConfig.biggerStatus=vstorage.iconpack.custom.config.biggerStatus);enabled&&(state.active=!0,state.loading=!1,patchIcons(plusData,tree,iconpackConfig),patchMentionLineColors(plusData),updateState())}),_load.apply(this,arguments)}init_define_DEFAULT_LANG();var import_common15=__toESM(require_common(),1),import_storage=__toESM(require_storage(),1),import_ui4=__toESM(require_ui(),1),import_assets6=__toESM(require_assets(),1),import_components3=__toESM(require_components(),1),import_toasts4=__toESM(require_toasts(),1);init_define_DEFAULT_LANG();var import_metro10=__toESM(require_metro(),1),import_common9=__toESM(require_common(),1),import_utils=__toESM(require_utils(),1),_ActionSheet=(0,import_metro10.findByProps)("ActionSheet")?.ActionSheet??(0,import_metro10.find)(x=>x.render?.name==="ActionSheet"),{ActionSheetTitleHeader,ActionSheetCloseButton}=(0,import_metro10.findByProps)("ActionSheetTitleHeader","ActionSheetCloseButton"),LazyActionSheet=(0,import_metro10.findByProps)("openLazy","hideActionSheet"),{openLazy,hideActionSheet}=LazyActionSheet,{showSimpleActionSheet}=(0,import_metro10.findByProps)("showSimpleActionSheet"),ActionSheet=props=>React.createElement(_ActionSheet,null,React.createElement(ActionSheetTitleHeader,{title:props.title,trailing:React.createElement(ActionSheetCloseButton,{onPress:props.onClose??(()=>{hideActionSheet()})})}),React.createElement(import_common9.ReactNative.View,(0,import_utils.without)(props,"title","onClose")));ActionSheet.open=(sheet,props)=>{openLazy(new Promise(res=>{res({default:sheet})}),"ActionSheet",props)};init_define_DEFAULT_LANG();var import_common10=__toESM(require_common(),1),import_ui3=__toESM(require_ui(),1);function BetterTableRowTitle({title,onPress,icon,padding}){var styles=import_common10.stylesheet.createThemedStyleSheet({androidRipple:{color:import_ui3.semanticColors.ANDROID_RIPPLE,cornerRadius:4},icon:{width:16,height:16,marginTop:1.5,tintColor:import_ui3.semanticColors.TEXT_MUTED}}),UseCompontent=onPress?import_common10.ReactNative.Pressable:import_common10.ReactNative.View;return React.createElement(UseCompontent,{android_ripple:styles.androidRipple,onPress,style:{marginBottom:8,marginHorizontal:padding?16:0,marginTop:padding?8:0,gap:4,flexDirection:"row",alignItems:"center"}},icon&&React.createElement(import_common10.ReactNative.Image,{style:styles.icon,source:icon,resizeMode:"cover"}),React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_MUTED"},title))}function BetterTableRowGroup({title,onTitlePress,icon,children,padding,nearby}){var styles=import_common10.stylesheet.createThemedStyleSheet({main:{backgroundColor:import_ui3.semanticColors.CARD_PRIMARY_BG,borderColor:import_ui3.semanticColors.BORDER_FAINT,borderWidth:1,borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(import_common10.ReactNative.View,{style:{marginHorizontal:16,marginTop:nearby?8:16}},title?typeof title=="string"?React.createElement(BetterTableRowTitle,{title,onPress:onTitlePress,icon}):title:null,React.createElement(import_common10.ReactNative.View,{style:styles.main},padding?React.createElement(import_common10.ReactNative.View,{style:{paddingHorizontal:16,paddingVertical:16}},children):children))}init_define_DEFAULT_LANG();var import_utils2=__toESM(require_utils(),1);function Modal(props){return!Navigator||!modalCloseButton?null:React.createElement(Navigator,{initialRouteName:props.mkey,screens:{[props.mkey]:Object.assign((0,import_utils2.without)(props,"mkey","children"),{headerLeft:modalCloseButton?.(()=>popModal(props.mkey)),render:()=>props.children})}})}init_define_DEFAULT_LANG();var import_common11=__toESM(require_common(),1),import_components=__toESM(require_components(),1);var{FormRow}=import_components.Forms;function ChooseSheet({title,value:_value,options,callback}){var[value,setValue]=import_common11.React.useState(_value);return import_common11.React.createElement(ActionSheet,{title},options.map(x=>import_common11.React.createElement(FormRow,{label:x.name,subLabel:x.description,trailing:x.iconComponent?x.iconComponent:x.icon&&import_common11.React.createElement(import_common11.ReactNative.Image,{source:x.icon,resizeMode:"cover",style:{width:24,height:24,tintColor:x.iconColor}}),leading:import_common11.React.createElement(FormRow.Radio,{selected:x.value===value}),onPress:()=>{setValue(x.value),callback(x.value)}})))}init_define_DEFAULT_LANG();var import_common14=__toESM(require_common(),1),import_alerts=__toESM(require_alerts(),1),import_assets5=__toESM(require_assets(),1),import_components2=__toESM(require_components(),1),import_toasts3=__toESM(require_toasts(),1);init_define_DEFAULT_LANG();var import_metro11=__toESM(require_metro(),1),import_common12=__toESM(require_common(),1);var{FormCheckbox}=(0,import_metro11.find)(x=>x?.FormCheckbox&&!x?.FormCardSection);function InlineCheckbox({label,initialValue,update}){var[value,setValue]=import_common12.React.useState(initialValue);return update(value),import_common12.React.createElement(import_common12.ReactNative.Pressable,{accessibilityLabel:label,accessibilityRole:"checkbox",accessibilityState:{selected:value},onPress:()=>{setValue(!value)},style:{flexDirection:"row",alignItems:"center",gap:8,marginTop:12}},import_common12.React.createElement(FormCheckbox,{checked:value}),import_common12.React.createElement(Text,{variant:"text-md/normal",color:"TEXT_NORMAL"},label))}init_define_DEFAULT_LANG();var import_common13=__toESM(require_common(),1);var AnimatedCircle=Reanimated.default.createAnimatedComponent(Svg.Circle);function ProgressCircle({radius,stroke,color,progress}){var{viewbox,circleRadius,circumference}=import_common13.React.useMemo(()=>({viewbox:(radius+stroke)*2,circleRadius:radius,circumference:2*Math.PI*(radius+stroke/2)}),[radius,stroke]),strokeDashoffset=Reanimated.useSharedValue(circumference),strokeWidth=Reanimated.useSharedValue(1);return import_common13.React.useEffect(()=>{strokeDashoffset.value=Reanimated.withTiming(circumference-progress*circumference,{duration:250}),strokeWidth.value=Reanimated.withTiming(progress!==0?stroke:0,{duration:250})},[progress,circumference,stroke]),import_common13.React.createElement(Svg.Svg,{width:viewbox,height:viewbox,viewBox:`0 0 ${viewbox} ${viewbox}`,style:{position:"absolute",transform:[{rotate:"-90deg"},{translateY:stroke}]},pointerEvents:"none"},import_common13.React.createElement(AnimatedCircle,{cx:"50%",cy:"50%",stroke:color,r:circleRadius,fill:"#0000",strokeLinecap:"round",strokeDasharray:circumference,strokeDashoffset,strokeWidth}))}function asyncGeneratorStep6(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator6(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep6(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep6(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}var{FormRow:FormRow2}=import_components2.Forms;function IconpackRow({pack,onPress}){var styles=import_common14.stylesheet.createThemedStyleSheet({headerTrailing:{flexDirection:"row",gap:15,alignItems:"center"},actions:{flexDirection:"row-reverse",alignItems:"center",gap:5}}),[packStatus,setPackStatus]=import_common14.React.useState({installed:!1,outdated:!1,loading:!0}),[progressCnt,setProgressCnt]=import_common14.React.useState(0);import_common14.React.useEffect(()=>void isPackInstalled(pack).then(x=>setPackStatus({installed:!!x,outdated:x==="outdated",loading:!1})),[]);var size=state.iconpack.hashes[pack.id]?.size;useState();var doInstall=()=>{if(cancelRef.current){cancelRef.current(),setPackStatus({installed:packStatus.installed,outdated:packStatus.outdated,loading:!1});return}if(!(!size||packStatus.loading)){var willUninstall=packStatus.outdated?!1:packStatus.installed,cont=function(){var _ref=_async_to_generator6(function*(){setPackStatus({installed:willUninstall,outdated:packStatus.outdated,loading:!0});var controller=new AbortController;willUninstall||(cancelRef.current=_async_to_generator6(function*(){controller.abort(),packStatus.outdated||(yield uninstallIconpack(pack))}));try{willUninstall?yield uninstallIconpack(pack):yield installIconpack(pack,controller.signal,setProgressCnt)}catch(e){cancelRef.current=null,setProgressCnt(0),controller.signal.aborted||(0,import_toasts3.showToast)(String(e),(0,import_assets5.getAssetIDByName)("CircleXIcon-primary")),setPackStatus({installed:willUninstall,outdated:packStatus.outdated,loading:!1});return}cancelRef.current=null,setProgressCnt(0),setPackStatus({installed:!willUninstall,outdated:!1,loading:!1})});return function(){return _ref.apply(this,arguments)}}(),balls=vstorage.downloadIconpackModalDismissed;!balls&&!willUninstall?(0,import_alerts.showConfirmationAlert)({title:lang.format("alert.downloadpack.title",{}),children:import_common14.React.createElement(import_common14.React.Fragment,null,import_common14.React.createElement(Text,{variant:"text-md/normal",color:"TEXT_NORMAL",style:{marginTop:8}},Lang.basicFormat(lang.format("alert.downloadpack.body",{iconpack:pack.name,space:formatBytes(size)}))),import_common14.React.createElement(InlineCheckbox,{initialValue:!!vstorage.downloadIconpackModalDismissed,update:v=>balls=v,label:lang.format("alert.downloadpack.dontshowagain_toggle",{})})),confirmText:lang.format("alert.downloadpack.confirm",{}),cancelText:lang.format("alert.downloadpack.cancel",{}),onConfirm:()=>{vstorage.downloadIconpackModalDismissed=balls,cont()}}):cont()}},cancelRef=import_common14.React.useRef(null);return import_common14.React.useEffect(()=>()=>cancelRef.current?.(),[]),import_common14.React.createElement(FormRow2,{label:pack.name,subLabel:pack.description,onPress,leading:import_common14.React.createElement(FormRow2.Icon,{source:{uri:`${pack.load}images/native/main_tabs/Messages${pack.suffix}.png`}}),trailing:import_common14.React.createElement(import_common14.ReactNative.View,{style:styles.headerTrailing},vstorage.iconpackDownloading&&import_common14.React.createElement(import_common14.ReactNative.View,{style:styles.actions},progressCnt!==null&&import_common14.React.createElement(ProgressCircle,{radius:16,stroke:3,color:"#fff",progress:progressCnt??null}),import_common14.React.createElement(IconButton,{onPress:doInstall,loading:!packStatus||packStatus.loading,size:"sm",variant:packStatus?.installed?packStatus.outdated?"primary":"destructive":"secondary",disabled:!packStatus||!size||packStatus.loading&&!cancelRef.current,icon:packStatus&&(0,import_assets5.getAssetIDByName)(packStatus.installed?packStatus.outdated?"GlobeEarthIcon":"TrashIcon":"DownloadIcon")})),import_common14.React.createElement(FormRow2.Radio,{selected:vstorage.iconpack.pack===pack.id}))})}var{FormRow:FormRow3,FormCheckboxRow}=import_components3.Forms,tabs={iconpack:{title:()=>lang.format("modal.config.iconpack.title",{}),render(){var styles=import_common15.stylesheet.createThemedStyleSheet({previewBase:{width:60,height:60,backgroundColor:import_ui4.semanticColors.BG_MOD_FAINT,borderRadius:8,justifyContent:"center",alignItems:"center",marginBottom:4,marginTop:8},previewImage:{width:50,height:50},previewSource:{marginHorizontal:-16,paddingBottom:20,fontFamily:import_common15.constants.Fonts.CODE_SEMIBOLD||import_common15.constants.Fonts.CODE_NORMAL,includeFontPadding:!1}}),[_,forceUpdate]=import_common15.React.useReducer(x=>~x,0);(0,import_storage.useProxy)(vstorage);var superSecretTimeout=import_common15.React.useRef(null);return import_common15.React.createElement(import_common15.React.Fragment,null,import_common15.React.createElement(import_common15.ReactNative.View,{style:{marginHorizontal:16,marginTop:8}},import_common15.React.createElement(RowButton,{label:lang.format("modal.config.iconpack.mode",{}),subLabel:lang.format(`modal.config.iconpack.mode.${vstorage.iconpack.mode}.desc`,{}),onPress:()=>{ActionSheet.open(ChooseSheet,{title:lang.format("modal.config.iconpack.mode",{}),value:vstorage.iconpack.mode,options:[ConfigIconpackMode.Automatic,ConfigIconpackMode.Manual,ConfigIconpackMode.Disabled].map(e=>({name:lang.format(`modal.config.iconpack.mode.${e}`,{}),description:lang.format(`modal.config.iconpack.mode.${e}.desc`,{}),value:e})),callback(v){vstorage.iconpack.mode=v}})},onPressIn:()=>superSecretTimeout.current=setTimeout(()=>{vstorage.iconpackDownloading||(0,import_toasts4.showToast)("Yay!",(0,import_assets6.getAssetIDByName)("SparklesIcon")),vstorage.iconpackDownloading=!vstorage.iconpackDownloading},3e3),onPressOut:()=>{clearTimeout(superSecretTimeout.current)}})),vstorage.iconpack.mode===ConfigIconpackMode.Manual&&import_common15.React.createElement(import_common15.React.Fragment,null,import_common15.React.createElement(BetterTableRowGroup,{title:lang.format("modal.config.iconpack.choose",{})},state.iconpack.list.map(pack=>import_common15.React.createElement(IconpackRow,{pack,onPress:()=>{vstorage.iconpack.pack=pack.id,vstorage.iconpack.isCustom=!1,forceUpdate()}})),import_common15.React.createElement(FormRow3,{label:lang.format("modal.config.iconpack.choose.custom",{}),trailing:import_common15.React.createElement(FormRow3.Radio,{selected:vstorage.iconpack.isCustom}),onPress:()=>{vstorage.iconpack.isCustom=!0,vstorage.iconpack.pack=void 0,forceUpdate()}})),vstorage.iconpack.isCustom&&import_common15.React.createElement(import_common15.React.Fragment,null,import_common15.React.createElement(BetterTableRowGroup,{title:lang.format("modal.config.iconpack.choose.custom",{}),padding:!0},import_common15.React.createElement(import_common15.ReactNative.View,{style:{paddingHorizontal:16,paddingTop:16}},import_common15.React.createElement(import_common15.ReactNative.View,{style:[{justifyContent:"center",alignItems:"center"}]},import_common15.React.createElement(Text,{variant:"text-sm/semibold",color:"TEXT_SECONDARY"},lang.format("modal.config.iconpack.custom.preview",{})),import_common15.React.createElement(import_common15.ReactNative.View,{style:styles.previewBase},import_common15.React.createElement(import_common15.ReactNative.Image,{style:styles.previewImage,source:{uri:`${customUrl()}images/native/main_tabs/Messages${vstorage.iconpack.custom.suffix}.png`},resizeMode:"cover"})),import_common15.React.createElement(Text,{variant:"text-xxs/medium",color:"TEXT_MUTED",style:styles.previewSource},customUrl(),"images/native/main_tabs/Messages",vstorage.iconpack.custom.suffix,".png")),import_common15.React.createElement(TextInput,{size:"md",value:vstorage.iconpack.custom.url,onChange:v=>vstorage.iconpack.custom.url=v,label:lang.format("modal.config.iconpack.custom.url",{}),description:lang.format("modal.config.iconpack.custom.url.desc",{}),placeholder:"https://example.com"}),import_common15.React.createElement(import_common15.ReactNative.View,{style:{height:8}}),import_common15.React.createElement(TextInput,{size:"md",value:vstorage.iconpack.custom.suffix,onChange:v=>vstorage.iconpack.custom.suffix=v,label:lang.format("modal.config.iconpack.custom.suffix",{}),description:Lang.basicFormat(lang.format("modal.config.iconpack.custom.suffix.desc",{})),placeholder:"@2x"}))),import_common15.React.createElement(BetterTableRowGroup,{nearby:!0},import_common15.React.createElement(FormCheckboxRow,{label:lang.format("modal.config.iconpack.custom.config.bigger_status",{}),subLabel:Lang.basicFormat(lang.format("modal.config.iconpack.custom.config.bigger_status.desc",{})),leading:import_common15.React.createElement(FormRow3.Icon,{source:(0,import_assets6.getAssetIDByName)("PencilIcon")}),selected:vstorage.iconpack.custom.config.biggerStatus,onPress:()=>vstorage.iconpack.custom.config.biggerStatus=!vstorage.iconpack.custom.config.biggerStatus})))),import_common15.React.createElement(import_common15.ReactNative.View,{style:{height:20}}))}}};function ConfigModal(){var state2=useSegmentedControlState({defaultIndex:0,items:Object.entries(tabs).map(([id,data])=>({label:data.title(),id,page:data.render()})),pageWidth:import_common15.ReactNative.Dimensions.get("window").width});return(0,import_storage.useProxy)(vstorage),import_common15.React.createElement(Modal,{mkey:"config-modal",title:lang.format("modal.config.title",{})},import_common15.React.createElement(import_common15.ReactNative.View,{style:{flex:0,marginTop:12}},import_common15.React.createElement(Tabs,{state:state2})),import_common15.React.createElement(import_common15.ReactNative.ScrollView,{style:{flex:1}},import_common15.React.createElement(SegmentedControlPages,{state:state2})))}var ListItem=({state:state2,index,children,trolley})=>{var trolleySupercalifragilisticexpialidocious=Reanimated.useSharedValue("0deg"),color=state2?"TEXT_POSITIVE":"TEXT_DANGER",styles=import_common16.stylesheet.createThemedStyleSheet({icon:{tintColor:import_ui5.semanticColors[color],width:16,height:16,marginTop:3},row:{flexDirection:"row",alignItems:"center",gap:4}});import_common16.React.useEffect(()=>{trolley&&(trolleySupercalifragilisticexpialidocious.value=Reanimated.withRepeat(Reanimated.withTiming("360deg",{duration:1e3,easing:Reanimated.Easing.linear}),-1,!1))},[]);var thing=Reanimated.FadeInLeft.duration(200).easing(Reanimated.Easing.out(Reanimated.Easing.ease)).delay(index*25);return import_common16.React.createElement(Reanimated.default.View,{style:[styles.row,{transform:[{rotateY:trolleySupercalifragilisticexpialidocious,rotateZ:trolleySupercalifragilisticexpialidocious},{perspective:100}]}],entering:thing,exiting:out},import_common16.React.createElement(import_common16.ReactNative.Image,{source:state2?(0,import_assets7.getAssetIDByName)("CircleCheckIcon-primary"):(0,import_assets7.getAssetIDByName)("CircleXIcon-primary"),style:styles.icon,resizeMode:"cover"}),import_common16.React.createElement(Text,{variant:state2?"text-md/semibold":"text-md/medium",color},children))},startTrollingTimeout,startTrollingCounter=0,transition=Reanimated.LinearTransition.duration(100).easing(Reanimated.Easing.inOut(Reanimated.Easing.ease)),inUp=Reanimated.FadeInUp.duration(200).easing(Reanimated.Easing.out(Reanimated.Easing.ease)),out=Reanimated.FadeOut.duration(80).easing(Reanimated.Easing.ease);function Settings_default(){useState();var trolley=import_common16.React.useMemo(()=>(startTrollingTimeout||(startTrollingTimeout=setTimeout(()=>{startTrollingCounter=0,startTrollingTimeout=null},5e3)),startTrollingCounter++,startTrollingCounter>=3?(clearTimeout(startTrollingTimeout),startTrollingCounter=0,!0):!1),[]),styles=import_common16.stylesheet.createThemedStyleSheet({base:{width:"100%",height:"100%",justifyContent:"center",alignItems:"center",paddingHorizontal:12,gap:15},container:{width:"100%",padding:12,backgroundColor:import_ui5.semanticColors.CARD_PRIMARY_BG,borderColor:import_ui5.semanticColors.BORDER_FAINT,borderWidth:1,borderRadius:16,gap:2,overflow:"hidden"},bottomButtons:{width:"100%",flexDirection:"row",alignItems:"center",gap:trolley?0:8},titleIcon:{tintColor:import_ui5.semanticColors.TEXT_NORMAL,width:20,height:20},btnIcon:{tintColor:import_ui5.semanticColors.REDESIGN_BUTTON_PRIMARY_TEXT,width:20,height:20,marginRight:4},btnIconSecdonary:{tintColor:import_ui5.semanticColors.REDESIGN_BUTTON_SECONDARY_TEXT},row:{flexDirection:"row",alignItems:"center",gap:6,marginBottom:2}}),trolleyRot=Reanimated.useSharedValue("0deg"),trolleyShake=Reanimated.useSharedValue("0deg"),trolleyClyde=Reanimated.useSharedValue("0deg");return import_common16.React.useEffect(()=>{trolley&&(trolleyRot.value=Reanimated.withRepeat(Reanimated.withTiming("360deg",{duration:600,easing:Reanimated.Easing.linear}),-1,!1),trolleyShake.value="-7deg",trolleyShake.value=Reanimated.withRepeat(Reanimated.withTiming("7deg",{duration:200}),-1,!0),trolleyClyde.value=Reanimated.withRepeat(Reanimated.withTiming("360deg",{duration:1500,easing:Reanimated.Easing.linear}),-1,!1))},[]),import_common16.React.createElement(import_common16.ReactNative.View,{style:styles.base},import_common16.React.createElement(Reanimated.default.View,{style:[styles.container,{transform:[{rotate:trolleyShake}]}],layout:transition},state.loading?import_common16.React.createElement(import_common16.ReactNative.ActivityIndicator,{size:"large",style:{flex:1,marginVertical:30}}):import_common16.React.createElement(import_common16.React.Fragment,null,import_common16.React.createElement(Reanimated.default.View,{style:styles.row,entering:inUp,exiting:out},import_common16.React.createElement(Reanimated.default.Image,{source:trolley?(0,import_assets7.getAssetIDByName)("clyde-avatar"):state.active?(0,import_assets7.getAssetIDByName)("CircleCheckIcon-primary"):(0,import_assets7.getAssetIDByName)("CircleXIcon-primary"),style:trolley?{width:100,height:100,borderRadius:25,transform:[{rotateY:trolleyClyde},{perspective:100}]}:styles.titleIcon,resizeMode:"cover"}),import_common16.React.createElement(Text,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},trolley?import_common16.React.createElement(import_common16.React.Fragment,null,"Themes+ is"," ",import_common16.React.createElement(Text,{variant:"heading-xxl/bold",color:"TEXT_WARNING"},"AAAAAAAAAAAAAAAAAAAAAAAAAHHHH AAAAAAAAAAAA AAAAAAAGHHHHHHHHH")):Lang.basicFormat(lang.format("settings.header",{active:state.active})))),state.active?Object.values(PatchType).sort((a,b)=>{var isA=state.patches.includes(a),isB=state.patches.includes(b);return isA===isB?a<b?-1:a>b?1:0:isA?-1:isB?1:0}).map((x,i)=>import_common16.React.createElement(ListItem,{key:x,index:i,state:state.patches.includes(x),trolley},lang.format(`settings.patch.${x}`,{}))):state.inactive.map((x,i)=>import_common16.React.createElement(ListItem,{key:x,index:i,state:!1,trolley},lang.format(`settings.inactive.${x}`,{}))))),import_common16.React.createElement(Reanimated.default.View,{style:[styles.bottomButtons,{transform:[{rotate:trolleyRot}]}],layout:transition},import_common16.React.createElement(Button,{size:trolley?"sm":"md",variant:"primary",text:lang.format("settings.reload",{}),iconPosition:"start",icon:import_common16.React.createElement(import_common16.ReactNative.Image,{source:(0,import_assets7.getAssetIDByName)("RetryIcon"),style:styles.btnIcon,resizeMode:"cover"}),onPress:()=>!state.loading&&load(),loading:state.loading,style:{flex:trolley?.25:.5}}),import_common16.React.createElement(Button,{size:trolley?"lg":"md",variant:"secondary",text:trolley?`${lang.format("modal.config.title",{}).toUpperCase()}!!!!!!!`:lang.format("modal.config.title",{}),iconPosition:"start",icon:import_common16.React.createElement(import_common16.ReactNative.Image,{source:(0,import_assets7.getAssetIDByName)("SettingsIcon"),style:[styles.btnIcon,styles.btnIconSecdonary,trolley?{width:60,height:60}:null],resizeMode:"cover"}),onPress:()=>{openModal("config-modal",ConfigModal)},style:{flex:trolley?.75:.5}})),import_common16.React.createElement(FloatingActionButton,{icon:(0,import_assets7.getAssetIDByName)("CircleQuestionIcon-primary"),positionBottom:16,onPress:()=>import_common16.url.openURL("https://github.com/nexpid/ThemesPlus")}))}var PatchType=function(PatchType2){return PatchType2.Icons="icons",PatchType2.CustomIconOverlays="custom_icon_overlays",PatchType2.MentionLineColor="mention_line_color",PatchType2.Iconpack="iconpack",PatchType2}({}),InactiveReason=function(InactiveReason2){return InactiveReason2.NoTheme="no_theme",InactiveReason2.ThemesPlusUnsupported="themes_plus_unsupported",InactiveReason2.NoIconpacksList="no_iconpacks_list",InactiveReason2.NoIconpackConfig="no_iconpack_config",InactiveReason2.NoIconpackFiles="no_iconpack_files",InactiveReason2}({}),ConfigIconpackMode=function(ConfigIconpackMode2){return ConfigIconpackMode2.Automatic="automatic",ConfigIconpackMode2.Manual="manual",ConfigIconpackMode2.Disabled="disabled",ConfigIconpackMode2}({}),vstorage=import_plugin.storage,enabled=!1,lang=new Lang("themes_plus"),src_default={onLoad:()=>{vstorage.iconpack??={mode:"automatic",custom:{url:"https://raw.githubusercontent.com/Moodzz1/discord-iconpacks/master/Packs/Solar-Duotone/",suffix:"",config:{biggerStatus:!1}},isCustom:!1},enabled=!0;try{load()}catch(e){console.log("Themes+ failed to load whoopsies!!",e)}},onUnload:()=>{enabled=!1,lang.unload();for(var x of patches)x()},settings:Settings_default};return __toCommonJS(src_exports);})();
return $;})();
